<!DOCTYPE html>
<html lang="pt-BR" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta name="keywords" content="formata√ß√£o, windows, linux, freebsd, bios, uefi, instala√ß√£o, balena, etcher, ventoy, os">
    <meta name="author" content="Cain">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instala√ß√£o do FreeBSD 14</title>
    <!--Social Media Open Graph-->
    <meta property="og:title" content="Instala√ß√£o de Sistemas Operacionais - FreeBSD"/>
    <meta property="og:url" content="https://cain-dev.github.io/default/"/>
    <meta property="og:type" content="article"/>
    <meta property="og:description" content="Aprenda a instalar o FreeBSD 13"/>
    <meta property="og:image" content="https://raw.githubusercontent.com/cain-dev/default/main/assets/images/ogimage.jpg"/>
    <!--/Social Media Open Graph-->
    <!--Links-->
    <link rel="shortcut icon" href="https://www.freebsd.org/favicon.ico">
    <link rel="stylesheet" type="text/css"href="../os_style.css">   
    <!--/Links-->
</head>
<body>
    <header id="main-header">
        <ul>
            <li><a href="../index.html">Home</a></li>
            <li><p>@cain-dev</p></li>
            <li><a href="../extra/contact.html">Contato</a></li>
        </ul>
    </header>
    <main id="main-area">
        <h1>Instala√ß√£o do FreeBSD 14</h1>
        <h2>Introdu√ß√£o (e atualiza√ß√£o)</h2>
        <p>Quando eu comecei esse tutorial mais de 3 anos atr√°s, essa p√°gina ainda tinha um aviso de n√£o recomenda√ß√£o de instala√ß√£o em UEFI, o Slim ainda era uma boa porta de entrada, portsnap era algo nativo e ntpdate ainda era uma op√ß√£o de instala√ß√£o... Muita coisa mudou, e entre elas a minha percep√ß√£o do que √© o FreeBSD.</p>
        <p>Ent√£o a primeira coisa que eu quero avisar √© que o FreeBSD √© um sistema operacional basicamente sem automatiza√ß√µes, com alguns padr√µes de funcionamento bastante antigos e que por (bastante) vezes √© extremamente inconveniente!</p>
        <p>Diferente do Archlinux ou do Hackintosh, eu n√£o posso recomendar o FreeBSD a n√≠vel de usu√°rio final m√©dio, especialmente para uso em desktop! Ent√£o antes de mais nada saiba: Este tutorial √© para voc√™ que quer estudar um pouco a tecnologia do FreeBSD, a oferta de softwares de uso geral √© limitad√≠ssima, diversos pacotes simplesmente n√£o tem mantenedores e a configura√ß√£o necess√°ria para utiliza√ß√£o dos ports atrav√©s de ferramentas auxili√°res √© muito mais moroso do que qualquer coisa que voc√™ usaria no Archlinux ou at√© mesmo no Gentoo (√© s√©rio), sem contar que mesmo com todo cuidado do mundo a compila√ß√£o na unha resultar√° em bugs por diversas vezes, as op√ß√µes de compila√ß√£o usada nos pacotes atrav√©s do packet manager n√£o √© nada s√£... Ent√£o espere ter dor de cabe√ßa! Eu n√£o disse curva de aprendizado dif√≠cil, eu disse dor de cabe√ßa pura e simples!</p>
        <p>Se voc√™ pretende utilizar o sistema e suas ferramentas (como o ZFS) para algum servi√ßo em rede, vai ser at√© mais r√°pido e f√°cil do que setar um Debian, mas se for para desktop e/ou com interface gr√°fica... Seja bem vindo ao inferno!</p>
        <p><strong>AVISO: Para n√£o ter que tirar print de tudo novamente, as imagens ser√£o meramente ilustrativas! Sete as op√ß√µes baseadas no texto e n√£o nas imagens!</strong></p>
        <p><strong>AVISO 2: Esta documenta√ß√£o presume que voc√™ √© um usu√°rio que entende o b√°sico de sistemas unixlike e como editar arquivos de configura√ß√£o.</strong></p>
        <h3>Como proceder:</h3>
        <ul>
            <li>Para navegar nos menus utilize as setas (‚Üê‚Üë‚Üì‚Üí)</li>
            <li>Para alterar o campo de sele√ß√£o tecle ‚Üπ Tab</li>
            <li>Para selecionar as op√ß√µes ( * ) nos menus tecle Espa√ßo</li> 
            <li>Enter ‚èé quando quiser confirmar a sele√ß√£o.</li>
        </ul>
        <p>Essa √© a tela de boas vindas do FreeBSD, tecle Enter ou aguarde o fim da contagem...</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd1.jpg" alt="">
        <p>Selecione <mark>Install</mark> para iniciar o processo de instala√ß√£o:</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd2.jpg" alt="">
        <p>Selecione <mark>Brazilian (accent keys)</mark> e depois <mark>Continue with br.kbd keymap</mark>:</p>
        <p>Se quiser voc√™ pode testar o teclado em <mark>Test br.kbd keymap.</mark></p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd3.jpg" alt="">
        <p>Escolha o <mark>hostname</mark> da m√°quina:</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd4.jpg" alt="">
        <p>Selecione os componentes, recomendo o <mark>lib32</mark> (caso queira compatibilidade com bin√°rios de 32bits) e o <mark>ports</mark> (caso queira utilizar o sistema de pacotes por compila√ß√£o):</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd5.jpg" alt="">
        <p>Para particionamento a n√≠vel de usu√°rio final recomendo <mark>Auto (UFS)</mark>:</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd6.jpg" alt="">
        <p>Selecione <mark>Entire Disk</mark>:</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd7.jpg" alt="">
        <p>Na tabela de parti√ß√£o recomendo <mark>MBR para BIOS</mark> ou <mark>GPT para UEFI</mark>:</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd8.jpg" alt="">
        <p>Caso esteja de acordo com a tabela de parti√ß√£o selecione <mark>Finish</mark>:</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd9.jpg" alt="">
        <p>Caso esteja de acordo com as altera√ß√µes em disco selecione <mark>Commit</mark>:</p>
        <p><strong>Alerta: Todos os dados no disco ser√£o perdidos! Tenha a certeza de ter selcionado o disco correto e/ou ter feito backup antes de prosseguir!</strong></p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd10.jpg" alt="">
        <p>Aguarde o fetch...</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd11.jpg" alt="">
        <p>E o extract...</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd12.jpg" alt="">
        <p>Insira a senha de administrador da m√°quina (root):</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd13.jpg" alt="">
        <p>Selecione a interface de rede:</p>
        <p><strong>AVISO: No meu caso estou instalando numa interface a cabo, caso voc√™ esteja utilizando uma interface de rede sem fio voc√™ deve selecionar o org√£o regulador (<mark>FCC</mark>, <mark>Brazil</mark>), a rede e a senha da sua conex√£o (n√£o obtive sucesso ao conectar no Wifi com caracteres especiais)</strong></p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd14.jpg" alt="">
        <p>Selecione se voc√™ quer configurar <mark>IPv4</mark> para essa interface (caso esteja em d√∫vida selecione <mark>Yes</mark>):</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd15.jpg" alt="">
        <p>Selecione se voc√™ quer configurar DHCP para essa interface (caso esteja em d√∫vida selecione <mark>Yes</mark>):</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd16.jpg" alt="">
        <p>Selecione se voc√™ quer configurar IPv6 para essa interface (caso esteja em d√∫vida selecione <mark>No</mark>):</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd17.jpg" alt="">
        <p>Caso deseje voc√™ pode configurar o IP de DNS (por padr√£o ser√° carregado o ip do gateway, caso esteja em d√∫vida selecione <mark>OK</mark>):</p>
        <p>*Recomendo o uso do <mark>OpenDNS</mark> (IPs <mark>208.67.222.222</mark>/<mark>208.67.220.220</mark> para IPv4 e <mark>2620:119:35::35</mark>/<mark>2620:119:53::53</mark> para IPv6)</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd19.jpg" alt="">
        <p>Selecione a sua regi√£o (<mark>America</mark> > <mark>Brazil</mark> > <mark>Estado</mark>):</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd20.jpg" alt="">
        <p>Se estiver correto confirme:</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd21.jpg" alt="">
        <p>Caso a data esteja correta selecione <mark>Skip</mark>, caso contr√°rio altere em <mark>Set Date</mark>:</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd22.jpg" alt="">
        <p>Caso a hora esteja correta selecione <mark>Skip</mark>, caso contr√°rio altere em <mark>Set Time</mark>:</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd23.jpg" alt="">
        <p>Selecione os servi√ßos para serem iniciados no boot, recomendo deixar marcado <mark>sshd</mark> (se e somente se voc√™ deseja se conectar a essa m√°quina por SSH), <mark>moused</mark> caso queira utilizar o mouse no console, <mark>ntpd</mark> e <mark>ntpd_sync_on_start</mark>, <mark>powerd</mark> (especialmente em laptops) e <mark>dumpdev</mark> (√∫til quase que somente para desenvolvedores):</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd24.jpg" alt="">
        <p>Aqui s√£o as op√ß√µes de enrigecimento de seguran√ßa, recomendo marcar todos ou pelo menos <mark>read_msgbuf</mark>, <mark>proc_debug</mark>, <mark>clear_tmp</mark>, <mark>disable_syslogd</mark>, <mark>secure_console</mark>, <mark>disable_ddtrace</mark>:</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd25.jpg" alt="">
        <p>Selecione <mark>Yes</mark> para adicionar o seu usu√°rio no sistema:</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd26.jpg" alt="">
        <code>Username: <mark>insira aqui seu nome de usu√°rio</mark></code>
        <code>Full name: <mark>apenas tecle Enter</mark></code>
        <code>Uid (Leave empty for default): <mark>apenas tecle Enter</mark></code>
        <code>Login group [seuusu√°rio]: <mark>apenas tecle Enter</mark></code>
        <p>para acesso administrativo para esse usu√°rio adicione-o ao grupo <em>wheel</em><br>para iniciar diretamente a sess√£o gr√°fica adicione-o ao grupo <em>video</em><br>para permitir montagem de parti√ß√µes e outras fun√ß√µes de configura√ß√£o adicione-o ao grupo <em>operator</em></p>
        <code>Login group is . Invite  into other groups? []: <em>wheel</em> <em>video</em> <em>operator</em></code>
        <code>Login class [default]: <mark>apenas tecle Enter</mark></code>
        <code>Shell (sh csh tcsh nologin) [sh]: <mark>apenas tecle Enter</mark></code>
        <code>Home Directory [/home/seuusu√°rio]: <mark>apenas tecle Enter</mark></code>
        <code>Home Directory Permissions (Leave empty for default): <mark>apenas tecle Enter</mark></code>
        <code>User password-based authentication? [yes]: <mark>apenas tecle Enter</mark></code>
        <code>Use an empty password? (yes/no) [no]: <mark>apenas tecle Enter</mark></code>
        <code>Use a random password? (yes/no) [no]: <mark>apenas tecle Enter</mark></code>
        <code>Enter password: <mark>insira sua senha</mark></code>
        <code>Enter password again: <mark>confirme sua senha</mark></code>
        <code>Lock out the account after creation? (yes/no) [no]: <mark>apenas tecle Enter</mark></code>
        <code>Ok? (yes/no): <mark>yes</mark></code>
        <code>Add another user? (yes/no): <mark>no</mark></code>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd30.jpg" alt="">
        <p>Selecione <mark>Exit</mark> (a menos que queira alterar algo):</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd32.jpg" alt="">
        <p>Selecione <mark>No</mark>:</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd33.jpg" alt="">
        <p>Selecione <mark>Reboot</mark> para concluir a instala√ß√£o e reiniciar a m√°quina para o sistema instalado.</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd34.jpg" alt="">
        <h2>P√≥s Instala√ß√£o</h2>
        <p>Assim que o sistema iniciar logue na conta de administrador: (login: <mark>root</mark> - senha: <mark>senha que voc√™ digitou para acesso administrativo</mark>)</p>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd35.jpg" alt="">
        <p>Assim que logado na conta de root vamos come√ßar a preparar o sistema...</p>
        <p><strong>Opcional:</strong> Caso voc√™ tenha problemas para utilizar o terminal devido ao tamanho da fonte, utilize o comando abaixo para selecionar uma outra fonte:</p>
        <code>vidfont</code>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsd36.jpg" alt="">
        <p>Para atualizar os patches de seguran√ßa do sistema use os comandos:</p>
        <code>freebsd-update fetch</code>
        <code>freebsd-update install</code>
        <p>Para atualizar os pacotes insira o comando:</p>
        <code>pkg update && upgrade</code>
        <code>Do you want to fetch and install it now?: <mark>y</mark></code> 
        <p>Se aparecer:</p>
        <code>Your packages are up to date</code>
        <p>Significa que seu sistema j√° est√° devidamente atualizado.</p>
        <!-- FIM DA INSTALA√á√ÉO DO SISTEMA -->
        <p><strong>Lembre-se!</strong> Voc√™ pode utilizar o comando abaixo para remover pacotes espec√≠ficos:</p>
        <code>pkg remove <em>nomedopacote</em></code>
        <p>E pode usar o comando abaixo para remover pacotes √≥rf√£os:</p>
        <code>pkg autoremove</code>
        <h2>Configura√ß√£o para Usu√°rio Final</h2>
        <!-- DOAS -->
        <h3>Eleva√ß√£o de privil√©gio com o Doas</h3>
        <p>Se voc√™ seguiu corretamente os passos at√© aqui o seu usu√°rio faz parte do grupo <em>wheel</em>, para eleva√ß√£o de privil√©gio instale o <em>doas</em> com o comando:</p>
        <code>pkg install doas</code>
        <p>O doas precisa de uma simples configura√ß√£o para eleva√ß√£o de privil√©gio, edite o arquivo <em>/usr/local/etc/doas.conf</em> e insira a linha:</p>
        <code>permit persist keepenv :wheel</code>
        <p>Caso voc√™ queira a eleva√ßao de privil√©gios sem inser√ß√£o de senha (n√£o recomendado) utilize a linha:</p>
        <code>permit nopass keepenv :wheel</code>
        <h3>Instala√ß√£o de Desktop Environment</h3>
        <p>Se voc√™ est√° lendo isso as chances s√£o que voc√™ n√£o vai utilizar o FreeBSD como sistema de servidor. O FreeBSD pode ser utilizado normalmente como um sistema para usu√°rio final, entretanto, Desktop Environments (ambientes gr√°ficos) geralmente n√£o s√£o t√£o polidos e atualizados no FreeBSD tanto quanto s√£o no universo Linux. Se voc√™ utilizar os f√≥runs vai ver que grande parte dos usu√°rios prefere utilizar apenas um gerenciador de janelas (window manager) e n√£o um ambiente completo (como o Cinnamon, por exemplo). Os rec√©m chegados do Linux provavelmente instalam algum port de XFCE, MATE ou KDE, mas saiba que alguns ambientes aqui <strong>podem</strong> (n√£o quer dizer que v√£o) ser problem√°ticos (ou simplesmente depreciados).</p>
        <p>Isso n√£o significa que voc√™ n√£o pode ter uma excelente experi√™ncia utilizando o FreeBSD como <i>daily driver</i>, mas como esses ambientes recebem relativamente menos suporte e tem um p√∫blico menor por aqui voc√™ n√£o pode se der ao luxo de achar que pode simplesmente instalar um ambiente gr√°fico e dar por encerrado o seu dia. O FreeBSD separa muito bem o espa√ßo de sistema e espa√ßo de usu√°rio e, independente do ambiente que voc√™ utilize voc√™ ainda ter√° que acessar uma camada mais √≠ntima do sistema.</p>
        <!-- INSTALA√á√ÉO DO XORG -->
        <h3>Instala√ß√£o do Xorg</h3>
        <p>A primeira coisa que precisamos para instalar um ambiente gr√°fico √© o Xorg, para instala-lo utilize o comando:</p>
        <code>pkg install xorg</code>
        <code>Proceed with this action? <mark>y</mark></code> 
        <!-- INSTALA√á√ÉO DOS DRIVERS -->
        <h3>Instala√ß√£o dos drivers de v√≠deo</h3>
        <!-- NVIDIA -->
        <h4>NVIDIA</h4>
        <p>Caso voc√™ possua uma placa nvidia mais recente utilize o comando abaixo para instalar os drivers e aplica√ß√µes necess√°rias:</p>
        <code>pkg install nvidia-driver nvidia-settings nvidia-xconfig</code>
        <p>Para setar o carregamento do driver utilize o comando:</p>
        <code>sysrc kld_list+=nvidia-modeset</code>
        <p>O Driver gr√°fico pode ser especificado no diret√≥rio <mark>/usr/local/etc/X11/xorg.conf.d/</mark>. Voc√™ pode criar o arquivo em <mark>/usr/local/etc/X11/xorg.conf.d/20-nvidia.conf</mark> seguindo o exemplo abaixo...</p>
        <code>
        <pre>
Section "Device"
    Identifier "Card0"
    Driver     "nvidia"
EndSection</pre>
        </code>
        <p><strong>OU</strong> utilizar este outro comando para que a configura√ß√£o seja feita automaticamente:</p>
        <code>nvidia-xconfig</code>
        <!-- AMD -->
        <h4>AMD</h4>
        <p>Caso voc√™ possua uma placa ou v√≠deo integrado AMD utilize o comando abaixo para instalar os drivers e aplica√ß√µes necess√°rias:</p>
        <code>pkg install drm-kmod</code>
        <p>Para setar o carregamento do driver para placas p√≥s HD7000 ou Tahiti utilize o comando:</p>
        <code>sysrc kld_list+=amdgpu</code>
        <p>Para setar o carregamento do driver para placas pr√© HD7000 ou Tahiti utilize o comando:</p>
        <code>sysrc kld_list+=radeonkms</code>
        <p>O Driver gr√°fico pode ser especificado no diret√≥rio <mark>/usr/local/etc/X11/xorg.conf.d/</mark>. Voc√™ pode criar o arquivo em <mark>/usr/local/etc/X11/xorg.conf.d/20-nvidia.conf</mark> seguindo o exemplo abaixo:</p>
        <code>
        <pre>
Section "Device"
    Identifier "Card0"
    Driver     "radeon"
EndSection</pre>
        </code>
        <!-- Intel -->
        <h4>Intel</h4>
        <p>Caso voc√™ possua uma placa ou v√≠deo integrado Intel utilize o comando:</p>
        <code>pkg install drm-kmod libva-intel-driver mesa-libs mesa-dri</code>
        <p>Para setar o carregamento do driver utilize o comando:</p>
        <code>sysrc kld_list+=i915kms</code>
        <p>O Driver gr√°fico pode ser especificado no diret√≥rio <mark>/usr/local/etc/X11/xorg.conf.d/</mark>. Voc√™ pode criar o arquivo em <mark>/usr/local/etc/X11/xorg.conf.d/20-nvidia.conf</mark> seguindo o exemplo abaixo:</p>
        <code>
        <pre>
Section "Device"
    Identifier "Card0"
    Driver     "intel"
EndSection</pre>
        </code>
        <p>Caso deseje acelera√ß√£o de hardware instale tamb√©m os pacotes conforme o comando abaixo:</p>
        <code>pkg install libva-intel-driver mesa-libs mesa-dri</code>
        <!-- CONFIGURANDO O XORG -->
        <h3>Configurando o Xorg</h3>
        <h4>Teclado em ABNT2</h4>
        <p>No diret√≥rio <mark>/usr/local/etc/X11/xorg.conf.d/00-keyboard.conf</mark> insira:</p>
<code><pre>
    Section "InputClass"
        Identifier "Keyboard1"
        MatchIsKeyboard "on"
        Option "XkbLayout" "br"
        Option "XkbModel" "abnt2"
    EndSection</pre></code>
        <!-- HABILITANDO SOM -->
        <h3>Habilitando som</h3>
        <p>Para habilitar o som basta carregar os devidos drivers, supondo que voc√™ precise do m√≥dulo para sistemas baseados em Intel adicione a linha abaixo em <mark>/etc/rc.conf</mark>:</p>
        <!-- <code>sound_load="YES"</code> -->
        <code>snd_hda_load="YES"</code>
        <!-- SETANDO LOCALE -->
        <h3>LOCALE</h3>
        <p>Ok, esta √© uma parte simples de fazer mas que quase sempre vai dar problemas, eu j√° pesquisei por dias para entender exatamente o que ocorre mas verdadeiramente ainda n√£o consigo compreender ent√£o vamos por partes.</p>
        <p>O resumo da opera √© que o FreeBSD trabalha com <em>login classes</em>, ent√£o voc√™ cria uma classe de login, deixa as limita√ß√µes e op√ß√µes de ambiente na classe e o usu√°rio que faz parte daquela classe herda essas informa√ß√µes automaticamente, e isso √© extremamente √∫til e interessante e... As vezes simplesmente n√£o funciona! √â... √â isso.</p>
        <p>De qualquer forma o procedimento √© sempre o mesmo:</p>
        <ul>
            <li>Logar na conta de administrador sem manter ambiente (n√£o utilize eleva√ß√£o de privil√©gios com o DOAS para fazer isso)</li>
            <li>Editar o arquivo <mark>/etc/login.conf</mark></li>
            <li>Criar o banco de dados com <mark>cap_mkdb /etc/login.conf</mark> </li>
        </ul>
        <p>√â isso... Mas pode acontecer de simplesmente n√£o funcionar (que saudade do locale-gen üò≠) ent√£o vamos l√°:</p>
        <p>(Se j√° n√£o tiver logado) logue como root sem preservar ambiente com o comando:</p>
        <code>su -</code>
        <p>Insira a senha e edite o arquivo <mark>/etc/login.conf</mark>:</p>
        <code>nano /etc/login.conf</code>
        <p>Nesse arquivo no final da sess√£o <em>default:\</em> voc√™ vai encontrar uma linha como a de baixo:</p>
        <code>:charset=UTF-8:\<br>:lang=C.UTF-8:</code>
        <p>Edite para que fique como no exemplo abaixo:</p>
        <code>:charset=UTF-8:\<br>:lang=pt_BR.UTF-8:</code>
        <p><Strong>BONUS:</Strong> Caso queira remover aquela mensagem chata de login basta setar o argumento <mark>:welcome=/var/run/motd:\</mark> para <mark>:welcome=/dev/null:\</mark>.</p>
        <p>Agora gere o banco com o comando:</p>
        <code>cap_mkdb /etc/login.conf</code>
        <p>√â isso, reinicie o computador, logue novamente na sua conta de usu√°rio comum (n√£o root) e execute o comando abaixo para verificar o locale:</p>
        <code>locale</code>
        <p>Verifique se retorna:</p>
        <code>LANG=pt_BR.UTF-8<br>LC_CTYPE="pt_BR.UTF-8"<br>LC_COLLATE="pt_BR.UTF-8"<br>LC_TIME="pt_BR.UTF-8"<br>LC_NUMERIC="pt_BR.UTF-8"<br>LC_MONETARY="pt_BR.UTF-8"<br>LC_MESSAGES="pt_BR.UTF-8"<br>LC_ALL=</code>
        <p>Se retornar est√° tudo certo, sen√£o voc√™ vai ter que fazer o procedimento para o seu usu√°rio.</p>
        <p>Logue na sua conta de usu√°rio, edite o arquivo <em>.login_conf</em>, altere como no exemplo acima e execute:</p>
        <code>cap_mkdb .login_conf</code>
        <p>Reinicie o computador, relogue na sua conta e verifique o locale.</p>
        <!-- AMBIENTES GR√ÅFICOS -->
        <h3>Instala√ß√£o dos pacotes de Ambiente Gr√°fico</h3>
        <!-- KDE -->
        <h4>Para instala√ß√£o do KDE</h4>
        <p>Para instalar o ambiente gr√°fico KDE Plasma e suas aplica√ß√µes use o comando:</p>
        <code>pkg install kde5</code>
        <p>Se prefere uma instala√ß√£o m√≠nima utilize o comando abaixo:</p>
        <code>pkg install plasma5-plasma</code>
        <p>Lembrando que a instala√ß√£o m√≠nima n√£o possui terminal nativo!</p>
        <p>Como o KDE utiliza o D-BUS, ative o servi√ßo com o comando abaixo:</p>
        <code>sysrc dbus_enable="YES"</code>
        <p>Se e somente se voc√™ vai permanecer no KDE aumente o tamanho dos <i>buffers</i> adicionando as linhas abaixo em <mark>/etc/sysctl.conf</mark>:</p>
        <code>sysctl net.local.stream.recvspace=65536<br>sysctl net.local.stream.sendspace=65536</code>
        <p>Para ser inicializado o KDE Plasma utiliza por padr√£o o SDDM, instale o SSDM com o comando abaixo:</p>
        <code>pkg install sddm</code>
        <p>E habilite o servi√ßo com o comando abaixo:</p>
        <code>sysrc sddm_enable="YES"</code>
        <p>Sete as op√ß√µes de localiza√ß√£o do SDDM com o comando abaixo:</p>
        <code>sysrc sddm_lang="pt_BR"</code>
        <p>Caso queira iniciar a interface manualmente com o comando <em>startx</em> voc√™ pode adicionar o argumento como no exemplo abaixo no arquivo <em>.xinitrc</em>:</p>
        <code>echo "exec dbus-launch --exit-with-x11 ck-launch-session startplasma-x11" > ~/.xinitrc</code>
        <!-- Gnome -->
        <h4>Para instala√ß√£o do Gnome</h4>
        <p>Para instalar o ambiente gr√°fico Gnome e suas aplica√ß√µes use o comando:</p>
        <code>pkg install gnome</code>
        <p>Se prefere uma instala√ß√£o m√≠nima utilize o comando abaixo:</p>
        <code>pkg install gnome-lite</code>
        <p>O Gnome requer que o <em>/proc</em> esteja montado, adicione a segunda linha seguindo o exemplo abaixo em <em>/etc/fstab</em> para montagem autom√°tica:</p>
        <code>
        <table>
            <thead>
                <tr>
                    <th># Device&ensp;<br></th>
                    <th>Mountpoint&ensp;</th>
                    <th>FStype&ensp;</th>
                    <th>Options&ensp;</th>
                    <th>Dump&ensp;</th>
                    <th>Pass#</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>proc</td>
                    <td>/proc</td>
                    <td>procfs</td>
                    <td>rw</td>
                    <td>0</td>
                    <td>0</td>
                </tr>
            </tbody>
        </table>
        </code>
        <p>Como o Gnome utiliza o D-BUS, ative o servi√ßo com o comando abaixo:</p>
        <code>sysrc dbus_enable="YES"</code>
        <p>Por padr√£o o Gnome utiliza um Display Manager pr√≥prio (GDM), para habilitar o GDM use o comando abaixo:</p>
        <code>sysrc gdm_enable="YES"</code>
        <p>Caso queira iniciar a interface manualmente com o comando <em>startx</em> voc√™ pode adicionar o argumento como no exemplo abaixo no arquivo <em>.xinitrc</em>:</p>
        <code>echo "exec gnome-session" > ~/.xinitrc</code>
        <!-- XFCE -->
        <h4>Para instala√ß√£o do XFCE</h4>
        <p>Para instalar o ambiente gr√°fico XFCE e suas aplica√ß√µes use o comando:</p>
        <code>pkg install xfce</code>
        <p>O XFCE requer que o <em>/proc</em> esteja montado, adicione a segunda linha seguindo o exemplo abaixo em <em>/etc/fstab</em> para montagem autom√°tica:</p>
        <code>
            <table>
                <thead>
                    <tr>
                        <th># Device&ensp;<br></th>
                        <th>Mountpoint&ensp;</th>
                        <th>FStype&ensp;</th>
                        <th>Options&ensp;</th>
                        <th>Dump&ensp;</th>
                        <th>Pass#</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>proc</td>
                        <td>/proc</td>
                        <td>procfs</td>
                        <td>rw</td>
                        <td>0</td>
                        <td>0</td>
                    </tr>
                </tbody>
            </table>
        </code>
        <p>Como o XFCE utiliza o D-BUS, ative o servi√ßo com o comando abaixo:</p>
        <code>sysrc dbus_enable="YES"</code>
        <p>Para ser inicializado o XFCE por padr√£o utiliza o LightDM, instale o LightDM com o comando abaixo:</p>
        <code>pkg install lightdm lightdm-gtk-greeter lightdm-gtk-greeter-settings</code>
        <p>E habilite o servi√ßo com o comando abaixo:</p>
        <code>sysrc lightdm_enable="YES"</code>
        <p>Caso queira iniciar a interface manualmente com o comando <em>startx</em> voc√™ pode adicionar o argumento como no exemplo abaixo no arquivo <em>.xinitrc</em>:</p>
        <code>echo '. /usr/local/etc/xdg/xfce4/xinitrc' > ~/.xinitrc</code>
        <!-- MATE -->
        <h4>Para instala√ß√£o do MATE</h4>
        <p>Para instalar o ambiente gr√°fico MATE e suas aplica√ß√µes use o comando:</p>
        <code>pkg install mate</code>
        <p>Se prefere uma instala√ß√£o m√≠nima utilize o comando abaixo:</p>
        <code>pkg install mate-base</code>
        <p>O MATE requer que o <em>/proc</em> esteja montado, adicione a segunda linha seguindo o exemplo abaixo em <em>/etc/fstab</em> para montagem autom√°tica:</p>
        <code>
            <table>
                <thead>
                    <tr>
                        <th># Device&ensp;<br></th>
                        <th>Mountpoint&ensp;</th>
                        <th>FStype&ensp;</th>
                        <th>Options&ensp;</th>
                        <th>Dump&ensp;</th>
                        <th>Pass#</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>proc</td>
                        <td>/proc</td>
                        <td>procfs</td>
                        <td>rw</td>
                        <td>0</td>
                        <td>0</td>
                    </tr>
                </tbody>
            </table>    
        </code>
        <p>Como o MATE utiliza o D-BUS, ative o servi√ßo com o comando abaixo:</p>
        <code>sysrc dbus_enable="YES"</code>
        <p>Para ser inicializado o MATE por padr√£o utiliza o LightDM, instale o LightDM com o comando abaixo:</p>
        <code>pkg install lightdm lightdm-gtk-greeter lightdm-gtk-greeter-settings</code>
        <p>E habilite o servi√ßo com o comando abaixo:</p>
        <code>sysrc lightdm_enable="YES"</code>
        <p>Caso queira iniciar a interface manualmente com o comando <em>startx</em> voc√™ pode adicionar o argumento como no exemplo abaixo no arquivo <em>.xinitrc</em>:</p>
        <code>echo "exec dbus-launch --exit-with-x11 ck-launch-session mate-session" > ~/.xinitrc</code>
        <!-- Cinnamon -->
        <h4>Para instala√ß√£o do Cinnamon</h4>
        <p>Para instalar o ambiente gr√°fico Cinnamon e suas aplica√ß√µes use o comando:</p>
        <code>pkg install cinnamon</code>
        <p>O Cinnamon requer que o <em>/proc</em> esteja montado, adicione a segunda linha seguindo o exemplo abaixo em <em>/etc/fstab</em> para montagem autom√°tica:</p>
        <code>
            <table>
                <thead>
                    <tr>
                        <th># Device&ensp;<br></th>
                        <th>Mountpoint&ensp;</th>
                        <th>FStype&ensp;</th>
                        <th>Options&ensp;</th>
                        <th>Dump&ensp;</th>
                        <th>Pass#</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>proc</td>
                        <td>/proc</td>
                        <td>procfs</td>
                        <td>rw</td>
                        <td>0</td>
                        <td>0</td>
                    </tr>
                </tbody>
            </table>
        </code>
        <p>Como o Cinnamon utiliza o D-BUS, ative o servi√ßo com o comando abaixo:</p>
        <code>sysrc dbus_enable="YES"</code>
        <p>Para ser inicializado o Cinnamon por padr√£o utiliza o LightDM, instale o LightDM com o comando abaixo:</p>
        <code>pkg install lightdm lightdm-gtk-greeter lightdm-gtk-greeter-settings</code>
        <p>E habilite o servi√ßo com o comando abaixo:</p>
        <code>sysrc lightdm_enable="YES"</code>
        <p>Caso queira iniciar a interface manualmente com o comando <em>startx</em> voc√™ pode adicionar o argumento como no exemplo abaixo no arquivo <em>.xinitrc</em>:</p>
        <code>echo "exec dbus-launch --exit-with-x11 ck-launch-session cinnamon-session" > ~/.xinitrc</code>
        <!-- LXQT -->
        <h4>Para instala√ß√£o do LXQT</h4>
        <p>Para instalar o ambiente gr√°fico LXQT e suas aplica√ß√µes use o comando:</p>
        <code>pkg install lxqt</code>
        <p>O LXQT requer que o <em>/proc</em> esteja montado, adicione a segunda linha seguindo o exemplo abaixo em <em>/etc/fstab</em> para montagem autom√°tica:</p>
        <code>
        <table>
            <thead>
                <tr>
                    <th># Device&ensp;<br></th>
                    <th>Mountpoint&ensp;</th>
                    <th>FStype&ensp;</th>
                    <th>Options&ensp;</th>
                    <th>Dump&ensp;</th>
                    <th>Pass#</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>proc</td>
                    <td>/proc</td>
                    <td>procfs</td>
                    <td>rw</td>
                    <td>0</td>
                    <td>0</td>
                </tr>
            </tbody>
        </table>
        </code>
        <p>Como o LXQT utiliza o D-BUS, ative o servi√ßo com o comando abaixo:</p>
        <code>sysrc dbus_enable="YES"</code>
        <p>Para ser inicializado o LXQT por padr√£o utiliza o SDDM, instale o SDDM com o comando abaixo:</p>
        <code>pkg install sddm</code>
        <p>E habilite o servi√ßo com o comando abaixo:</p>
        <code>sysrc sddm_enable="YES"</code>
        <p>Sete as op√ß√µes de localiza√ß√£o do SDDM com o comando abaixo:</p>
        <code>sysrc sddm_lang="pt_BR"</code>
        <p>Caso queira iniciar a interface manualmente com o comando <em>startx</em> voc√™ pode adicionar o argumento como no exemplo abaixo no arquivo <em>.xinitrc</em>:</p>
        <code>echo "exec dbus-launch --exit-with-x11 ck-launch-session startlxqt" > ~/.xinitrc</code>
        <!-- FIM DA INSTALA√á√ÉO DE AMBIENTES GR√ÅFICOS -->
        
        <!-- SLIM (DEPRECIADO)
        <p>Caso queira utilizar o Slim como display manager:</p>
        <code>pkg install slim</code>
        <code>slim_enable="YES"</code>
        <p>Caso queira mudar o tema do slim insira a pasta do tema em <mark>/usr/local/share/slim/themes/</mark> e altere a op√ß√£o <mark>current theme</mark> no arquivo <mark>/usr/local/etc/slim.conf</mark>.</p>
        -->

        <h3>Corrigindo diret√≥rios</h3>
        <p>Algumas interfaces ao serem instaladas n√£o criam automaticamente a estrutura para as pastas de usu√°rio (Imagens, M√∫sicas, V√≠deos etc), para resolver isso instale o pacote <em>xdg-user-dirs</em> com o comando abaixo:</p>
        <code>pkg install xdg-user-dirs</code>
        <p>Logado como o seu usu√°rio, use o comando abaixo para atualizar os diret√≥rios:</p>
        <code>xdg-user-dirs-update</code>
        <h3>Configurando montagem autom√°tica de sistemas de arquivo</h3>
        <p>O FreeBSD preserva ferrenhamente os seus trejeitos do velho Unix, ainda se comporta como um sistema voltado para o ambiente de servidores... En√£o se voc√™ quiser utiliz√°-lo para desktop √© necess√°rio configurar um script para montagem de dispositivos pois ele n√£o vai fazer isso automaticamente para voc√™.</p>
        <p>O primeiro passo √© instalar o suporte aos sistemas de arquivo desejados e o programa <em>automount</em>, para isso voc√™ pode instalar os pacotes:</p>
        <ul>
            <li><p><mark>fusefs-exfat</mark> Para suporte para formatos FAT</p></li>
            <li><p><mark>fusefs-ntfs</mark> Para suporte para NTFS</p></li>
            <li><p><mark>fusefs-ext2</mark> Para suporte para EXT</p></li>
            <li><p><mark>fusefs-hfsfuse</mark> Para suporte para HFS</p></li>
            <li><p><mark>fusefs-jmtpfs</mark> Para suporte para MTP</p></li>
        </ul>
        <p>Nesse caso vamos supor que quero utilizar um pendrive em NTFS, o comando para instala√ß√£o seria:</p>
        <code>pkg install automount fusefs-ntfs</code>
        <p>Agora temos que setar a configura√ß√£o do automount que est√° em <mark>/usr/local/etc/automount.conf</mark>:</p>
        <code>USERUMOUNT=YES<br>ATIME=NO<br>FM="<em>comando para chamar o seu file manager</em>"<br>USER=<em>seu username</em><br>ENCODING=pt_BR.UTF-8<br>CODEPAGE=850</code>
        <p>* Este <em>CODEPAGE=850</em> est√° baseado no valor padr√£o do <em>mkfs.fat</em></p>
        <p>Agora vamos editar o <mark>/etc/sysctl.conf</mark> para possibilitar que os usu√°rios do grupo operator possam montar sistemas de arquivo, para isso inclua a linha abaixo:</p>
        <code>vfs.usermount=1</code>
        <p>Agora vamos carregar o m√≥dulo <em>FUSE</em> durante o boot, para isso acesse o arquivo <mark>/boot/loader.conf</mark> e adicione a linha:</p>
        <code>fusefs_load="YES"</code>
        <p>Para carregar o servi√ßo edite o arquivo <mark>/etc/rc.conf</mark> e adicione a linha:</p>
        <code>fuse_enable="YES"</code>

        <h3>Corrigindo Som</h3>
        <p>Ao utilizar ambientes gr√°ficos completos no FreeBSD √© bem provavel que ocasionalmente voc√™ enfrente alguma esp√©cide de problema com rela√ß√£o a desligamento de dispositivos, perda de sincronia e por a√≠ vai. Para resolver esses problemas o interessante √© que voc√™ entenda um pouco das alternativas "por baixo do cap√¥" para resolver o seu problema de uma vez por todas.</p>
        <h4>Problema n√∫mero 1: Erro na escolha de dispositivo padr√£o</h4>
        <p>Para verificar os dispositivos de √°udio execute o comando:</p>
        <code>cat /dev/sndstat</code>
        <p>Vai retornar uma lista mais ou menos assim:</p>
<code><pre>
    Installed devices:
    pcm0: NVIDIA (0x0000) (HDMI/DP 8ch) (play) default
    pcm1: NVIDIA (0x0000) (HDMI/DP 8ch) (play)
    pcm2: Realtek ALC887 (Rear Analog) (play/rec)
    pcm3: Realtek ALC887 (Front Analog) (play/rec)
    No devices installed from userspace.    
</pre></code>
        <p>Perceba que o dispositivo indicado como padr√£o √© o <em>pcm0</em>, vamos supor que o desejado seja a sa√≠da traseira do <em>pcm2</em>, para setar o dispositivo padr√£o utilize o comando sysctl <mark>hw.snd.default_unit=</mark><em>"n√∫mero da unidade"</em> como no c√≥digo abaixo:</p>
        <code>sysctl hw.snd.default_unit=2</code>
        <h4>Problema n√∫mero 2: Retorno do microfone</h4>
        <p>Ent√£o voc√™ instalou o sistema e est√° se ouvindo? Este √© um problema bastante comum por√©m bem f√°cil de resolver, geralmente o canal <em>mix</em> est√° fica ativo por padr√£o, existe um utilit√°rio chamado <em>mixer</em> (que original... üôÑ) para resolver esse tipo de coisa no FreeBSD, utilize o comando:</p>
        <code>mixer</code>
        <p>E voc√™ vai ter um retorno mais ou menos assim:</p>
<pre><code>
    pcm2:mixer: Realtek ALC887 (Rear Analog) on hdaa1  (play/rec) (default)
    vol       = 1.00:1.00     pbk
    pcm       = 1.00:1.00     pbk
    speaker   = 1.00:1.00     rec
    line      = 1.00:1.00     rec
    mic       = 1.00:1.00     rec src
    mix       = 1.00:1.00     rec
    rec       = 1.00:1.00     pbk
    igain     = 1.00:1.00     pbk
    ogain     = 1.00:1.00     pbk
</code></pre>
        <p>No caso acima √© poss√≠vel verificar que o canal <em>mix</em> est√° no m√°ximo (<em>1.00:1.00</em>), para alterar qualquer canal basta utilizar o comando <mark>mixer</mark> <em>conex√£o</em> <mark>.volume=</mark><em>"valor do volume"</em>, se for pra setar o <em>mix</em> para <em>0</em> basta utilizar o comando:</p>
        <code>mixer mix.volume=0</code>
        <h4>Adendo: Op√ß√µes gr√°ficas</h4>
        <p>Caso voc√™ n√£o queira utilizar o terminal para fazer essas altera√ß√µes sempre que poss√≠vel voc√™ pode usar aplica√ß√µes como <em>audio/dsbmixer</em> (baseado em QT) ou <em>audio/gtk-mixer</em> (baseado em GTK).</p>
        
        <!-- EDI√á√ÉO DO XINITRC (OBSOLETO) 
        <h3>Edi√ß√£o do arquivo .XINITRC</h3>
        <p>Caso ainda esteja logado como root, deslogue utilizando o comando:</p>
        <code>exit</code>
        <p>e logue na sua conta de usu√°rio comum. Assim que tiver na sua conta pessoal, utilize o <mark>nano</mark> para configurar o arquivo <mark>.xinitrc</mark> com o comando:</p>
        <code>nano ~/.xinitrc</code>
        <p>Acrescente as linhas abaixo para setar as op√ß√µes de localiza√ß√£o do usu√°rio:</p>
        <code>export LC_ALL=pt_BR.UTF-8<br>export MM_CHARSET=UTF-8<br>export LANG=pt_BR.UTF-8<br>export LANGUAGE=pt_BR.UTF-8<br>setxkbmap -model abnt2 -layout br</code>
        -->

        <!-- NAVEGADOR E SU√çTE OFFICE -->
        <h3>Navegador e Su√≠te office</h3>
        <p>Se voc√™ vai usar o FreeBSD como sistema Desktop, navegador e su√≠te office s√£o essenciais! Para instalar o Firefox e o LibreOffice (com suporte a Portugu√™s do Brasil) basta usar o comando:</p>
        <code>pkg install firefox-esr libreoffice pt_BR-libreoffice</code>
        <p>Para alterar o idioma da interface no LibreOffice v√° em Ferramentas -> Op√ß√µes -> Configura√ß√µes de idioma -> Idiomas. Selecione ‚ÄúPortugu√™s (Brasil)‚Äù na caixa de lista ‚ÄúInterface do usu√°rio‚Äù e clique em OK. Reinicie o LibreOffice para que as altera√ß√µes tenham efeito</p>
        <p>Para alterar o idioma da interface do Firefox acesse o menu e selecione Configura√ß√µes -> Geral -> Idioma -> Definir alternativa e caso Portugu√™s (BR) n√£o esteja na lista clique em "Selecione um idioma para adicionar", escolha Portugu√™s (BR), coloque ele como o primeiro da lista e reinicie o Firefox para que as altera√ß√µes tenham efeito.</p>
        <!-- SWAPFILE -->
        <h3>Cria√ß√£o de swapfile</h3>
        <p>O FreeBSD utiliza a mem√≥ria swap de uma forma bem diferente do Linux, e essa diferen√ßa vai desde volume utilizado at√© efici√™ncia e pol√≠ticas de uso de mem√≥ria virtual, de qualquer forma a mem√≥ria swap √© sim interessante de se ter. Se voc√™ fez a instala√ß√£o sem reservar espa√ßo para a swap voc√™ pode assim como no Linux criar um swapfile, a primeira coisa que precisa ser feita √© a cria√ß√£o do arquivo de swap em si utilizando o <em>dd</em>, supondo que iremos criar no diret√≥rio <em>/</em> um arquivo com o nome <em>swapfile</em> de 8GB em blocos de <em>1MB</em> a contagem informada ser√° <em>8192</em>, mas fique a vontade para as configura√ß√µes conforme o necess√°rio para o seu caso.</p>
        <code>doas dd if=/dev/zero of=<em>/swapfile</em> bs=1M count=<em>8192</em> status=progress</code>
        <p>Uma vez que o arquivo esteja criado precisamos setar as permiss√µes corretas, para isso utilize o comando <em>chmod</em>:</p>
        <code>chmod 0600 /swapfile</code>
        <p>Agora precisamos referenciar o swapfile em <em>/etc/fstab</em>, para isso insira a linha:</p>
        <code>
            <table>
                <thead>
                    <tr>
                        <th># Device&ensp;<br></th>
                        <th>Mountpoint&ensp;</th>
                        <th>FStype&ensp;</th>
                        <th>Options&ensp;</th>
                        <th>Dump&ensp;</th>
                        <th>Pass#</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>md99</td>
                        <td>none</td>
                        <td>swap</td>
                        <td>sw,file=/swapfile,late</td>
                        <td>0</td>
                        <td>0</td>
                    </tr>
                </tbody>
            </table>
        </code>
        <p>Para adicionar dispositivos de swap que est√£o declarados no <em>/etc/fstab</em> ao sistema utilize o comando:</p>
        <code>swapon -aq</code>
        <p>Caso queira verificar o estado da swap utilize o comando:</p>
        <code>swapinfo</code>
        <!-- SILENT BOOT -->
        <h3>Silent Boot</h3>
        <p>Diferente do Linux que para conseguir um boot silencioso basta um argumento para o kernel, no FreeBSD n√£o h√° uma op√ß√£o isolada.</p>
        <p>Para substituir as mensagens de inicializa√ß√£o do bootloader pelo logo do FreeBSD adicione a linha abaixo em <mark>/boot/loader.conf</mark>:</p>
        <code>boot_mute="YES</code>
        <p>Para desativar o menu do bootloader do FreeBSD adicione a alinha abaixo em <mark>/boot/loader.conf</mark>:</p>
        <code>beastie_disable="YES"</code>
        <p>Silenciando script de inicializa√ß√£o redirecionando as sa√≠das para <em>/dev/null</em>:</p>
        <code>sed -i ‚Äù ‚Äòs/run_rc_script ${_rc_elem} ${_boot}/run_rc_script ${_rc_elem} ${_boot} > \/dev\/null/g‚Äô /etc/rc</code>
        <p>Para silenciar as mensagens de inicializa√ß√£o de servi√ßos adicione a linha abaixo em <mark>/etc/rc.conf</mark>:</p>
        <code>rc_startmsgs="NO"</code>
        <p>Para fazer com que o <em>DHCPD</em> opere em segundo plano adicione a linha abaixo no <mark>/etc/rc.conf</mark>:</p>
        <code>background_dhclient="YES"</code>
        <h3>Ambiente gr√°fico devidamente instalado!</h3>
        <p>Se voc√™ fez tudo certo basta utilizar o comando abaixo para reiniciar a m√°quina e j√° iniciar no seu gerenciador de exibi√ß√£o, e poder logar e utilizar o seu FreeBSD com ambiente gr√°fico.</p>
        <code>shutdown -r now</code>
        <img class="responsiva" src="../assets/images/install/freebsd/freebsdmate.jpg" alt="">
        <h3>Mas ainda √© s√≥ o come√ßo...</h3>
        <p>Existem diversas altera√ß√µes que ainda podem ser feitas no sistema para melhorar a sua experi√™ncia, da instala√ß√£o dos drivers de v√≠deo (<mark>drm-kmod</mark>) at√© a otimiza√ß√µes nos arquivos <mark>/etc/profile</mark>, <mark>/etc/login.conf</mark>, <mark>/etc/fstab</mark>, <mark>/boot/loader.conf</mark>, <mark>/etc/sysctl.conf</mark>, <mark>/etc/rc.conf</mark>.</p>
        <p>Aos poucos postarei mais informa√ß√µes e otimiza√ß√µes, por√©m, com uma interface gr√°fica, com conhecimento do <mark>pkg install</mark> para instalar os aplicativos e sabendo alterar os arquivos do sistema por meio do <mark>nano</mark> voc√™ j√° tem mais do que o suficiente para come√ßar bem no FreeBSD üòâ</p>
        <h2>Caso queira continuar...</h2>
        <!-- IMPRESS√ÉO NO FREEBSD -->
        <h3>Impress√£o no FreeBSD</h3>
        <p>De come√ßo aqui vai um alerta: Impress√£o no FreeBSD √© perfeita DESDE QUE voc√™ consiga encontrar o driver correto para a sua impressora, do cont≈ïario as coisas tendem a ser bastante problem√°ticas (Sim! Ainda que seja impress√£o por rede!).</p>
        <p>Supondo que voc√™ deu sorte de ter uma impressora com suporte n√£o √© t√£o complicado assim, basta ter o <em>CUPS</em> instalado e habilitado, o <em>LPD</em> e adicionar a impressoa nas configura√ß√µes do CUPS. Instale o cups com o comando:</p>
        <code>pkg install cups</code>
        <p>Agora precisamos configurar o servidor de impress√£o do CUPS, acesse o diret√≥rio <mark>/etc/devfs.rules</mark>:</p>
        <code>nano /etc/devfs.rules</code>
        <p>E adicione as linhas abaixo:</p>
<code><pre>
[system=10]
add path 'unlpt*' mode 0660 group cups
add path 'ulpt*' mode 0660 group cups
add path 'lpt*' mode 0660 group cups
add path 'usb/X.Y.Z' mode 0660 group cups
</pre></code>
        <p>Agora precisamos habilitar alguns servi√ßos na inicializa√ß√£o editando o <mark>/etc/rc.conf</mark> com o comando abaixo:</p>
        <code>nano /etc/rc.conf</code>
        <p>E adicione as linhas:</p>
        <code>cupsd_enable="YES"<br>devfs_system_ruleset="system"<br>lpd_enable="YES"</code>
        <p>Os servi√ßos ser√£o iniciados durante o boot, voc√™ tamb√©m pode inici√°-los manualmente com os comandos de servi√ßo como <em>service lpd start</em>, <em>service cupsd start</em> e <em>service devfs restart</em> mas <strong>o recomendado √© que voc√™ reinicie o seu sistema</strong> e ent√£o verifique se os servi√ßos subiram corretamente com o comando:</p>
        <!--
        <code>service lpd start<br>service cupsd start<br>service devfs restart</code>
        -->
        <code>service lpd status<br>service cupsd status</code>
        <p>Se os servi√ßos subiram sem nenhum problema voc√™ pode acessar a p√°gina local do CUPS com qualquer navegador acessando o endere√ßo, mas antes precisamos ter o driver da impressora em m√£os, para isso voc√™ tem 2 alternativas:</p>
        <p>Instalar o pacote <em>gutenprint</em> v√°lido para diversos modelos de impressoras:</p>
        <code>pkg install gutenprint</code>
        <p><strong>OU</strong></p>
        <p>Baixar o arquivo <em>PPD</em> no site do fabricante da sua impressora ou busc√°-lo no <em>OpenPrinting</em> no link:</p>
        <code>https://www.openprinting.org/download/PPD/</code>
        <p>Uma vez que voc√™ tem o driver necess√°rio, basta seguir para o link do CUPS em:</p>
        <code>http://localhost:631/</code>
        <p>Na p√°gina do CUPS basta acessar a guia <mark>Administra√ß√£o</mark>, insira o usu√°rio e senha do administrador.</p>
        <p>Voc√™ pode selecionar <em>Encontrar novas impressoras</em> (para impressoras na sua rede local) ou <em>Adicionar impressora</em>, e por fim selecionar o modelo e driver da sua impressora.</p>
        <h2>Aqui v√£o algumas altera√ß√µes recomendadas:</h2>
        <h3>No arquivo /etc/rc.conf</h3>
        <!-- OBSOLETO E DESNECESS√ÅRIO
        <h4>Para desabilitar completamente o Sendmail:</h4>
        <code>sendmail_enable="NO"</code> 
        <p>(ao inv√©s do depreciado <mark>sendmail_enable="NONE"</mark>)</p>
        <code>sendmail_submit_enable="NO"</code>
        <code>sendmail_outbound_enable="NO"</code>
        <code>sendmail_msp_queue_enable="NO"</code>
        <h4>Para habilitar a sincroniza√ß√£o de hor√°rio no boot:</h4>
        <code>ntpd_sync_on_start="YES"</code>
        <p>(adicione ap√≥s <mark>ntpd_enable="YES"</mark>)</p>
        -->
        <h3>No arquivo /boot/loader.conf</h3>
        <h4>Carregando sensor de temperatura do processador</h4>
        <p>Para carregar o m√≥dulo automaticamente durante o boot para processadores <em>Intel</em> adicione a linha:</p>
        <code>coretemp_load="YES"</code>
        <p>Caso voc√™ tenha um processador <em>AMD</em> adicione a linha:</p>
        <code>amdtemp_load="YES"</code>
        <!-- OBSOLETO E DESNECESS√ÅRIO
        <h4>Para habilitar o novo virtual console:</h4>
        <code>kern.vty="vt"</code>
        -->
        <h4>Para reduzir o tempo do prompt de autoboot para 3 segundos adicione a linha:</h4>
        <code>autoboot_delay="3"</code>
        <h4>Se voc√™ especificar a resolu√ß√£o m√°xima desejada para o console do framebuffer EFI adicione a linha:</h4>
        <code>efi_max_resolution=1920x1080</code>
        <p>Observa√ß√£o: Podem ser usados os valores <mark>480p</mark>, <mark>720p</mark>, <mark>1080p</mark>, <mark>2160p</mark>, <mark>4k</mark>, <mark>5k</mark> ou um valor customizado de <em>largura<mark>x</mark>altura</em>.</p>
        <h4>Para alterar o tamanho da fonte no menu UEFI</h4>
        <p><strong>Opcional:</strong> Caso voc√™ tenha problemas para utilizar o menu do bootloader UEFI devido ao tamanho da fonte voc√™ pode configurar de forma persistente determinando o tamanho com o c√≥digos abaixo de baixo:</p>
        <code>screen.font="14x28"</code>
        <p>Caso queira ver as fontes dispon√≠veis basta usar o comando:</p>
        <code>ls -1 /boot/fonts</code>
        <!--
        <h4>Mudar o ntpd para o openntpd:</h4>
        <code>pkg install openntpd</code>
        <p>edite o <mark>ntpd.conf</mark>:</p>
        <code>nano /usr/local/etc/ntpd.conf</code>
        <p>edite para o seguinte conte√∫do:</p>
        <code>servers pool.ntp.br</code>
        <p>No <mark>rc.conf</mark>, edite a linha:</p>
        <code>ntpd_enable="YES"</code>
        <p>para:</p>
        <code>ntpd_enable="NO"</code>
        <p>e logo abaixo insira a linha:</p>
        <code>openntpd_enable="YES"</code>
        -->

        <!--
        <h3>Configura√ß√£o padr√£o de localiza√ß√£o e entrada para todos os usu√°rios</h3>
        <p>o <mark>LANG=xx.YY.ZZZZ</mark> muda as vari√°veis de ambiente para o c√≥digo de linguagem <mark>xx</mark>, o c√≥digo de pa√≠s <mark>YY</mark> e codifica√ß√£o de caracteres <mark>ZZZZ</mark>.</p>
        <p>O idioma e o c√≥digo do pa√≠s afetam o idioma padr√£o das aplica√ß√µes, formata√ß√£o de n√∫meros, formata√ß√£o de data e hora, agrupamento de <i>strings</i>, configura√ß√µes de moeda e entre outras coisas.</p>
        <p>Ao alterar o locale usando a codifica√ß√£o de caracteres UTF-8, o sistema pode entender e exibir cada um dos 1112064 caracteres no conjunto de caracteres Unicode, ao inv√©s de apenas US ASCII como √© o padr√£o com LANG=C.</p>
        <p>Edite o banco de dados da classe de login em <mark>/etc/login.conf</mark> para adicionar um conjunto de caracteres e localidade padr√£o. Os shells de login herdar√£o as vari√°veis ‚Äã‚Äãde ambiente definidas aqui na classe padr√£o ou em uma classe mais restrita, se corresponder a uma.</p>
        <p>altere de:</p>
        <code>:charset=UTF-8:\</code>
        <code>:lang=en_US.UTF-8:</code>
        <p>para:</p>
        <code>:charset=UTF-8:\</code>
        <code>:lang=pt_BR.UTF-8:</code>
        <p>Ap√≥s fazer as altera√ß√µes reconstrua o banco de dados de login com</p>
        <code>cap_mkdb /etc/login.conf</code>
        <p>Voc√™ pode ter que especificar a nova localidade em outro lugar (como <mark>/etc/profile</mark>) para usos de shell sem login, como GDM e outros gerenciadores de login.</p>
        <p>em </mark>/etc/profile</mark> adicione as linhas:</p>
        <code>LANG=pt_BR.UTF-8;   export LANG</code>
        <code>CHARSET=UTF-8;  export CHARSET</code>
        <p>Para verificar a localiza√ß√£o execute no seu pr√≥ximo login o comando:</p>
        <code>locale</code>
        <p>Se o seu <mark>LC_ALL=</mark> n√£o conter nenhuma especifica√ß√£o n√£o se preocupe, <mark>LC_ALL</mark> s√≥ deve ser definido se voc√™ deseja (for√ßosamente) anular qualquer e todas as outras configura√ß√µes <mark>LC_*</mark>.</p>
        <p>isso retira a necessidade das linhas...</p>
        <code>export LC_ALL=pt_BR.UTF-8</code>
        <code>export LANGUAGE=pt_BR.UTF-8</code>
        <code>export LANG=pt_BR.UTF-8</code>
        <p>serem adicionadas em todo o <mark>~/.xinitrc</mark> de um novo usu√°rio criado no sistema.</p>
        <p>Se voc√™ criar um padr√£o de configura√ß√£o para ser herdado por todos os usu√°rios voc√™ pode criar um arquivo <mark>.xinitrc</mark> em <mark>/usr/share/skel</mark> e quando criar o usu√°rio o sistema copiar√° esse mesmo arquivo de configura√ß√£o para o <mark>/home</mark> do usu√°rio</p>
        -->
        <!-- PACKET FILTER -->
        <h2>PF Firewall</h2>
        <p>O FreeBSD tem alguns servi√ßos que podem ser usados para melhorar a seguran√ßa, entre eles o maravilho <em>PF Firewall</em>, este n√£o √© exatamente a mesma tecnologia do OpenBSD mas √© quase t√£o boa quanto. Antes de mais nada precisamos criar um conjunto de regras no diret√≥rio <mark>/etc/pf.conf</mark>. Tanto a documenta√ß√£o do FreeBSD quanto a DigitalOcean tem boas documenta√ß√µes iniciais para isso, mas eu vou dar um exemplo (bem quebrado) de ruleset misturando ambas... Pois eu sou desses üòâ.</p>
        <code># Declara√ß√£o de macros<br># ssh_ip = "{ 192.168.1.100 }"<br>tcp_out = "{ 22, 53, 80, 443 }"<br>udp_out = "{ 53, 68, 123 }"<br># Ruleset<br>set skip on lo0    # ignorar loopback<br>block all          # bloquear por padr√£o<br>pass out proto tcp to port $tcp_out    # permitir sa√≠da SSH, DNS, HTTP<br>pass out proto udp to port $udp_out    # permitir sa√≠da DNS, NTP, HTTPS<br>pass out inet proto icmp icmp-type { echoreq }    # permitir requisi√ß√£o de ECHO<br># Habilitar SSH<br># pass in quick proto tcp from $ssh_ip to port 22 flags S/SA keep state<br></code>
        <p>Pelo amor de tudo que h√° de sagrado n√£o v√° utilizar isso em linha de produ√ß√£o! Isso √© apenas um (p√©ssimo) exemplo!</p>
        <p>Agora precisamos ativar o firewall, acesse <mark>/etc/rc.conf</mark> e adicione as linhas:</p>
        <code>pf_enable="YES"<br>pflog_enable="YES"</code>
        <p>Com ambos servi√ßos habilitados no boot, reinicie a m√°quina e carregue o arquivo de regras com o comando abaixo:</p>
        <code>pfctl -f /etc/pf.conf</code>
        <p>Se n√£o apareceu nenhum erro ent√£o j√° est√° funcional. Eu recomendo fortemente que voc√™ procure regras para o seu caso espec√≠fico pois nesse ruleset basicamente n√£o h√° muito suporte ou seguran√ßa, isso √© apenas um exemplo de argumentos para que voc√™ possa iniciar a sua configura√ß√£o.</p>
        <!-- RECUPERA√á√ÉO DO BOOT -->
        <h2>Coloquei alguma configura√ß√£o errada e agora o pc n√£o inicia mais... O que fazer?</h2>
        <p>Selecione o op√ß√£o <mark>single user</mark> durante o boot, logue como root e para poder editar os arquivos utilize os comandos:</p>
        <code>fsck -y</code>
        <code>mount -u /</code>
        <code>mount -a -t ufs</code>
        <p>Se e somente se voc√™ utiliza swap:</p>
        <code>swapon -a</code>
        <p>Pronto! agora voc√™ pode acessar e corrigir os erros nos arquivos de sistema e continuar de onde parou üòâ</p>
        <!-- INTRODU√á√ÉO COMPILA√á√ÉO DE PACOTES -->
        <h2>Compila√ß√£o de pacotes com o <i>Poudriere</i> e <i>Synth</i></h2>
        <p>Como disse no come√ßo da p√°gina, a configura√ß√£o dos pacotes do FreeBSD pode n√£o ser muito amig√°vel para usu√°rios finais esse √© um dos motivos que levam os usu√°rios do FreeBSD a utilizar <i>helpers</i> para compila√ß√£o dos pacotes em bloco. Existem diversas formas de fazer isso mas nessa documenta√ß√£o trataremos de duas ferramentas: <em>Poudriere</em> e <em>Synth</em>.</p>
        <p>Ambos s√£o extremamente configur√°veis, por√©m eles tem objetivos diferentes e usam tecnolgias diferentes, grosso modo, o Poudriere √© mais voltado para ambiente <i>business class</i> enquanto o Synth tem uma experi√™ncia mais simplificada para o usu√°rio final, via de regra o Synth √© mais r√°pido enquanto o Poudriere tem muito menos depend√™ncias.</p>
        <!-- TMPFS -->
        <h3>TMPFS (passo opcional)</h3>
        <p>O driver TMPFS basicamente gera um sistemas de arquivo in-memory que pode acelerar de sobremaneira o processo de compila√ß√£o, para carregar o driver durante a inicializa√ß√£o voc√™ deve adicionar a linha abaixo em <mark>/boot/loader.conf</mark>:</p>
        <code>tmpfs_load="YES"</code>
        <p>Uma vez que o driver est√° configurado para ser carregado, √© necess√°rio editar o arquivo <mark>/etc/fstab</mark> e adicionar a linha abaixo conforme o diagrama:</p>
        <code>
            <table>
                <thead>
                    <tr>
                        <th># Device&ensp;<br></th>
                        <th>Mountpoint&ensp;</th>
                        <th>FStype&ensp;</th>
                        <th>Options&ensp;</th>
                        <th>Dump&ensp;</th>
                        <th>Pass#</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>tmpfs</td>
                        <td>/tmp</td>
                        <td>tmpfs</td>
                        <td>rw<!--,mode=777--></td>
                        <td>0</td>
                        <td>0</td>
                    </tr>
                </tbody>
            </table>
        </code>
        <p>Voc√™ pode carregar o driver manualmente e remontar o <mark>/tmp</mark> mas <em>o recomendado √© que voc√™ reinicie a m√°quina para que as altera√ß√µes tenham efeito</em>.</p>
        <!--
        <code>umount /tmp</code>
        <code>mount /tmp</code>
        -->
        <!-- INSTALA√á√ÉO CCACHE -->
        <h3>CCache (passo opcional)</h3>
        <p>O cache de compila√ß√£o pode aumentar a velocidade de compila√ß√£o dos pacotes, √© uma tecnolgia interessante que ambos helpers podem utilizar, caso queira instalar o Ccache via pkg use o comando:</p>
        <code>pkg install ccache</code>
        <p><strong>Ou</strong>...</p>
        <p>Caso queira compilar o pacote, pode fazer isso com o comando abaixo:</p>
        <code>cd /usr/ports/devel/ccache<br>make install clean</code>
        <p>Agora precisamos criar uma pasta para o Ccache, por conveni√™ncia vamos criar em <mark>/var/cache/ccache</mark>, para criar esse diret√≥rio use o comando:</p>
        <code>mkdir /var/cache/ccache</code>
        <p>Agora precisamos configurar o ccache para trabalhar com esse diret√≥rio, para isso utilize o comando:</p>
        <code>ccache --set-config=cache_dir=/var/cache/ccache</code>
        <p>Dependendo de quanto espa√ßo em disco voc√™ √© prov√°vel que deseje setar o tamanho m√°ximo do cache, vamos supor que eu deseje setar este valor para <em>20GB</em> (o valor m√°ximo padr√£o do Ccache √© de 5GB), nesse caso basta utilizar o comando:</p>
        <code>ccache --max-size=<em>20G</em></code>
        <!-- GERANDO CERTIFICADO E CHAVE -->
        <h3>Criando certificado e chave SSL</h3>
        <p>Existem diversas formas de gerar chaves e certificados, nessa documenta√ß√£o faremos de uma forma simples apenas para gerar o certificado da p√°gina de informa√ß√µes e assinar os pacotes. Primeiramente criaremos os diret√≥rios necess√°rios, para isso utilize o comando:</p>
        <code>mkdir -p /usr/local/etc/ssl/{keys,certs}</code>
        <p>Agora podemos setar as devidas permiss√µes para que nenhum outro usu√°rio possa interagir com esse diret√≥rio:</p>
        <code>chmod 0600 /usr/local/etc/ssl/keys</code>
        <p>Vamos gerar uma chave de <em>4096</em> bit no diret√≥rio <em>/usr/local/etc/ssl/keys</em>:</p>
        <code>sudo openssl genrsa -out /usr/local/etc/ssl/keys/poudriere.key 4096</code>
        <p>E dessa chave geramos um certificado com:</p>
        <code>sudo openssl rsa -in /usr/local/etc/ssl/keys/poudriere.key -pubout -out /usr/local/etc/ssl/certs/poudriere.cert</code>
        <!-- INSTALA√á√ÉO POUDRIERE -->
        <h3>Instala√ß√£o do Poudriere</h3>
        <p>Se voc√™ escolheu utilizar o Poudriere ao inv√©s do Synth, instale via pkg com o comando:</p>
        <code>pkg install poudriere</code>
        <p><strong>Ou</strong>...</p>
        <p>Caso queira compilar o pacote, pode fazer isso com o comando abaixo:</p>
        <code>cd /usr/ports/ports-mgmt/poudriere<br>make install clean</code>
        <h3>Editando o arquivo de configura√ß√µes do Poudriere</h3>
        <p>O arquivo de configura√ß√µes do Poudriere pode ser encontrado em <mark>/usr/local/etc/poudriere.conf</mark>, voc√™ pode edit√°-lo com o seu editor de texto preferido, no meu caso utilizarei o nano como no comando abaixo:</p>
        <code>nano /usr/local/etc/poudriere.conf</code>
        <p>As configura√ß√µes padr√£o do Poudriere s√£o bem s√£s, por√©m algumas coisas s√£o interessantes de se alterar, por exemplo:</p>
        <ul>
            <li><p>Se voc√™ utilizar UFS ao inv√©s de ZFS, habilite a linha:</p><code>NO_ZFS=yes</code></li>
            <li><p>Se voc√™ utilizar ZFS ao inv√©s de UFS, desabilite a linha:</p><code>#NO_ZFS=yes</code><p>E especifique as op√ß√µes de pool e diret√≥rio como no exemplo a seguir:<br></p><code>ZPOOL=<em>nomedapool</em><br>ZROOTFS=/poudriere</code></li>
            <li><p>Por padr√£o o arquivo de configura√ß√£o aponta para um link inv√°lido, altera a linha:</p><code>FREEBSD_HOST=_PROTO_://_CHANGE_THIS_</code><p>Para:</p><code>FREEBSD_HOST=ftp://ftp.freebsd.org</code></li>
            <li><p>Caso voc√™ utilize ZFS habilite o argumento abaixo para que o diret√≥rio de dados na raiz da pasta do poudriere esta setado corretamente por desencargo de consci√™ncia:</p><code>POUDRIERE_DATA=${BASEFS}/data</code></li>
            <li><p>Verifique a linha em que o poudriere vai armazenar jails e ports:</p><code>BASEFS=/usr/local/poudriere</code><p>voc√™ pode redirecionar para outro lugar (n√£o recomendado) e caso o diret√≥rio n√£o existe crie o diret√≥rio com o comando: <code>mkdir /usr/local/poudriere</code> </p></li>
            <li><p>Se voc√™ desejar fazer uso do <em>TMPFS</em> habilite a linha:</p><code>USE_TMPFS=yes</code><p>Caso contr√°rio desabilite essa linha.</p></li>
            <li><p>Se voc√™ deseja que o poudriere para reconstrua os pacotes quando as op√ß√µes para ele forem alteradas habilite a linha:</p><code>CHECK_CHANGED_OPTIONS=verbose</code></li>
            <li><p>Se voc√™ deseja reconstruir pacotes quando as depend√™ncias foram alteradas desde a √∫ltima compila√ß√£o habilite a linha:</p><code>CHECK_CHANGED_DEPS=yes</code></li>
            <li><p>Se voc√™ deseja assinar os pacotes, habilite e informe o caminho da chave na linha:</p><code>PKG_REPO_SIGNING_KEY=<em>/usr/local/etc/ssl/keys/poudriere.key</em></code></li>
            <li><p>Se voc√™ desejar fazer uso do <em>Ccache</em> determine o diret√≥rio na linha:</p><code>CCACHE_DIR=<em>/var/cache/ccache</em></code><p>E logo a seguir insira a linha:</p><code>WITH_CCACHE_BUILD=yes</code></li>
            <li><p>Por padr√£o o Poudriere utiliza hw.ncpu para determinar o n√∫mero de jobs em paralelo, se voc√™ deseja setar um valor espec√≠fico altere a linha como no exemplo abaixo:</p><code>PARALLEL_JOBS=1</code></li>
            <li><p>Se voc√™ deseja desativar o suporte a Linux habilite a linha:</p><code>NOLINUX=yes</code></li>
            <li><p>Voc√™ pode definir a string com o nome de dom√≠nio ou endere√ßo IP onde seu servidor pode ser acessado:</p><code>URL_BASE=http://server_domain_or_IP/</code></li>
        </ul>
        <!-- CRIAR AMBIENTE DE COMPILA√á√ÉO -->
        <h3>Criar ambiente de compila√ß√£o</h3>
        <h4>Criando Jail</h4>
        <p>Como foi dito acima o poudriere utiliza um ambiente baseado em <em>jails</em> para <i>"buildar"</i> seus pacotes, ent√£o antes de mais nada precisamos criar a jail. No meu caso vou criar uma jail com o nome <em>FreeBSD_14-0_x64</em>, baseado na vers√£o <em>14.0-RELEASE</em> do FreeBSD e baseado na arquitetura <em>amd64</em>, ent√£o nesse caso o comando seria:</p>
        <code>poudriere jail -c -j <em>FreeBSD_14-0_x64</em> -v <em>14.0-RELEASE</em> -a <em>amd64</em></code>
        <p>O processo pode demorar um pouco, se em algum momento voc√™ desejar listar as jails criadas utilize o comando:</p>
        <code>poudriere jail -l</code>
        <h4>Criando √°rvore de ports</h4>
        <p>O poudriere precisa de uma √°rvore de ports para trabalhar, inclusive pode at√© mesmo trabalhar com diversas √°rvores, por hora vamos criar uma √°rvore com o nome <em>MAIN</em>:</p>
        <code>poudriere ports -c -p MAIN</code>
        <p>Caso deseje listar as √°rvores criadas utilize o comando:</p>
        <code>poudriere ports -l</code>
        <h4>Criando lista de ports</h4>
        <p>Agora que temos a jail e √°rvore de ports, falta definir uma lista de ports que desejamos compilar, crie essa lista em:</p>
        <code>/usr/local/etc/poudriere.d/ports-list</code>
        <p>Caso queira saber o identificador do pacote desejado voc√™ pode utilizar o comando <em>whereis "nomedopacote"</em> como no exemplo abaixo:</p>
        <code>whereis gnome-terminal</code>
        <p>...E o resultado obtido ser√°:</p>
        <code>/usr/ports/x11/gnome-terminal</code>
        <p>Ent√£o basta inserir a linha <em>x11/gnome-terminal</em> na lista para que ele seja compilado como no exemplo abaixo:</p>
        <code>x11/cinnamon<br>x11/gnome-terminal<br>www/firefox</code>
        <p>Se voc√™ deseja listar as op√ß√µes de compila√ß√£o de um pacote presente no sistema para ter alguma refer√™ncia voc√™ pode utilizar o comando <em>pkg info "nomedopacote"</em> como no exemplo abaixo:</p>
        <code>pkg info gnome-terminal</code>
        <p>Que retornar√°:</p>
        <code>Options        :<br>NAUTILUS       : on<br>SEARCHPROVIDER : on</code>
        <h4>Configurando make.conf</h4>
        <p>Agora que voc√™ j√° sabe identificar os pacotes podemos criar um arquivo de configura√ß√£o espec√≠fico para colocar op√ß√µes de compila√ß√£o dessa jail, acesse o diret√≥rio com o comando:</p>
        <code>cd /usr/local/etc/poudriere.d</code>
        <p>*Se o diret√≥rio n√£o existir voc√™ pode cri√°-lo com o comando:</p>
        <code>mkdir /usr/local/etc/poudriere.d</code>
        <p>Uma vez nesse diret√≥rio, basta criar um arquivo <em>nome da jail-make.conf</em>:</p>
        <code>nano FreeBSD_14-0_x64-make.conf</code>
        <p>Caso voc√™ queira que <em>PKG</em> seja utilizado <strong>(n√£o recomendado)</strong> no processo voc√™ pode inserir a linha:</p>
        <code>WITH_PKGNG=YES</code>
        <p>Caso voc√™ queira setar para que todos os pacotes nessa jail sejam preparados com suporte a <em>NLS</em> voc√™ pode usar o argumento <em>OPTIONS_SET+=</em> como no exemplo abaixo:</p>
        <code>OPTIONS_SET+= NLS</code>
        <p>Caso voc√™ queira setar para que todos os pacotes nessa jail sejam preparados sem suporte a <em>DOCS</em> voc√™ pode usar o argumento <em>OPTIONS_UNSET+=</em> como no exemplo abaixo:</p>
        <code>OPTIONS_UNSET+= DOCS</code>
        <p>O sistema de ports suporta m√∫ltiplas op√ß√µes de fornecimento ou mesmo versionamento para determinado software ou biblioteca (como por exemplo multiplas vers√µes de Python ou m√∫ltiplos fornecedores para SSL), vamos supor que desejamos setar a biblioteca <em>LibreSSL</em> como padr√£o para <em>SSL</em>, podemos fazer isso com o argumento:</p>
        <code>DEFAULT_VERSIONS+=ssl=libressl</code>
        <p>Voc√™ tamb√©m pode setar configura√ß√µes espec√≠ficas de compila√ß√£o para pacotes, vamos supor que voc√™ deseje remover o suporte a <em>ALSA</em> e <em>JACK</em> no pacote  <em>www/firefox</em>, basta alterar para que a sintaxe fique como no exemplo abaixo:</p>
        <code>www_firefox_UNSET+= ALSA JACK</code>
        <h4>Configurando o ambiente de compila√ß√£o por di√°logo</h4>
        <p>Se voc√™ quiser editar as op√ß√µes sem ter de editar manualmente o arquivo de configura√ß√£o, voc√™ pode utilizar o comando <em>poudriere options</em>, eu recomendo fortemente a leitura do <a class="link" href="https://man.freebsd.org/cgi/man.cgi?query=poudriere-options&apropos=0&sektion=8&manpath=freebsd-ports&format=html">manual do poudriere</a> mas aqui v√£o alguns exemplos mais essenciais:</p>
        <ul>
            <li><p><em>-c</em> Configura o ambiente do pacote tomando a escolha de configura√ß√£o por padr√£o, sempre vai mostrar os di√°logos para os ports e suas depend√™ncias.</p><code>poudriere options -c <em>"nome do pacote"</em></code></li>
            <li><p><em>-C</em> Configura o ambiente do pacote tomando a escolha de configura√ß√£o de forma condicional, que s√≥ mostra caixas de di√°logo com rela√ß√£o a novas op√ß√µes fornecidas.</p><code>poudriere options -C <em>"nome do pacote"</em></code></li>
            <li><p><em>-n</em> Executa o comando de forma n√£o recursiva, √∫til caso voc√™ queira for√ßar o di√°logo de configura√ß√£o (<em>-c</em>) por√©m para um port espec√≠fico sem ter que alterar todas as suas depend√™ncias</p><code>poudriere options -cn <em>"nome do pacote"</em></code></li>
            <li><p><em>-j</em> Define as op√ß√µes para uma jail espec√≠fica. Vamos supor que deseja configurar as op√ß√µes de um √∫nico pacote, de forma n√£o recursiva na jail <em>FreeBSD_14-0_x64</em>:</p><code>poudriere options -j <em>FreeBSD_14-0_x64</em> -cn <em>"nome do pacote"</em></code></li>
            <li><p><em>-p</em> Roda a configura√ß√£o dentro da √°rvore de ports citada. Vamos supor que deseja configurar as op√ß√µes de um √∫nico pacote, de forma n√£o recursiva na jail <em>FreeBSD_14-0_x64</em> para a √°rvore <em>MAIN</em>:</p><code>poudriere options -j <em>FreeBSD_14-0_x64</em> -p <em>MAIN</em> -cn <em>"nome do pacote"</em></code><p><strong>ALERTA:</strong> Se voc√™ j√° tem op√ß√µes configuradas para a √°rvore padr√£o elas n√£o mais ser√£o usadas caso utilize essa op√ß√£o!</p></li>
            <li><p><em>-r</em> Informa ao Poudriere para remover op√ß√µes especificadas pelo usu√°rio em um pacote de determinada jail. Vamos supor que voc√™ deseja retornar a configura√ß√£o padr√£o na jail <em>FreeBSD_14-0_x64</em> o pacote <em>gnome-terminal</em> :</p><code>poudriere options -r -j <em>FreeBSD_14-0_x64</em> <em>x11/gnome-terminal</em></code></li>
        </ul>
        <!-- COMPILANDO PACOTES -->
        <h4>Compilando pacotes</h4>
        <p>Para finalmente compilar os pacotes basta utilizar o comando <em>poudriere bulk -j "nome da jail" -p "nome da √°rvore de ports" -f "arquivo da lista de pacotes"</em> como no exemplo abaixo:</p>
        <code>poudriere bulk -j <em>FreeBSD_14-0_x64</em> -p <em>MAIN</em> -f /usr/local/etc/poudriere.d/ports-list</code>
        <p>Se em algum momento do processo de compila√ß√£o quiser obter informa√ß√µes sobre o progresso pelo terminal basta utilizar <em>CTRL+t</em>.</p>
        <!-- CONFIGURANDO REPOSIT√ìRIO -->
        <h4>Configurar o pkg para usar o reposit√≥rio constru√≠do localmente pelo Poudriere</h4>
        <p>Uma vez que os pacotes est√£o compilados, eles podem ser utilizados atrav√©s do comando <em>pkg install</em>, para que o pkg visualize os pacotes gerados pelo poudriere precisamos criar um arquivo de reposit√≥rio no diret√≥rio <mark>/usr/local/etc/pkg/repos</mark>, ent√£o antes de mais nada crie os diret√≥rios com o comando:</p>
        <code>mkdir -p /usr/local/etc/pkg/repos</code>
        <p>Em seguida acesse e edite o arquivo <mark>/usr/local/etc/pkg/repos/poudriere.conf</mark>, utilizando de exemplo o <em>nano</em> edite com:</p>
        <code>nano /usr/local/etc/pkg/repos/poudriere.conf</code>
        <p>Existem diversas configura√ß√µes que podem ser feitas aqui, a primeira e mais importante √© logicamente direcionar o pkg para onde est√£o os pacotes, para isso adicione a linha <em>poudriere:{url: "localiza√ß√£o do diret√≥rio+nome da jail+nome da √°rvore de pacotes"}</em> como no exemplo abaixo:</p>
<code><pre>
poudriere: {
    url: "file:///usr/local/poudriere/data/packages/FreeBSD_14-0_x64-MAIN",
}
</pre></code>
        <p>Podemos adicionar uma linha para definir que este √© um servidor mirror de pacotes com a linha <mark>mirror_type: "srv"</mark> e que ele deve estar habilitado com a linha <mark>enabled: yes</mark>, sendo assim o arquivo ficaria:</p>
<code><pre>
poudriere: {
    url: "file:///usr/local/poudriere/data/packages/FreeBSD_14-0_x64-MAIN",
    mirror_type: "srv",
    enabled: yes
}
</pre></code>
        <p>Caso voc√™ deseje utilizar este repos√≠t√≥rio para seletos pacotes e em conjunto com o reposit√≥rio oficial (n√£o recomendado), voc√™ pode adicionar uma configura√ß√£o que priorize esse reposit√≥rio com a linha <em>priority: 100</em> como no exemplo abaixo:</p>
<code><pre>
poudriere: {
    url: "file:///usr/local/poudriere/data/packages/FreeBSD_14-0_x64-MAIN",
    mirror_type: "srv",
    enabled: yes,
    priority: 100
}
</pre></code>
        <p>Caso voc√™ tenha gerado o certificado e configurado a assinatura de pacotes voc√™ pode adicionar os argumentos da linha abaixo para o tipo de assinatura verificada e o caminho para a chave p√∫blica para verificar a assinatura dos pacotes:</p>
<code><pre>
poudriere: {
...
signature_type: "pubkey",
pubkey: "/usr/local/etc/ssl/certs/poudriere.cert",
...
}
</pre></code>

        <p>Caso voc√™ deseje desabilitar o reposit√≥rio padr√£o voc√™ pode criar um arquivo de configura√ß√£o em <mark>/usr/local/etc/pkg/repos/freebsd.conf</mark> contendo o argumento <em>enabled: no</em> como no exemplo abaixo:</p>
<code><pre>
FreeBSD: {
    enabled: no
}
</pre></code>
        <p>Uma vez que a sua configura√ß√£o de reposit√≥rios est√° finalizada, atualize a lista de pacotes com o comando:</p>
        <code>pkg update</code>
        <p>Voc√™ pode usar um script simples para alternar qual reposit√≥rio est√° habilitado:</p>
<code><pre>
#!/usr/local/bin/bash

# Caminho dos arquivos de configura√ß√£o
POUDRIERE_REPO="/usr/local/etc/pkg/repos/poudriere.conf"
FREEBSD_REPO="/usr/local/etc/pkg/repos/freebsd.conf"
    
# Verifica se o reposit√≥rio do Poudriere est√° habilitado
if grep -q 'enabled: yes' $POUDRIERE_CONF; then
    # Se estiver habilitado, desabilita o Poudriere e habilita o FreeBSD
    sed -i '' 's/enabled: yes/enabled: no/g' $POUDRIERE_REPO
    sed -i '' 's/enabled: no/enabled: yes/g' $FREEBSD_REPO
else
    # Se estiver desabilitado, habilita o Poudriere e desabilita o FreeBSD
    sed -i '' 's/enabled: no/enabled: yes/g' $POUDRIERE_REPO
    sed -i '' 's/enabled: yes/enabled: no/g' $FREEBSD_REPO
fi    
</pre></code>
        <!-- MANUTEN√á√ÉO JAILS E PORTS -->
        <h4>Manuten√ß√£o b√°sica das jails e √°rvores</h4>
        <p>Aqui v√£o alguns comandos para voc√™ usar de refer√™ncia para utilizar na sua manuten√ß√£o do sistema:</p>
        <ul>
            <li><p>Caso voc√™ queira deletar uma jail e todas as suas pastas de dados voc√™ pode utilizar o comando <mark>poudriere jails -d -C all -j "nome da jail"</mark>:</p><code>poudriere jails -d -C all -j <em>FreeBSD_14-0_x64</em></code></li>
            <li><p>Caso voc√™ queira atualizar uma jail voc√™ pode utilizar o comando <mark>poudriere jail -u -j "nome da jail"</mark>:</p><code>poudriere jail -u -j <em>FreeBSD_14-0_x64</em></code></li>
            <li><p>Caso voc√™ queira atualizar uma √°rvore de ports pode utilizar o comando <mark>poudriere ports -u -p "nome da √°rvore de ports"</mark>:</p><code>poudriere ports -u -p <em>MAIN</em></code></li>
            <li><p>Caso voc√™ queira deletar sem questionamentos todos os distfiles relacionados a uma √°rvore utilize o comando <mark>poudriere distclean -a -p "nome da √°rvore" -y</mark>:</p><code>poudriere distclean -a -p <em>MAIN</em> -y</code></li>
            <li><p>Caso voc√™ queira limpar sem questionamentos todos os logfiles relacionados a uma jail utilize o comando <mark>poudriere logclean -a -j "nome da jail" -y</mark> :</p><code>poudriere logclean -a -j <em>FreeBSD_14-0_x64</em> -y</code></li>
            <li><p>Caso voc√™ queira limpar sem questionamentos todos os logfiles relacionados a uma √°rvore de ports utilize o comando <mark>poudriere logclean -a -p "nome da √°rvore" -y</mark> :</p><code>poudriere logclean -a -p <em>MAIN</em> -y</code></li>
            <li><p>Caso voc√™ deseje remover todos os pacotes associados a uma jail voc√™ pode utilzar o comando <mark>poudriere pkgclean -a -j "nome da jail"</mark>:</p><code>poudriere pkgclean -a -j <em>FreeBSD_14-0_x64</em></code></li>
            <li><p>Caso voc√™ deseje deletar os pacotes compilados por√©m n√£o mais necess√°rios (cleanup) utilize o comando <mark>poudriere pkgclean -j "nome da jail" -p "nome da √°rvore" -f "caminho do arquivo de lista de ports"</mark> :</p><code>poudriere pkgclean -j <em>FreeBSD_14-0_x64</em> -p <em>MAIN</em> -f <em>/usr/local/etc/poudriere.d/ports-list</em></code></li>
        </ul>
        <!-- CONFIGURAR P√ÅGINA DE REDE -->
        <h3>Configurar p√°gina de rede</h3>
        <!-- NGINX -->
        <h4>Utilizando o Nginx</h4>
        <p>Instale o <em>Nginx</em> compilando do seu diret√≥rio com os comandos:</p>
        <code>cd cd /usr/ports/www/nginx<br>make install clean</code>
        <p><strong>OU</strong> instale atrav√©s do bin√°rio com o comando:</p>
        <code>pkg install nginx</code>
        <p>Agora copie o arquivo de exemplo do Poudreire para o Nginx para o diret√≥rio do Nginx no seu computador:</p>
        <code>curl -fsSL https://raw.githubusercontent.com/freebsd/poudriere/master/src/share/examples/poudriere/nginx.conf.sample > /usr/local/etc/nginx/nginx.conf</code>
        <p>Para iniciar o servi√ßo do nginx ao iniciar o computador acrescente a linha abaixo em <mark>/etc/rc.conf</mark>:</p>
        <code>nginx_enable="YES"</code>
        <p>Caso queira iniciar o servi√ßo imediatamente utilize o comando:</p>
        <code>doas service nginx onestart</code>
        <!-- FINAL POUDRIERE -->
        <!-- INSTALA√á√ÉO SYNTH -->
        <h3>Instala√ß√£o do Synth</h3>
        <p>Se voc√™ escolheu utilizar o Synth ao inv√©s do Poudriere, instale via pkg com o comando:</p>
        <code>pkg install synth</code>
        <p><strong>Ou</strong>...</p>
        <p>Caso queira compilar o pacote, pode fazer isso com o comando abaixo:</p>
        <code>cd /usr/ports/ports-mgmt/synth<br>make install clean</code>
        <!-- WEBSERVER SYNTH -->
        <p>O primeiro passo √© instalar servi√ßo OpenBSDHTTPD</p>
        <code>pkg install obhttpd</code>
        <p><strong>Ou</strong>...</p>
        <p>Caso queira compilar o pacote, pode fazer isso com o comando abaixo:</p>
        <code>cd /usr/ports/www/obhttpd<br>make install clean</code>
        <p>Habilite o servi√ßo do OpenBSDHTTPD na inicializa√ß√£o a linha abaixo no arquivo <mark></mark> </p>
        <code>obhttpd_enable="YES"</code>
        <!-- SYSTEMD DUALBOOT -->
        <h3>Dualboot com Linux (SystemD boot)</h3>
        <p>Na vers√£o anterior dessa documenta√ß√£o eu tinha dito que ainda n√£o era interessante a instala√ß√£o utilizando UEFI... Agora n√£o s√≥ √© funcional como √© o recomendado! Para fazer o dualboot basta selecionar o dispositivo de instala√ß√£o, criar uma parti√ß√£o <em>UFS</em> em um disco que j√° tenha parti√ß√£o <em>ESP</em> e inserir a seguinte configura√ß√£o nas <em>entries</em> do <em>systemd boot</em>:</p>
        <code>title FreeBSD<br>efi <em>/EFI/freebsd/loader.efi</em></code>
        <p>* Se o seu loader est√° em outra localiza√ß√£o, basta alterar o caminho que vai dar tudo certo üòâ</p>
    </main>
    <footer id="main-footer">
        <p>Est√° p√°gina ainda est√° em constru√ß√£o üöß</p>
        <a class="footerlink" href="#main-header">‚Üë Retornar ao topo ‚Üë</a>
    </footer>
</body>
</html>
