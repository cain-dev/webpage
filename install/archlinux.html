<!DOCTYPE html>
<html lang="pt-BR" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta name="keywords" content="formatação, windows, linux, freebsd, bios, uefi, instalação, balena, etcher, ventoy, os">
    <meta name="author" content="Cain">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instalação do Arch Linux</title>
    <!--Social Media Open Graph-->
    <meta property="og:title" content="Instalação de Sistemas Operacionais - Arch Linux"/>
    <meta property="og:url" content="https://cain-dev.github.io/default/"/>
    <meta property="og:type" content="article"/>
    <meta property="og:description" content="Aprenda a instalar o famoso Arch Linux, acredite: Não é tão difícil quanto falam"/>
    <meta property="og:image" content="https://raw.githubusercontent.com/cain-dev/default/main/assets/images/ogimage.jpg"/>
    <!--/Social Media Open Graph-->
    <!--Links-->
    <link rel="shortcut icon" href="https://archlinux.org/static/favicon.29302f683ff8.ico">
    <link rel="stylesheet" type="text/css"href="../os_style.css">   
    <!--/Links-->
</head>
<body>
    <header id="main-header">
        <ul>
            <li><a href="../index.html">Home</a></li>
            <li><p>@cain-dev</p></li>
            <li><a href="../extra/contact.html">Contato</a></li>
        </ul>
    </header>
    <main id="main-area">
        <h1>Instalação do Arch Linux v2.0</h1>
        <img class="responsiva" src="https://archlinux.org/static/logos/archlinux-logo-dark-90dpi.ebdee92a15b3.png" alt="">
        <h2>Introdução</h2>
        <p>Inicialmente essa página de instalação do Archlinux foi feita com a intenção de possibilitar a instalação deste sistema operacional em uma máquina de testes, mas como diversas pessoas passaram a utilizar essa documentação como referência de instalação pra uso final eu resolvi refazer este guia de instalação para deixar ele não só mais organizado como também mais completo. Ainda assim é necessário o mesmo <i>disclaimer</i> de antes: O Arch Linux é uma distribuição Linux absurdamente customizável e não existe uma maneira definitiva de instalá-lo contanto que você cumpra todos os passos necessários para a instalação, por via de regra todo tutorial de instalação completa do Archlinux tem uma espécie de "instalação alvo", ou seja, uma maneira específica entre diversas outras maneiras para executar cada passo da instalação e visando um resultado específico para essa instalação. </p>
        <h2>Instalação Alvo</h2>
        <p>A instalação alvo para essa documentação baseia-se em um sistema em modo <mark>BIOS</mark> com o <mark>GRUB</mark> como inicializador <strong>ou</strong> em modo <mark>UEFI</mark> com <mark>systemd-boot</mark> como inicializador; com a raiz do sistema com o sistema de arquivos <mark>EXT4</mark>; com rede baseada em <mark>iwd</mark> com <mark>openresolv</mark> para instalações minimalistas (como <i>laptops</i> menos potentes que só precisam de uma conexão sem fio) <strong>ou</strong> <mark>Network Manager</mark> com <mark>dnsmasq</mark> para um gerenciamento de rede com maior compatibilidade; utilizando o <mark>PipeWire</mark> como backend de áudio.</p>
        <p>Se por acaso você tem interesse na instalação de um outro bootloader como o que não seja algum dos citados ou deseja utilizar outro sistema de arquivos para a raiz do sistema como o <mark>F2FS</mark>, <mark>BTRFS</mark> ou <mark>ZFS</mark> <strong>Não siga essa documentação como guia para fazer o particionamento do disco, formatação das partições e instalação!</strong>.</p>
        <p><strong>⚠️&nbsp;Alerta: É necessário experiência prévia com terminais e sistemas Unixlike!</strong></p>
        <details class="spoiler" >
            <summary>Selecionando os mirror's <strong>Não recomendado!</strong> (Clique para ver)</summary>
            <p>Vamos começar do começo... Isso é absurdamente desnecessário, ok? Não faça! Isso está aqui para fins educacionais, já adianto que se você demorar muito para chegar nesse paso o próprio Arch fara uma busca pelos melhores mirrors então de estalo já desative o serviço com:</p>
            <code>systemctl stop reflector</code>
            <p>Existem diversas maneiras de editar o arquivo que lista os servidores <i>mirrors</i> e habilitar apenas os servidores brasileiros para uma melhor conexão para o processo de instalação, mas a que eu recomendo é através dos comandos de substituição do <mark>vim</mark>. Você pode abrir o arquivo de <i>mirrors</i> no <mark>vim</mark> com o seguinte comando:</p>
            <code>vim /etc/pacman.d/mirrorlist</code>
            <p>Com o vim aberto <strong>não aperte nenhuma outra tecla!</strong> (a menos que esteja acostumado a usar o vim), apenas escreva o comando abaixo e depois tecle <em>Enter</em> para comentar e desabilitar todos os servidores de uma vez só:</p>
            <code>:%s/Server/#Server/g</code>
            <p>Uma vez que todos os servidores foram comentados, utilize as <em>setas do teclado</em> e o <em>delete</em> para apagar o <mark>#</mark> que precede o link dos servidores brasileiros. Quando finalizar utilize o comando abaixo para salvar e sair:</p>
            <code>:wq</code>
            <p>Então você pode atualizar o banco de dados dos pacotes com o seguinte comando:</p>
            <code>pacman -Syy</code>
        </details>
        <!-- Passo 1 Configurar o layout do teclado -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2 id="passo-1">Passo 1 - Configurar o <i>layout</i> do teclado e fonte do terminal</h2>
        <p>Antes de digitar qualquer outro comando é necessário que o teclado esteja devidamente configurado, supondo que você tenha um teclado padrão <mark>ABNT2</mark> utilize o comando abaixo para carregar o layout correto:</p>
        <code>loadkeys br-abnt2</code>
        <!-- Passo opcional - Mudar a fonte da padrão do terminal -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Opcional - Mudar a fonte padrão do terminal</h2>
        <p>Eu frequentemente tenho que instalar o ArchLinux em um <i>laptop</i> que possuo e a fonte fica pequena demais na tela para o meu gosto, caso você tenha o mesmo problema que eu e queira alterar a fonte para uma outra que fique mais visível você pode utilizar uma das fontes contidas em <mark>/usr/share/kbd/consolefonts/</mark> e o comando <mark>setfont</mark> como no comando abaixo:</p>
        <code>setfont ter-124b</code>
        <!-- Passo opcional - Verificar o ambiente de inicialização -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Passo 2 - Verificar o ambiente de inicialização</h2>
        <p>Para garantir que você iniciou o sistema da forma correta você pode utilizar o comando:</p>
        <!--
        <code>ls /sys/firmware/efi/efivars</code>
        -->
        <code>cat /sys/firmware/efi/fw_platform_size</code>
        <p>Se o comando retornar 64, o sistema está inicializado no modo UEFI e tem um UEFI x64 de 64 bits. Se o comando retornar 32, o sistema está inicializado no modo UEFI e tem um UEFI IA32 de 32 bits; embora seja suportado, limitará a escolha do carregador de boot ao <mark>systemd-boot</mark>. Se o arquivo não existir, o sistema está inicializado no modo BIOS (ou CSM). Se o sistema não inicializou no modo desejado (UEFI vs BIOS), reinicie o computador e reconfigure a placa-mãe.</p>
        <!--
        <p>Se o comando mostrar o diretório sem erro, o sistema está inicializado no modo UEFI. Se o diretório não existir, o sistema pode ser estar no modo BIOS (ou CSM). Caso não esteja no ambiente correto reinicie o seu computador e configure a placa mãe corretamente.</p>
        -->
        <!-- Passo 2 Conectar-se a internet -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Passo 3 - Conectar-se a internet</h2>
        <!-- Passo 2 Opção A - Caso esteja conectado com cabo de rede-->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->     
        <p>Antes e mais nada verifique se a sua interface está listada e habilitada com o comando:</p>
        <code>ip link</code>
        <h3>Opção A - Caso esteja conectado com cabo de rede</h3>
        <p>Caso tenha conectado o computador ao cabo de rede para acessar a internet as chances são que seu roteador já faz todo o trabalho, então basta verificar se há aquisição de um endereço IP válido e se há conexão com a rede local através do comando:</p>
        <code>ip address show</code>
        <p>Se recebemos um endereço IP válido podemos conferir se há conexão com a internet com o comando:</p>
        <code>ping archlinux.org</code>
        <p>Se a conexão com o archlinux.org não teve falhas você pode pular para o Passo 4</p>
        <!-- Passo 2 Opção B - Caso queira se conectar a internet através de uma rede sem fio -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Opção B - Caso queira se conectar a internet através de uma rede sem fio</h3>
        <details class="spoiler" >
            <summary>Caso tenha a placa de WiFi bloqueada (Clique para ver)</summary>
            <p>Muitos laptops possuem um botão (ou switch) de hardware para desligar a placa wireless; entretanto, ela também pode ser bloqueada pelo kernel. Isso pode ser resolvido por rfkill. Para mostrar o status atual:</p>
            <code>rfkill</code>
            <p>Vai retornar um menu mais ou menos assim:</p>
            <code>
            <table>
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>TYPE</th>
                    <th>DEVICE</th>
                    <th>SOFT</th>
                    <th>HARD</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>0</td>
                    <td>bluetooth</td>
                    <td>hci0</td>
                    <td>unblocked</td>
                    <td>unblocked</td>
                  </tr>
                  <tr>
                    <td>1</td>
                    <td>wlan</td>
                    <td>phy0</td>
                    <td>unblocked</td>
                    <td>unblocked</td>
                  </tr>
                </tbody>
                </table>
            </code>
            <p>Se a placa estiver <i>hard-blocked</i>, use o botão interruptor físico para desbloqueá-la. Se a placa não estiver <i>hard-blocked</i> e sim <i>soft-blocked</i>, desbloqueie como no comando abaixo:</p>
            <code>rfkill unblock wlan</code>
        </details>
        <p>Caso você queira utilizar uma conexão sem fio para se conectar a internet podemos utilizar a ferramenta <mark>iwd</mark> para fazer a conexão, para acessá-la execute o comando:</p>
        <code>iwctl</code>
        <p>Uma vez que estamos no controle do <mark>iwctl</mark> podemos listar os dispositivos disponíveis para conexão sem fio, para isso utilize o comando:</p>
        <code>device list</code>
        <p>Os dispositivos reconhecidos pelo sistema serão listados como no exemplo abaixo:</p>
        <code>
        <table>
            <thead>
              <tr>
                <th>Name</th>
                <th>Address</th>
                <th>Powered</th>
                <th>Adapter</th>
                <th>Mode</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><mark>device</mark></td>
                <td>DE:AD:BE:EF:01:02</td>
                <td>off</td>
                <td><mark>adapter01</mark></td>
                <td>station</td>
              </tr>
            </tbody>
            </table>
        </code>
        <p>Caso o seu adaptador esteja desligado como no exemplo acima, utilize o comando abaixo para iniciá-lo:</p>
        <code>adapter <mark>adapter01</mark> set-property Powered on</code>
        <p>Uma vez que você sabe qual é o nome do dispositivo de conexão sem fio no seu computador, utilize o comando abaixo para iniciar uma varredura das redes disponíveis para conexão substituindo o trecho <mark>device</mark> pelo nome (o que está abaixo da guia <mark>Name</mark>) do seu dispositivo:</p>
        <code>station <mark>device</mark> scan</code>
        <p>Agora podemos listar as redes sem fio disponíveis, para isso podemos utilizar o comando:</p>
        <code>station <mark>device</mark> get-networks</code>
        <p>Esse comando vai retornar uma lista das redes encontradas pelo dispositivo, assim que você achar a rede que você deseja se conectar basta utilizar o comando abaixo para se conectar substituindo <mark>SSID</mark> pelo <mark>nome</mark> da sua rede:</p>
        <code>station <mark>device</mark> connect <mark>SSID</mark></code>
        <p>Caso você esteja fazendo uso de uma rede oculta, você pode se conectar a ela utilizando o comando:</p>
        <code>station <mark>device</mark> connect-hidden <mark>SSID</mark></code>
        <p>Uma vez que temos conexão podemos sair do programa e continuar com a instalação, para sair do <em>iwctl</em> utilize o comando:</p>
        <code>exit</code>
        <p>Podemos verificar se há aquisição de um endereço IP válido e se há conexão com a rede local através do comando:</p>
        <code>ip addr show</code>
        <p>Se recebemos um endereço IP válido podemos conferir se há conexão com a internet com o comando:</p>
        <code>ping google.com</code>
        <p>Se a conexão com o Google não teve falhas você pode prosseguir para o Passo 4</p>
        <!-- Passo opcional - Verificar a hora -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Passo opcional - Verificar a hora</h2>
        <p>No ambiente de instalação o <em>systemd-timesyncd</em> é ativado por padrão e o horário será sincronizado automaticamente assim que uma conexão com a internet for estabelecida. Para garantir que o relógio do sistema está correto utilize o comando:</p>
        <code>timedatectl</code>
        <!-- Passo 4 Particionar as unidades de armazenamento -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Passo 4 - Particionar as unidades de armazenamento</h2>
        <p>Antes de começar qualquer alteração é importante ter certeza de qual unidade vamos alterar, para listar as unidades de armazenamento utilize o comando:</p>
        <code>fdisk -l</code>
        <p>Verifique (e se possível anote) o(s) nome(s) da(s) unidade(s) que deseja utilizar. Uma vez que você tem a certeza de qual (ou quais) unidade(s) vai alterar e em qual vai instalar o sistema, escolha uma das opções abaixo (Preparação para armazenamento em sistemas baseados em BIOS <strong>OU</strong> Preparação para armazenamento em sistemas baseados em UEFI) para iniciar o particionamento. Lembre-se de substituir o <mark>storage</mark> em <mark>/dev/storage</mark> pelo endereço do dispositivo desejado.</p>
        <p>Nesse guia trataremos os endereços de dispositivos diferentes como uma sequência alfabética, como no exemplo abaixo:</p>
        <ul>
            <li>/dev/<mark>storageA</mark></li>
            <li>/dev/<mark>storageB</mark></li>
            <li>/dev/<mark>storageC</mark></li>
        </ul>
        <p>E os endereços das partições como <em>P</em> seguido do número da partição, como no exemplo abaixo:</p>
        <ul>
            <li>/dev/<mark>storageAP1</mark></li>
            <li>/dev/<mark>storageAP2</mark></li>
            <li>/dev/<mark>storageAP3</mark></li>
        </ul>
        <p>Então, se o seu dispositivo de armazenamento por acaso for um disco com o endereço <em>/dev/sda</em> ou mesmo um NVME em <em>/dev/nvme0n1</em> e se a sua partição alvo for a <em>/dev/sda5</em> ao invés de <em>P1</em> <strong>lembre-se de alterar conforme a sua necessidade</strong>.</p>
        <!-- Passo extra para quem utiliza NVME -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <details class="spoiler" >
            <summary>Passo extra para quem utiliza NVME (Clique para ver)</summary>
            <p>Como alternativa à substituição manual do tamanho do setor detectado automaticamente, alguns SSDs podem ter o tamanho do setor alterado durante a formatação, para que reportem um número mais próximo do tamanho real do setor e portanto podendo melhorar sua performance.</p>
            <p>Para ver se um determinado dispositivo NVMe oferece suporte a isso, use o comando abaixo:</p>
            <code>nvme id-ns -H /dev/<mark>nvme0n1</mark> | grep "Relative Performance"</code>
            <p>Verifique o retorno dos formatos possíveis:</p>
            <code>LBA Format  0 : Metadata Size: 0   bytes - Data Size: 512 bytes - Relative Performance: 0x2 Good (in use)<br>LBA Format  1 : Metadata Size: 0   bytes - Data Size: 4096 bytes - Relative Performance: 0x1 Better</code>
            <p>O <em>Relative Performance</em> indica qual formato fornecerá o melhor desempenho. Para alterar o tamanho do setor, use o nvme format e especifique o valor preferencial com o parâmetro --lbaf como no comando abaixo:</p>
            <code>nvme format --lbaf=1 /dev/<mark>nvme0n1</mark></code>
            <p>Isso deve levar apenas alguns segundos para finalizar.</p>
            <p>Observação: Fique atento para o passo <em>formatação avançada</em> abaixo.</p>
        </details>
        <!-- Passo 4 Opção A - armazenamento em sistemas baseados em BIOS -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Opção A - Preparação para armazenamento em sistemas baseados em <mark>BIOS</mark></h3>
        <p>Para particionar o disco utilizaremos a ferramenta <em>fdisk</em> na unidade desejada, para isso utilize o comando:</p>
        <code>fdisk /dev/<mark>storageA</mark></code>
        <p>Com o <mark>fdisk</mark> aberto na unidade desejada criaremos uma nova tabela de partição em <mark>MBR</mark> com o comando:</p>
        <code>o</code>
        <!-- Easy Mode CFDISK -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <details class="spoiler" >
            <summary>Modo Easy (Clique para ver)</summary>
            <p>Uma vez que você criou uma nova tabela em <em>MBR (DOS)</em> você pode imediatamente usar o comando abaixo para escrever as alterações:</p>
            <code>w</code>
            <p>E fazer as partições de uma forma mais gráfica e fácil através do <em>cfdisk</em> com o comando:</p>
            <code>cfdisk /dev/<mark>storageA</mark></code>
            <h4>Como usar:</h4>
            <ul>
                <li><p>Com as setas ↑↓ (cima e baixo) você seleciona as partiçoes e com as setas ←→ (esquerda e direita) você seleciona as ações, tecle <em>Enter</em> para confirmar.</p></li>
                <li><p>Coloque o cursor sobre as partições que deseja excluir e depois selecione <em>[ Delete ]</em> para remover as partições.</p></li>
                <li><p>Coloque o cursor sobre <em>Free Space</em> depois selecione <em>[ New ]</em> para criar uma partição, digite o tamanho desejado ou apenas tecle <em>Enter</em> para usar todo o espaço.</p></li>
                <li><p>Para alterar o tipo da partição, coloque o cursor sobre a partição e selecione a opção <em>[ Type ]</em>.</p></li>
                <li><p>Para fazer com que uma partição seja inicializável coloque o cursor sobre a partição e depois selecione <em>[ Bootable ]</em>.</p></li>
                <li><p>Por fim selecione a opção <em>[ Write ]</em> e confirme digitando <em>yes</em> e teclando <em>Enter</em>.</p></li>
            </ul>
            <!-- Easy Mode CFDISK BIOS BOOT -->
            <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
            <h4>Partição <em>BIOS BOOT</em> (opcional mas altamente recomendado)</h4>
            <p>Em computadores que utilizam BIOS (especialmente os mais antigos), instalar o GRUB pode ser uma dor de cabeça sem uma partição específica para ele. Isso pode ser resolvido facilmente com uma partição do tipo <em>BIOS BOOT</em>.</p>
            <p>A partição BIOS BOOT deve ser uma partição <mark>primary</mark> de <mark>1 MB</mark> do tipo <mark>00 Empty</mark> <strong>e marcada como</strong> <mark>bootable</mark>.</p>
            <!-- Easy Mode CFDISK swap -->
            <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
            <h4>Partição <em>SWAP</em> (opcional mas altamente recomendado)</h4>
            <p>A memória Swap é um espaço que é utilizado quando o sistema operacional fica sobrecarregado, evita a queda de desempenho, travamentos e desligamentos automáticos. A quantidade de memória swap necessária varia conforme a quantidade de memória ram que seu sistema possui e se você vai ou não utilizar hibernação, também pode variar conforme o tipo de dispositivo de armazenamento e não sendo recomendado o uso na sua configuração padrão em SSD's e NVME's. Fique tranquilo, você pode (e em grande parte dos casos deve) ter algum espaço voltado para swap ainda que seja no seu SSD ou NVME, apenas lembre de verificar a otimização de swap ao fim desse guia.</p>
            <p>Em vez de uma partição swap você também pode utilizar um arquivo de memória swap, assim você não precisa dedicar uma partição no disco especificamente para a swap, essa opção tende a ser preferida pelos usuários de SSD e NVME apesar da partição swap poder resultar numa melhor performance. Independente do caso utilize a partição swap <strong>ou</strong> o arquivo de swap, <strong>não use ambos e também não fique sem nenhum dos dois</strong> (ainda que seja em um outro dispositivo), vai te evitar muita dor de cabeça.</p>
            <p id="tabela-swap">Para saber quanto de swap pode ser necessário para o seu caso verifique na tabela abaixo:</p>
            <figure>
                <table>
                    <tbody>
                        <tr>
                            <th>RAM</th>
                            <th>Swap (sem hibernação)</th>
                            <th>&nbsp;Swap (com hibernação)</th>
                        </tr>
                        <tr>
                            <td>&nbsp;256MB</td>
                            <td>&nbsp;256MB</td>
                            <td>&nbsp;512MB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;512MB</td>
                            <td>&nbsp;512MB</td>
                            <td>&nbsp;1GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;1GB</td>
                            <td>&nbsp;1GB</td>
                            <td>&nbsp;2GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;2GB</td>
                            <td>&nbsp;1GB</td>
                            <td>&nbsp;3GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;3GB</td>
                            <td>&nbsp;2GB</td>
                            <td>&nbsp;5GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;4GB</td>
                            <td>&nbsp;2GB</td>
                            <td>&nbsp;6GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;6GB</td>
                            <td>&nbsp;2GB</td>
                            <td>&nbsp;8GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;8GB</td>
                            <td>&nbsp;3GB</td>
                            <td>&nbsp;11GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;12GB</td>
                            <td>&nbsp;3GB</td>
                            <td>&nbsp;15GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;16GB</td>
                            <td>&nbsp;4GB</td>
                            <td>&nbsp;20GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;24GB</td>
                            <td>&nbsp;5GB</td>
                            <td>&nbsp;29GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;32GB</td>
                            <td>&nbsp;6GB</td>
                            <td>&nbsp;38GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;64GB</td>
                            <td>&nbsp;8GB</td>
                            <td>&nbsp;72GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;128GB</td>
                            <td>&nbsp;11GB</td>
                            <td>&nbsp;139GB</td>
                        </tr>
                    </tbody>
                </table>
            </figure>
            <p>A partição swap deve ser uma partição <mark>extended</mark> do tipo <mark>82 Linux swap</mark>.</p>
            <!-- Easy Mode CFDISK / -->
            <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
            <h4>Partição raiz do sistema (<em>root</em> ou <em>/</em>)</h4>
            <p>A partição mais importante do sistema, é a partição em que todos os arquivos de sistema ficam e que tudo é montado. Via de regra, essa é a partição que ocupada todo o resto do armazenamento. No entanto, algumas pessoas preferem delimitar o espaço dessa partição para o tamanho necessário apenas para o funcionamento do sistema e ocupar o resto do armazenamento com uma partição dedicada para a pasta de usuários (/home). Dessa forma, se algum problema ocorrer com a partição do sistema não haverá perdas para os dados de usuário.</p>
            <p>É importante ressaltar que pastas de usuário <strong>não são compatíveis entre distribuições distintas</strong> e ainda numa mesma distribuição podem gerar problemas de incompatibilidade ou com configurações de aplicativos, variáveis e afins. Recomendo delimitar o tamanho da partição de sistema apenas e somente se você pretende fazer mudanças na partição de raiz do sistema sem ter que reinstalar o sistema.</p>
            <p>Se você é um usuário iniciante ou não pretende fazer tais mudanças, faça backup dos seus arquivos num outro dispositivo e <strong>e não delimite o tamanho da partição raiz e também não faça uma partição separada para a /home!</strong></p>
            <p><strong>Observação:</strong> Existe muito debate a respeito de qual é o tamanho necessário para uma partição raiz do sistema, obviamente o necessário varia conforme o tipo da instalação e a quantidade de programas a serem instalados. Na maioria das documentações que vi, a recomendação é de no mínimo <em>20G</em> para a grande maioria dos usuários e de <em>40G</em> a <em>60G</em> para casos mais extremos. Lembrando que <strong>se você pretende usar um arquivo swap na partição do sistema você deve contabilizar o espaço necessário para o arquivo de swap aqui também!</strong></p>
            <p>A partição / deve ser uma partição <mark>extended</mark> do tipo <mark>83 Linux</mark>.</p>         
            <!-- Easy Mode CFDISK /home -->
            <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
            <h4>Partição para <em>/home</em> separada (opcional e não recomendado)</h4>
            <p>Se decidiu fazer uma partição separada para a /home recomendo que ocupe todo o resto do armazenamento (embora você também pode delimitar o tamanho dessa partição da mesma maneira que a raiz).</p></p>
            <p>A partição /home deve ser uma partição <mark>extended</mark> do tipo <mark>83 Linux</mark>.</p>
            <h4>Terminado!</h4>
            <p>Pule para o <em>Passo 5 - Formatar as partições</em></p>
        </details>
        <!-- Partição BIOS BOOT -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h4>Partição <em>BIOS BOOT</em> (opcional mas altamente recomendado)</h4>
        <p>Em computadores que utilizam BIOS (especialmente os mais antigos), instalar o GRUB pode ser uma dor de cabeça sem uma partição específica para ele. Isso pode ser resolvido facilmente com uma partição do tipo <em>BIOS BOOT</em>.</p>
        <p>Para criar a nova partição que será usada pelo GRUB utilize o comando:</p>
        <code>n</code>
        <p>O programa vai perguntar que tipo de partição você deseja como no exemplo abaixo:</p>
        <code>Partition type<br>&nbsp;p&nbsp;primary<br>&nbsp;e&nbsp;extended<br>Select (default p):</code>
        <p>Tecle <em>p</em> (para <i>primary</i>) e dê enter para a criar uma nova partição primária.</p>
        <p>O programa vai perguntar o número da partição como no exemplo abaixo:</p>
        <code>Partition number:</code>
        <p>Você pode selecionar qual vai ser o número da partição ou apenas teclar <em>Enter</em>.</p>
        <p>Logo em seguida o sistema irá exibir a seguinte linha para que você escolha o ponto de início da partição:</p>
        <code>first sector: default</code>
        <p>Apenas tecle <mark>Enter</mark>.</p>
        <p>Logo em seguida o sistema irá exibir a linha abaixo para que você escolha o ponto de término da partição e delimite o seu tamanho, apenas <em>1MB</em> é o suficiente, para criar uma partição de 1MB o comando seria:</p>
        <code>last sector: +<mark>1M</mark></code>
        <p><strong>Observação:</strong> Se essa área já servia alguma outra partição vai aparecer um erro como o exemplo abaixo:</p>
        <code><strong>Partition #X contains a X signature.</strong><br>Do you want to remove the signature?[Y]es/[N]o:</code>
        <p>Apenas use o comando <em>Y</em> para confirmar a remoção de assinatura.</p>
        <p>Agora, precisamos informar o tipo da partição, para mudar o tipo da partição use o comando:</p>
        <code>t</code>
        <p>Para ver os códigos disponíveis use o comando:</p>
        <code>L</code>
        <p>O código para o tipo vazio é o <em>00</em>, digite 00 e dê enter para mudar o tipo para "Empty"</p>
        <p>Agora precisamos deixar essa partição <i>bootável</i>, tecle <em>a</em> para deixar essa partição ativada para boot.</p>
        <!-- Partição SWAP em BIOS -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h4>Partição <em>SWAP</em> (opcional mas altamente recomendado)</h4>
        <p>A memória Swap é um espaço que é utilizado quando o sistema operacional fica sobrecarregado, evita a queda de desempenho, travamentos e desligamentos automáticos. A quantidade de memória swap necessária varia conforme a quantidade de memória ram que seu sistema possui e se você vai ou não utilizar hibernação, também pode variar conforme o tipo de dispositivo de armazenamento e não sendo recomendado o uso na sua configuração padrão em SSD's e NVME's. Fique tranquilo, você pode (e em grande parte dos casos deve) ter algum espaço voltado para swap ainda que seja no seu SSD ou NVME, apenas lembre de verificar a otimização de swap ao fim desse guia.</p>
        <p>Em vez de uma partição swap você também pode utilizar um arquivo de memória swap, assim você não precisa dedicar uma partição no disco especificamente para a swap, essa opção tende a ser preferida pelos usuários de SSD e NVME apesar da partição swap poder resultar numa melhor performance. Independente do caso utilize a partição swap <strong>ou</strong> o arquivo de swap, <strong>não use ambos e também não fique sem nenhum dos dois</strong> (ainda que seja em um outro dispositivo), vai te evitar muita dor de cabeça.</p>
        <p id="tabela-swap">Para saber quanto de swap pode ser necessário para o seu caso verifique na tabela abaixo:</p>
        <figure>
            <table>
                <tbody>
                    <tr>
                        <th>RAM</th>
                        <th>Swap (sem hibernação)</th>
                        <th>&nbsp;Swap (com hibernação)</th>
                    </tr>
                    <tr>
                        <td>&nbsp;256MB</td>
                        <td>&nbsp;256MB</td>
                        <td>&nbsp;512MB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;512MB</td>
                        <td>&nbsp;512MB</td>
                        <td>&nbsp;1GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;1GB</td>
                        <td>&nbsp;1GB</td>
                        <td>&nbsp;2GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;2GB</td>
                        <td>&nbsp;1GB</td>
                        <td>&nbsp;3GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;3GB</td>
                        <td>&nbsp;2GB</td>
                        <td>&nbsp;5GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;4GB</td>
                        <td>&nbsp;2GB</td>
                        <td>&nbsp;6GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;6GB</td>
                        <td>&nbsp;2GB</td>
                        <td>&nbsp;8GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;8GB</td>
                        <td>&nbsp;3GB</td>
                        <td>&nbsp;11GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;12GB</td>
                        <td>&nbsp;3GB</td>
                        <td>&nbsp;15GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;16GB</td>
                        <td>&nbsp;4GB</td>
                        <td>&nbsp;20GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;24GB</td>
                        <td>&nbsp;5GB</td>
                        <td>&nbsp;29GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;32GB</td>
                        <td>&nbsp;6GB</td>
                        <td>&nbsp;38GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;64GB</td>
                        <td>&nbsp;8GB</td>
                        <td>&nbsp;72GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;128GB</td>
                        <td>&nbsp;11GB</td>
                        <td>&nbsp;139GB</td>
                    </tr>
                </tbody>
            </table>
        </figure>
        <p>Para criar a nova partição que será usada como swap utilize o comando:</p>
        <code>n</code>
        <p>O programa vai perguntar que tipo de partição você deseja como no exemplo abaixo:</p>
        <code>Partition type<br>&nbsp;p&nbsp;primary<br>&nbsp;e&nbsp;extended<br>Select (default p):</code>
        <p>Tecle <em>e</em> (para <i>extended</i>) e dê enter para a criar uma nova partição extendida.</p>
        <p>O programa vai perguntar o número da partição como no exemplo abaixo:</p>
        <code>Partition number:</code>
        <p>Você pode selecionar qual vai ser o número da partição ou apenas teclar <em>Enter</em>.</p>
        <p>Logo em seguida o sistema irá exibir a seguinte linha para que você escolha o ponto de início da partição:</p>
        <code>first sector: default</code>
        <p>Apenas tecle <mark>Enter</mark>.</p>
        <p>Logo em seguida o sistema irá exibir a linha abaixo para que você escolha o ponto de término da partição e delimite o seu tamanho, supondo que eu tenha uma máquina com 2GB de ram e pretendo utilizar hibernação o recomendado conforme a tabela é utilizar 3G, para criar uma partição de 3GB o comando seria:</p>
        <code>last sector: +<mark>3G</mark></code>
        <p><strong>Observação:</strong> Se essa área já servia alguma outra partição vai aparecer um erro como o exemplo abaixo:</p>
        <code><strong>Partition #X contains a X signature.</strong><br>Do you want to remove the signature?[Y]es/[N]o:</code>
        <p>Apenas use o comando <em>Y</em> para confirmar a remoção de assinatura.</p>
        <p>Agora, precisamos informar o tipo da partição, para mudar o tipo da partição use o comando:</p>
        <code>t</code>
        <p>Para ver os códigos disponíveis use o comando:</p>
        <code>L</code>
        <p>O código para o tipo swap é o <em>82</em>, digite 82 e dê enter para mudar o tipo para "Linux swap"</p>
        <!-- Partição raiz do sistema em BIOS -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->        
        <h4>Partição raiz do sistema (<em>root</em> ou <em>/</em>)</h4>
        <p>A partição mais importante do sistema, é a partição em que todos os arquivos de sistema ficam e que tudo é montado. Via de regra, essa é a partição que ocupada todo o resto do armazenamento. No entanto, algumas pessoas preferem delimitar o espaço dessa partição para o tamanho necessário apenas para o funcionamento do sistema e ocupar o resto do armazenamento com uma partição dedicada para a pasta de usuários (/home). Dessa forma, se algum problema ocorrer com a partição do sistema não haverá perdas para os dados de usuário.</p>
        <p>É importante ressaltar que pastas de usuário <strong>não são compatíveis entre distribuições distintas</strong> e ainda numa mesma distribuição podem gerar problemas de incompatibilidade ou com configurações de aplicativos, variáveis e afins. Recomendo delimitar o tamanho da partição de sistema apenas e somente se você pretende fazer mudanças na partição de raiz do sistema sem ter que reinstalar o sistema.</p>
        <p>Se você é um usuário iniciante ou não pretende fazer tais mudanças, faça backup dos seus arquivos num outro dispositivo e <strong>e não delimite o tamanho da partição raiz e também não faça uma partição separada para a /home!</strong></p>
        <p>Para criar a nova partição que será usada como raiz do sistema utilize o comando:</p>
        <code>n</code>
        <p>O programa vai perguntar que tipo de partição você deseja como no exemplo abaixo:</p>
        <code>Partition type<br>&nbsp;p&nbsp;primary<br>&nbsp;e&nbsp;extended<br>Select (default p):</code>
        <p>Tecle <em>e</em> (para <i>extended</i>) e dê enter para a criar uma nova partição extendida.</p>
        <p>O programa vai perguntar o número da partição como no exemplo abaixo:</p>
        <code>Partition number:</code>
        <p>Você pode selecionar qual vai ser o número da partição ou apenas teclar <em>Enter</em>.</p>
        <p>Logo em seguida o sistema irá exibir a seguinte linha para que você escolha o ponto de início da partição:</p>
        <code>first sector: default</code>
        <p>Apenas tecle <mark>Enter</mark>.</p>
        <p>Logo em seguida o sistema irá exibir a linha abaixo para que você escolha o ponto de término da partição e delimite o seu tamanho, caso você queira que a partição de sistema ocupe todo o resto do armazenamento apenas tecle <em>Enter</em> (recomendado), caso você queira uma partição de sistema com espaço delimitado insira o comando abaixo trocando o valor de 20G pelo valor desejado (não recomendado): </p>
        <code>last sector: +<mark>20G</mark></code>
        <p><strong>Observação:</strong> Existe muito debate a respeito de qual é o tamanho necessário para uma partição raiz do sistema, obviamente o necessário varia conforme o tipo da instalação e a quantidade de programas a serem instalados. Na maioria das documentações que vi a recomendação é de no mínimo <em>20G</em> para a grande maioria dos usuários e de <em>40G</em> a <em>60G</em> para casos mais extremos. Lembrando que <strong>se você pretende usar um arquivo swap na partição do sistema você deve contabilizar o espaço necessário para o arquivo de swap aqui também!</strong></p>
        <p>Agora, precisamos informar o tipo da partição, para mudar o tipo da partição use o comando:</p>
        <code>t</code>
        <p>Supondo que a partição raiz seja a segunda partição criada use tecle <em>2</em> e depois tecle <em>Enter</em>.</p>
        <p>Para ver os códigos disponíveis use o comando:</p>
        <code>L</code>
        <p>O código para o tipo Linux é o <em>83</em>, digite 83 e dê enter para mudar o tipo para "Linux"</p>
        <!-- Partição /home em BIOS -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h4>Partição para <em>/home</em> separada (opcional)</h4>
        <p>Para criar a nova partição que será usada como /home utilize o comando:</p>
        <code>n</code>
        <p>O programa vai perguntar que tipo de partição você deseja como no exemplo abaixo:</p>
        <code>Partition type<br>&nbsp;p&nbsp;primary<br>&nbsp;e&nbsp;extended<br>Select (default p):</code>
        <p>Tecle <em>e</em> (para <i>extended</i>) e dê enter para a criar uma nova partição extendida.</p>
        <p>O programa vai perguntar o número da partição como no exemplo abaixo:</p>
        <code>Partition number:</code>
        <p>Você pode selecionar qual vai ser o número da partição ou apenas teclar <em>Enter</em>.</p>
        <p>Logo em seguida o sistema irá exibir a seguinte linha para que você escolha o ponto de início da partição:</p>
        <code>first sector: default</code>
        <p>Apenas tecle <mark>Enter</mark>.</p>
        <p>Logo em seguida o sistema irá exibir a linha abaixo para que você escolha o ponto de término da partição e delimite o seu tamanho, recomendo que apenas tecle <em>Enter</em> para ocupar o resto do armazenamento (embora você também pode delimitar o tanho dessa partição digitando da mesma maneira que a raiz).</p>
        <code>last sector: default</code>
        <p>Agora, precisamos informar o tipo da partição, para mudar o tipo da partição use o comando:</p>
        <code>t</code>
        <p>Supondo que a partição /home seja a segunda partição criada use tecle <em>3</em> e depois tecle <em>Enter</em>.</p>
        <p>Para ver os códigos disponíveis use o comando:</p>
        <code>L</code>
        <p>O código para o tipo Linux é o <em>83</em>, digite 83 e dê enter para mudar o tipo para "Linux"</p>
        <!-- Gravar as alterações -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h4>Gravar as alterações</h4>
        <p>Para gravar as alterações da tabela de partição e sair do programa utilize o comando abaixo:</p>
        <code>w</code>
        <p>Uma vez que as alterações foram gravadas você pode seguir para o <em>Passo 5 - Formatar as partições</em>.</p>
        <!-- Passo 4 Opção B - armazenamento em sistemas baseados em UEFI -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Opção B - Preparação para armazenamento em sistemas baseados em <mark>UEFI</mark></h3>
        <p>Para particionar o disco utilizaremos a ferramenta <em>gdisk</em> na unidade desejada, para isso utilize o comando:</p>
        <code>gdisk /dev/<mark>storageA</mark></code>
        <p>Com o <mark>gdisk</mark> aberto na unidade desejada criaremos uma nova tabela de partição em <mark>GPT</mark> com o comando:</p>
        <code>o</code>
        <!-- Modo Easy CGDISK -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <details class="spoiler" >
            <summary>Modo Fácil (Clique para ver)</summary>
            <p>Uma vez que você criou uma nova tabela em <em>GPT</em> você pode imediatamente usar o comando abaixo para escrever as alterações:</p>
            <code>w</code>
            <p>E fazer as partições de uma forma mais gráfica e fácil através do <em>cgdisk</em> com o comando:</p>
            <code>cgdisk /dev/<mark>storageA</mark></code>
            <h4>Como usar:</h4>
            <ul>
                <li><p>Com as setas ↑↓ (cima e baixo) você seleciona as partiçoes e com as setas ←→ (esquerda e direita) você seleciona as ações, tecle <em>Enter</em> para confirmar.</p></li>
                <li><p>Coloque o cursor sobre as partições que deseja excluir e depois selecione <em>[ Delete ]</em> para remover as partições.</p></li>
                <li><p>Coloque o cursor sobre <em>Free Space</em> depois selecione <em>[ New ]</em> para criar uma partição, digite o tamanho desejado ou apenas tecle <em>Enter</em> para usar todo o espaço.</p></li>
                <li><p>Para alterar o tipo da partição, coloque o cursor sobre a partição e selecione a opção <em>[ Type ]</em>.</p></li>
                <li><p>Por fim selecione a opção <em>[ Write ]</em> e confirme digitando <em>yes</em> e teclando <em>Enter</em>.</p></li>
            </ul>
            <!-- Modo Easy CGDISK - ESP -->
            <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
            <h4>Partição <em>ESP</em> (EFI system partition)</h4>
            <p>Para uma instalação de sistema em modo UEFI precisamos criar uma partição <em>ESP</em>, que é uma partição específica para ser acessada pela placa mãe para iniciar os sistemas. Por questões de compatibilidade o recomendado é <mark>550M</mark> do tipo <mark>ef00</mark> .</p>
            <!-- Modo Easy CGDISK - XBOOTLDR -->
            <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
            <h4>Partição <em>/boot</em> separada - <em>XBOOTLDR</em> (opcional e não recomendado para iniciantes)</h4>
            <p>O diretório <em>XBOOTLDR</em> contém as imagens de kernel e initramfs, bem como o arquivo de configuração do bootloader, muito útil para não enfrentar problemas de multiboot com o Windows. Um diretório <em>XBOOTLDR</em> separado não é necessário para operação normal do sistema. A partição <em>XBOOTLDR</em> deve conter no mínimo o espaço necessário para o seu kernel e initramfs + fallbacks, mas o recomendado é que seja de pelo menos <mark>1G</mark>, deve ser uma partição do tipo <mark>ea00</mark> (<em>Extended Boot Loader</em>).</p>
            <!-- Modo Easy CGDISK - SWAP -->
            <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
            <h4>Partição <em>SWAP</em> (opcional mas altamente recomendado)</h4>
            <p>A memória Swap é um espaço que é utilizado quando o sistema operacional fica sobrecarregado, evita a queda de desempenho, travamentos e desligamentos automáticos. A quantidade de memória swap necessária varia conforme a quantidade de memória ram que seu sistema possui e se você vai ou não utilizar hibernação, também pode variar conforme o tipo de dispositivo de armazenamento e não sendo recomendado o uso na sua configuração padrão em SSD's e NVME's. Fique tranquilo, você pode (e em grande parte dos casos deve) ter algum espaço voltado para swap ainda que seja no seu SSD ou NVME, apenas lembre de verificar a otimização de swap ao fim desse guia.</p>
            <p>Em vez de uma partição swap você também pode utilizar um arquivo de memória swap, assim você não precisa dedicar uma partição no disco especificamente para a swap, essa opção tende a ser preferida pelos usuários de SSD e NVME apesar da partição swap poder resultar numa melhor performance. Independente do caso utilize a partição swap <strong>ou</strong> o arquivo de swap, <strong>não use ambos e também não fique sem nenhum dos dois</strong> (ainda que seja em um outro dispositivo), vai te evitar muita dor de cabeça.</p>
            <p id="tabela-swap">Para saber quanto de swap pode ser necessário para o seu caso verifique na tabela abaixo:</p>
            <figure>
                <table>
                    <tbody>
                        <tr>
                            <th>RAM</th>
                            <th>Swap (sem hibernação)</th>
                            <th>&nbsp;Swap (com hibernação)</th>
                        </tr>
                        <tr>
                            <td>&nbsp;256MB</td>
                            <td>&nbsp;256MB</td>
                            <td>&nbsp;512MB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;512MB</td>
                            <td>&nbsp;512MB</td>
                            <td>&nbsp;1GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;1GB</td>
                            <td>&nbsp;1GB</td>
                            <td>&nbsp;2GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;2GB</td>
                            <td>&nbsp;1GB</td>
                            <td>&nbsp;3GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;3GB</td>
                            <td>&nbsp;2GB</td>
                            <td>&nbsp;5GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;4GB</td>
                            <td>&nbsp;2GB</td>
                            <td>&nbsp;6GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;6GB</td>
                            <td>&nbsp;2GB</td>
                            <td>&nbsp;8GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;8GB</td>
                            <td>&nbsp;3GB</td>
                            <td>&nbsp;11GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;12GB</td>
                            <td>&nbsp;3GB</td>
                            <td>&nbsp;15GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;16GB</td>
                            <td>&nbsp;4GB</td>
                            <td>&nbsp;20GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;24GB</td>
                            <td>&nbsp;5GB</td>
                            <td>&nbsp;29GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;32GB</td>
                            <td>&nbsp;6GB</td>
                            <td>&nbsp;38GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;64GB</td>
                            <td>&nbsp;8GB</td>
                            <td>&nbsp;72GB</td>
                        </tr>
                        <tr>
                            <td>&nbsp;128GB</td>
                            <td>&nbsp;11GB</td>
                            <td>&nbsp;139GB</td>
                        </tr>
                    </tbody>
                </table>
            </figure>
            <p>A partição swap deve ser to tipo <mark>8200</mark>.</p>
            <!-- Modo Easy CGDISK - / -->
            <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
            <h4>Partição raiz do sistema (<em>root</em> ou <em>/</em>)</h4>
            <p>A partição mais importante do sistema, é a partição em que todos os arquivos de sistema ficam e que tudo é montado. Via de regra, essa é a partição que ocupada todo o resto do armazenamento. No entanto, algumas pessoas preferem delimitar o espaço dessa partição para o tamanho necessário apenas para o funcionamento do sistema e ocupar o resto do armazenamento com uma partição dedicada para a pasta de usuários (/home). Dessa forma, se algum problema ocorrer com a partição do sistema não haverá perdas para os dados de usuário.</p>
            <p>É importante ressaltar que pastas de usuário <strong>não são compatíveis entre distribuições distintas</strong> e ainda numa mesma distribuição podem gerar problemas de incompatibilidade ou com configurações de aplicativos, variáveis e afins. Recomendo delimitar o tamanho da partição de sistema apenas e somente se você pretende fazer mudanças na partição de raiz do sistema sem ter que reinstalar o sistema.</p>
            <p>Se você é um usuário iniciante ou não pretende fazer tais mudanças, faça backup dos seus arquivos num outro dispositivo e <strong>e não delimite o tamanho da partição raiz e também não faça uma partição separada para a /home!</strong></p>
            <p><strong>Observação:</strong> Existe muito debate a respeito de qual é o tamanho necessário para uma partição raiz do sistema, obviamente o necessário varia conforme o tipo da instalação e a quantidade de programas a serem instalados. Na maioria das documentações que vi, a recomendação é de no mínimo <em>20G</em> para a grande maioria dos usuários e de <em>40G</em> a <em>60G</em> para casos mais extremos. Lembrando que <strong>se você pretende usar um arquivo swap na partição do sistema você deve contabilizar o espaço necessário para o arquivo de swap aqui também!</strong></p>
            <p>A partição / deve ser to tipo <mark>8304</mark>.</p>
            <!-- Modo Easy CGDISK - /home -->
            <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->           
            <h4>Partição para <em>/home</em> separada (opcional e não recomendado)</h4>
            <p>Se decidiu fazer uma partição separada para a /home recomendo que ocupe todo o resto do armazenamento (embora você também pode delimitar o tamanho dessa partição da mesma maneira que a raiz).</p></p>
            <p>A partição /home deve ser to tipo <mark>8302</mark>.</p>
            <h4>Terminado!</h4>
            <p>Pule para o <em>Passo 5 - Formatar as partições</em></p>
        </details>
        <!-- Modo Nomal CGDISK ESP -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->  
        <h4>Partição <em>ESP</em> (EFI system partition)</h4>
        <p>Para uma instalação de sistema em modo UEFI precisamos criar uma partição <em>ESP</em>, que é uma partição específica para ser acessada pela placa mãe para iniciar os sistemas. Para criar a partição <em>ESP</em> use o comando:</p>
        <code>n</code>
        <p>O sistema irá exibir a seguinte linha para que você escolha o número da partição:</p>
        <code>partition number: default</code>
        <p>Apenas tecle <mark>Enter</mark>.</p>
        <p>Logo em seguida o sistema irá exibir a seguinte linha para que você escolha o ponto de início da partição:</p>
        <code>first sector: default</code>
        <p>Apenas tecle <mark>Enter</mark>.</p>
        <p>Logo em seguida o sistema irá exibir a linha abaixo para que você escolha o ponto de término da partição e delimite o seu tamanho, por questões de compatibilidade recomendo <mark>550M</mark>, sendo assim deveremos utilizar o comando <mark>+550M</mark> e teclar <mark>Enter</mark>, de maneira que o diálogo no terminal fique da seguinte forma:</p>
        <code>last sector: +550M</code>
        <p>Logo em seguida o sistema irá exibir a linha abaixo para que você escolha o tipo da partição, para o tipo <mark>ESP</mark> devemos digitar o tipo <mark>ef00</mark> e teclar <mark>Enter</mark> de maneira que o diálogo no terminal fique da seguinte forma:</p>
        <code>Hex code or GUID (L to show codes, Enter = 8300): ef00</code>
        <p>Com isso temos uma partição no início do armazenamento, de 550M e do tipo EFI system partition.</p>
        <!-- Modo Nomal CGDISK XBOOTLDR -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h4>Partição <em>/boot</em> separada - <em>XBOOTLDR</em> (opcional e não recomendado para iniciantes)</h4>
        <p>O diretório <em>XBOOTLDR</em> contém as imagens de kernel e initramfs, bem como o arquivo de configuração do bootloader, muito útil para não enfrentar problemas de multiboot com o Windows. Um diretório <em>XBOOTLDR</em> separado não é necessário para operação normal do sistema. Para criar a nova partição use o comando:</p>
        <code>n</code>
        <p>O sistema irá exibir a seguinte linha para que você escolha o número da partição:</p>
        <code>partition number: default</code>
        <p>Apenas tecle <mark>Enter</mark>.</p>
        <p>Logo em seguida o sistema irá exibir a seguinte linha para que você escolha o ponto de início da partição:</p>
        <code>first sector: default</code>
        <p>Logo em seguida o sistema irá exibir a linha abaixo para que você escolha o ponto de término da partição e delimite o seu tamanho, a partição <em>XBOOTLDR</em> deve conter no mínimo o espaço necessário para o seu kernel e initramfs + fallbacks, mas o recomendado é que seja de pelo menos <mark>1G</mark>, sendo assim deveremos utilizar o comando <mark>+1G</mark> e teclar <mark>Enter</mark>, de maneira que o diálogo no terminal fique da seguinte forma:</p>
        <code>last sector: +1G</code>
        <p>Logo em seguida o sistema irá exibir a linha abaixo para que você escolha o tipo da partição, para o tipo <mark>XBOOTLDR</mark> devemos digitar o tipo <mark>ea00</mark> e teclar <mark>Enter</mark> de maneira que o diálogo no terminal fique da seguinte forma:</p>
        <code>Hex code or GUID (L to show codes, Enter = 8300): ea00</code>
        <p>Com isso temos uma partição de 1G e do tipo Extended Boot Loader.</p>
        <!-- Modo Nomal CGDISK SWAP -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h4>Partição <em>SWAP</em> (opcional mas altamente recomendado)</h4>
        <p>A memória Swap é um espaço que é utilizado quando o sistema operacional fica sobrecarregado, evita a queda de desempenho, travamentos e desligamentos automáticos. A quantidade de memória swap necessária varia conforme a quantidade de memória ram que seu sistema possui e se você vai ou não utilizar hibernação, também pode variar conforme o tipo de dispositivo de armazenamento e não sendo recomendado o uso na sua configuração padrão em SSD's e NVME's. Fique tranquilo, você pode (e em grande parte dos casos deve) ter algum espaço voltado para swap ainda que seja no seu SSD ou NVME, apenas lembre de verificar a otimização de swap ao fim desse guia.</p>
        <p>Em vez de uma partição swap você também pode utilizar um arquivo de memória swap, assim você não precisa dedicar uma partição no disco especificamente para a swap, essa opção tende a ser preferida pelos usuários de SSD e NVME apesar da partição swap poder resultar numa melhor performance. Independente do caso utilize a partição swap <strong>ou</strong> o arquivo de swap, <strong>não use ambos e também não fique sem nenhum dos dois</strong> (ainda que seja em um outro dispositivo), vai te evitar muita dor de cabeça.</p>
        <p id="tabela-swap">Para saber quanto de swap pode ser necessário para o seu caso verifique na tabela abaixo:</p>
        <figure>
            <table>
                <tbody>
                    <tr>
                        <th>RAM</th>
                        <th>Swap (sem hibernação)</th>
                        <th>&nbsp;Swap (com hibernação)</th>
                    </tr>
                    <tr>
                        <td>&nbsp;256MB</td>
                        <td>&nbsp;256MB</td>
                        <td>&nbsp;512MB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;512MB</td>
                        <td>&nbsp;512MB</td>
                        <td>&nbsp;1GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;1GB</td>
                        <td>&nbsp;1GB</td>
                        <td>&nbsp;2GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;2GB</td>
                        <td>&nbsp;1GB</td>
                        <td>&nbsp;3GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;3GB</td>
                        <td>&nbsp;2GB</td>
                        <td>&nbsp;5GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;4GB</td>
                        <td>&nbsp;2GB</td>
                        <td>&nbsp;6GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;6GB</td>
                        <td>&nbsp;2GB</td>
                        <td>&nbsp;8GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;8GB</td>
                        <td>&nbsp;3GB</td>
                        <td>&nbsp;11GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;12GB</td>
                        <td>&nbsp;3GB</td>
                        <td>&nbsp;15GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;16GB</td>
                        <td>&nbsp;4GB</td>
                        <td>&nbsp;20GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;24GB</td>
                        <td>&nbsp;5GB</td>
                        <td>&nbsp;29GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;32GB</td>
                        <td>&nbsp;6GB</td>
                        <td>&nbsp;38GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;64GB</td>
                        <td>&nbsp;8GB</td>
                        <td>&nbsp;72GB</td>
                    </tr>
                    <tr>
                        <td>&nbsp;128GB</td>
                        <td>&nbsp;11GB</td>
                        <td>&nbsp;139GB</td>
                    </tr>
                </tbody>
            </table>
        </figure>
        <p>Para criar a nova partição que será usada como swap utilize o comando:</p>
        <code>n</code>
        <p>O sistema irá exibir a seguinte linha para que você escolha o número da partição:</p>
        <code>partition number: default</code>
        <p>Apenas tecle <mark>Enter</mark>.</p>
        <p>Logo em seguida o sistema irá exibir a seguinte linha para que você escolha o ponto de início da partição:</p>
        <code>first sector: default</code>
        <p>Apenas tecle <mark>Enter</mark>.</p>
        <p>Logo em seguida o sistema irá exibir a linha abaixo para que você escolha o ponto de término da partição e delimite o seu tamanho, supondo que eu tenha uma máquina com 2GB de ram e pretendo utilizar hibernação o recomendado conforme a tabela é utilizar 3G, para criar uma partição de 3GB o comando seria:</p>
        <code>last sector: +<mark>3G</mark></code>
        <p><strong>Lembre-se de substituir o valor acima para o valor ideal para o seu caso!</strong></p>
        <p>Logo em seguida o sistema irá exibir a linha abaixo para que você escolha o tipo da partição, para o tipo <mark>SWAP</mark> devemos digitar o tipo <mark>8200</mark> e teclar <mark>Enter</mark> de maneira que o diálogo no terminal fique da seguinte forma:</p>
        <code>Hex code or GUID (L to show codes, Enter = 8300): 8200</code>
        <p>Com isso temos uma nova partição de 3G e do tipo Linux swap.</p>
        <!-- Partição raiz do sistema (root ou /) em UEFI -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h4>Partição raiz do sistema (<em>root</em> ou <em>/</em>)</h4>
        <p>A partição mais importante do sistema, é a partição em que todos os arquivos de sistema ficam e que tudo é montado. Via de regra, essa é a partição que ocupada todo o resto do armazenamento. No entanto, algumas pessoas preferem delimitar o espaço dessa partição para o tamanho necessário apenas para o funcionamento do sistema e ocupar o resto do armazenamento com uma partição dedicada para a pasta de usuários (/home). Dessa forma, se algum problema ocorrer com a partição do sistema não haverá perdas para os dados de usuário.</p>
        <p>É importante ressaltar que pastas de usuário <strong>não são compatíveis entre distribuições distintas</strong> e ainda numa mesma distribuição podem gerar problemas de incompatibilidade ou com configurações de aplicativos, variáveis e afins. Recomendo delimitar o tamanho da partição de sistema apenas e somente se você pretende fazer mudanças na partição de raiz do sistema sem ter que reinstalar o sistema.</p>
        <p>Se você é um usuário iniciante ou não pretende fazer tais mudanças, faça backup dos seus arquivos num outro dispositivo e <strong>e não delimite o tamanho da partição raiz e também não faça uma partição separada para a /home!</strong></p>
        <p>Para criar a nova partição que será usada como raiz do sistema utilize o comando:</p>
        <code>n</code>
        <p>O sistema irá exibir a seguinte linha para que você escolha o número da partição:</p>
        <code>partition number: default</code>
        <p>Apenas tecle <mark>Enter</mark>.</p>
        <p>Logo em seguida o sistema irá exibir a seguinte linha para que você escolha o ponto de início da partição:</p>
        <code>first sector: default</code>
        <p>Apenas tecle <mark>Enter</mark>.</p>
        <p>Logo em seguida o sistema irá exibir a linha abaixo para que você escolha o ponto de término da partição e delimite o seu tamanho, caso você queira que a partição de sistema ocupe todo o resto do armazenamento apenas tecle <em>Enter</em> (recomendado), caso você queira uma partição de sistema com espaço delimitado insira o comando abaixo trocando o valor de 20G pelo valor desejado (não recomendado): </p>
        <code>last sector: +<mark>20G</mark></code>
        <p><strong>Observação:</strong> Existe muito debate a respeito de qual é o tamanho necessário para uma partição raiz do sistema, obviamente o necessário varia conforme o tipo da instalação e a quantidade de programas a serem instalados. Na maioria das documentações que vi, a recomendação é de no mínimo <em>20G</em> para a grande maioria dos usuários e de <em>40G</em> a <em>60G</em> para casos mais extremos. Lembrando que <strong>se você pretende usar um arquivo swap na partição do sistema você deve contabilizar o espaço necessário para o arquivo de swap aqui também!</strong></p>
        <p>Logo em seguida o sistema irá exibir a linha abaixo para que você escolha o tipo da partição, para o tipo <mark>root ou /</mark> devemos digitar o tipo <mark>8304</mark> e teclar <mark>Enter</mark> de maneira que o diálogo no terminal fique da seguinte forma:</p>
        <code>Hex code or GUID (L to show codes, Enter = 8300): 8304</code>
        <p>Com isso temos uma nova partição de 20G e do tipo Linux x86-64 root (/).</p>
        <!-- Partição /home separada em UEFI -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h4>Partição para <em>/home</em> separada (opcional)</h4>
        <p>Para criar a nova partição que será usada como /home utilize o comando:</p>
        <code>n</code>
        <p>O sistema irá exibir a seguinte linha para que você escolha o número da partição:</p>
        <code>partition number: default</code>
        <p>Apenas tecle <mark>Enter</mark>.</p>
        <p>Logo em seguida o sistema irá exibir a seguinte linha para que você escolha o ponto de início da partição:</p>
        <code>first sector: default</code>
        <p>Apenas tecle <mark>Enter</mark>.</p>
        <p>Logo em seguida o sistema irá exibir a linha abaixo para que você escolha o ponto de término da partição e delimite o seu tamanho, recomendo que apenas tecle <em>Enter</em> para ocupar o resto do armazenamento (embora você também pode delimitar o tamanho dessa partição digitando da mesma maneira que a raiz).</p>
        <code>last sector: default</code>
        <p>Logo em seguida o sistema irá exibir a linha abaixo para que você escolha o tipo da partição, para o tipo <mark>/home</mark> devemos utilizar o comando <mark>8302</mark> e teclar <mark>Enter</mark> de maneira que o diálogo no terminal fique da seguinte forma:</p>
        <code>Hex code or GUID (L to show codes, Enter = 8300): 8302</code>
        <p>Com isso temos uma nova partição que ocupa todo o resto do disco e do tipo Linux /home.</p>
        <h4>Gravar as alterações</h4>
        <p>Para gravar as alterações da tabela de partição e sair do programa utilize o comando abaixo:</p>
        <code>w</code>
        <!-- Passo 5 - Formatar as partições -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Passo 5 - Formatar as partições</h2>
        <p>Antes de prosseguir com a formatação e montagem das partições é importante ter certeza de que a tabela está correta, para checar as partições utilize o comando abaixo:</p>
        <code>lsblk</code>
        <p>Uma vez que a tabela de partição foi devidamente configurada, é necessário formatar cada partição para o seu devido sistema de arquivos. <strong>Lembrando que este é um passo necessário!</strong> A tabela de partição tem por função <strong>apenas</strong> descrever o endereço de cada espaço no armazenamento.</p>
        <!-- Passo 5 - Formatar as partições ESP e XBOOTLDR-->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Formatando a partição <em>ESP</em> e <em>XBOOTLDR</em> <strong>(Apenas se você seguiu "Opção B para sistemas baseados em UEFI")</strong> </h3>
        <p> As primeiras partições para serem formatadas são as partições <mark>ESP</mark> e <mark>XBOOTLDR</mark>, elas deve ser formatadas em <mark>FAT32</mark>. Supondo que por acaso a sua partição <mark>ESP</mark> ou a <mark>XBOOTLDR</mark> é a <mark>/dev/storageAP1</mark>, utilize o comando abaixo para formatar a partição substituindo o <mark>/dev/storageAP1</mark> para o devido endereço da partição <mark>ESP</mark> e <mark>XBOOTLDR</mark> no seu dispositivo:</p>
        <code>mkfs.fat -F32 /dev/<mark>storageAP1</mark></code>
        <details class="spoiler" >
            <summary>Formatação avançada (Clique para ver)</summary>
            <p>Diferentes sistemas de arquivo (e até mesmo ferramentas) podem ter por padrão o uso de tamanhos distintos de setor. Caso você queira especificar o tamanho do setor utilize o argumento <em>-S</em> como no exemplo abaixo:</p>
            <code>mkfs.fat -F 32 <em>-S 4096</em> /dev/<mark>storageAP1</mark></code>
        </details>
        <!-- Passo 5 - Formatar SWAP -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Formatando a partição SWAP</h3>
        <p>A segunda partição para ser formatada será a partição <mark>swap</mark> <strong>caso você a tenha feito</strong>, ela deve ser formatada em formato <mark>swap</mark>. Considerando que a sua partição <mark>swap</mark> é a <mark>/dev/storageAP2</mark> utilize o comando abaixo para formatar a partição:</p>
        <code>mkswap /dev/<mark>storageAP2</mark></code>
        <!-- Passo 5 - Formatar as partições / e /home -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Formatando a partição / e /home</h3>
        <p>Tanto a partição raiz do sistema <em>/</em> quanto a partição <em>/home</em> devem ser formatadas em <mark>EXT4</mark>. Considerando que elas estão no endereço <mark>/dev/storageAP3</mark> utilize o comando abaixo para formatar cada uma delas:</p>
        <code>mkfs.ext4 /dev/<mark>storageAP3</mark></code>
        <details class="spoiler" >
            <summary>Formatação avançada (Clique para ver)</summary>
            <p>Diferentes sistemas de arquivo (e até mesmo ferramentas) podem ter por padrão o uso de tamanhos distintos de setor. Caso você queira especificar o tamanho do setor utilize o argumento <em>-b</em> como no exemplo abaixo:</p>
            <code>mkfs.ext4  <em>-b 4096</em> /dev/<mark>storageAP3</mark></code>
        </details>
        <!-- Passo 6 - Montar as partições -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2 id="passo-6" >Passo 6 - Montar as partições</h2>
        <p>Até aqui temos o armazenamento particionado e formatado, pronto para a instalação do sistema, agora só é necessário montar as partições para que elas fiquem acessíveis para a instalação.</p>
        <!-- Passo 6 - Montar a raiz -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Montagem da <em>/</em> (raiz) do sistema</h3>
        <p>Montaremos a partição raiz do sistema em <em>/mnt</em>, basta substituir <mark>storageAP3</mark> pelo endereço da partição <em>raiz</em> (<mark>/</mark>) de acordo com o <em>seu</em> sistema:</p>
        <code>mount /dev/<mark>storageAP3</mark> /mnt</code>
        <!-- Passo 6 - Montar a home -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Montagem da <em>/home</em></h3>
        <p><strong>Se e somente se</strong> você fez uma partição separada para o diretório <em>/home</em> você deve montar o diretório <em>/mnt/home</em> nessa partição como no comando abaixo, basta substituir <mark>storageAP4</mark> pelo endereço da partição <em>/home</em> de acordo com o <em>seu</em> sistema:</p>
        <code>mount --mkdir /dev/<mark>storageAP4</mark> /mnt/home</code>
        <!-- Passo 6 - Montar a swap -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Montagem da <em>swap</em></h3>
        <p><strong>Se e somente se</strong> você fez uma partição separada para swap é recomendável você montar ela agora com o comando abaixo, basta substituir <mark>storageAP2</mark> pelo endereço da partição <em>swap</em> de acordo com o <em>seu</em> sistema:</p>
        <code>swapon /dev/<mark>storageAP2</mark></code>
        <!-- Passo 6 - Montar a ESP -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Montagem da partição <em>ESP</em> <strong>(Apenas se você seguiu "Opção B para sistemas baseados em UEFI")</strong> </h3>
        <p><strong>Se e somente se</strong> você está instalando o sistema em modo UEFI, será necessário montar o diretório <em>/mnt/boot</em> nessa partição como no comando abaixo (caso tenha feito a partição <em>XBOOTLDR</em> deve ser montado como <em>/mnt/efi</em> ), basta substituir <mark>storageAP1</mark> pelo endereço da partição <em>ESP</em> de acordo com o <em>seu</em> sistema:</p>
        <code>mount --mkdir /dev/<mark>storageAP1</mark> /mnt/boot</code>
        <p><strong>OU</strong> caso tenha feito a partição <em>XBOOTLDR</em>:</p>
        <code>mount --mkdir /dev/<mark>storageAP1</mark> /mnt/efi</code>
        <!-- Passo 6 - Montar a XBOOTLDR -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Montagem da partição <em>XBOOTLDR</em> <strong>(Apenas se você seguiu "Opção B para sistemas baseados em UEFI" e fez a partição <em>XBOOTLDR</em>)</strong> </h3>
        <p><strong>Se e somente se</strong> você está instalando o sistema em modo UEFI e fez a partição <em>XBOOTLDR</em>, será necessário montar o diretório <em>/mnt/boot</em> nessa partição como no comando abaixo, basta substituir <mark>storageAP1</mark> pelo endereço da partição <em>ESP</em> de acordo com o <em>seu</em> sistema:</p>
        <code>mount --mkdir /dev/<mark>storageAP1</mark> /mnt/boot</code>
        <!-- Passo 7 Instalar sistema -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Passo 7 - Instalar sistema</h2>
        <p>Uma vez que todos os diretórios foram criados e montados, podemos instalar a base do sistema através do comando <mark>pacstrap</mark>. 
        <code>pacstrap -K /mnt base <em>linux</em> linux-firmware</code>
        <p><strong>*</strong> Caso você queira utilizar um kernel <em>LTS</em> você pode substituir o pacote <mark>linux</mark> por <mark>linux-lts</mark>.</p>
        <!-- Passo 7 Instalar sistema -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////
        <h2>Passo 7 - Instalar sistema</h2>
        <p>Uma vez que todos os diretórios foram criados e montados, podemos instalar o sistema através do comando <mark>pacstrap</mark>. Considerando que a nossa instalação alvo consiste em:</p>
        <ul>
            <li><p>kernel <mark>linux</mark> (padrão)</p></li>
            <li><p>wifi com o <mark>iwd</mark> e resolução com o <mark>openresolv</mark></p></li>
            <li><p><mark>nano</mark> para editor de texto</p></li>
            <li><p>updates de microcódigo com o pacote <mark>amd-ucode</mark></p></li>
            <li><p>elevação de privilégios com o <mark>sudo</mark></p></li>
            <li><p>inicialização com o <mark>systemd-boot</mark> (ferramenta padrão, não precisa ser adicionado ao pacstrap)</p></li>
        </ul>
        <p>Que resultará na linha abaixo:</p>
        <p><strong>⚠️ Aviso!</strong> Leia a explicação abaixo antes de instalar o seu sistema com o mesmo comando! </p>
        <code>pacstrap -K /mnt base <em>linux</em> linux-firmware <em>iwd</em> <em>openresolv</em> nano <em>amd-ucode</em> sudo pipewire pipewire-alsa pipewire-pulse pipewire-jack wireplumber</code>
        <p><strong>Porém:</strong> </p>
        <ul>
            <li><p>Caso você queira utilizar um kernel <em>LTS</em> você pode substituir o pacote <mark>linux</mark> por <mark>linux-lts</mark>;</p></li>
            <li><p>Caso você não deseje um gerenciamento de rede mínimo para wifi e quer mais compatibilidade e integração com a interface gráfica deve substituir o pacote <mark>iwd</mark> pelo pacote <mark>networkmanager</mark>;⚠️ Lembrando que é possível utilizar ambos! O <mark>iwd</mark> pode funcionar como <i>backend</i> do <mark>NetworkManager</mark> substituindo o <mark>wpa_supplicant</mark>, instale o pacote <mark>iwd</mark> caso deseje utilizá-lo como <i>backend</i>;</p></li>
            <li><p>Caso queira uma instalação para <i>Desktop</i> com o <mark>NetworkManager</mark> <strong>Não instale o openresolv!</strong> Mas recomendo o a instalação do <mark>dnsmasq</mark> para possibilitar <i>caching</i>;</p></li>
            <li><p>Caso você utilize processadores Intel ao invés de AMD você deve substituir o pacote <mark>amd-ucode</mark> por <mark>intel-ucode</mark>;</p></li>
            <li><p><strong>Se e somente se</strong> você está instalando em modo BIOS adicione <mark>grub</mark> na lista de pacotes para serem instalados.</p></li>
            <li><p><strong>Se e somente se</strong> você está instalando em modo UEFI e quer um boot menu mais gráfico e customizável ao invés do <mark>systemd-boot</mark> adicione <mark>refind</mark> na lista de pacotes para serem instalados.</p></li>
            <li><p><strong>Se e somente se</strong> você está instalando numa máquina virtual do virtualbox, instale também o pacote <mark>virtualbox-guest-utils</mark> para utilitários do VirtualBox com suporte ao X ou <mark>virtualbox-guest-utils-nox</mark> para utilitários do VirtualBox sem suporte ao X.</p></li>
        </ul>
        -->
        <!-- Passo 8 Gerar FSTAB -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Passo 8 - Gerar FSTAB</h2>
        <p>Já com os pacotes instalados precisamos gerar o arquivo da tabela do sistema de arquivos para migrar para o sistema recém instalado para finalizarmos a instalação, para isso utilize o comando abaixo:</p>
        <code>genfstab -U /mnt >> /mnt/etc/fstab</code>
        <p>Caso queira verificar o arquivo da tabela do sistema de arquivos pra ver se está tudo certo utilize o comando abaixo:</p>
        <code>cat /mnt/etc/fstab</code>
        <!-- Passo 9 "CHROOT" para a instalação -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Passo 9 - "CHROOT" para a instalação</h2>
        <p>Com a tabela pronta e verificada acessaremos a instalação com o comando:</p>
        <code>arch-chroot /mnt</code>
        <p>Uma vez que fez o chroot para a partição do sistema instalado, é interessante a instalação de um editor de texto para configurar o sistema, você pode usar o que desejar, mas para fins de exemplo vamos instalar o <em>GNU/Nano</em>:</p>
        <code>pacman -S nano</code>
        <h2>Passo opcional - Criar swapfile </h2>
        <p><strong>Se e somente se</strong> você não tenha feito uma partição dedicada para swap mas ainda deseja utilizar swap através de arquivo swap, você pode gerar o arquivo swap com o comando abaixo (lembre se de mudar o valor de <mark>3</mark>GB para o <em>seu</em> caso conforme a <a class="link" href="#tabela-swap">tabela</a>):</p>
        <code>fallocate -l <mark>3</mark>GB /swapfile</code>
        <p>Mude a permissão do swapfile com o comando abaixo:</p>
        <code>chmod 600 /swapfile</code>
        <p>Configure o arquivo como área para troca de swap com o comando abaixo:</p>
        <code>mkswap /swapfile</code>
        <p>Ative a swap com o comando abaixo:</p>
        <code>swapon /swapfile</code>
        <p>Para fazer com que este arquivo seja montado automaticamente basta adicioná-lo na tabela de sistema de arquivos, para acessar o arquivo da tabela de sistema de arquivos utilize o comando:</p>
        <code>nano /etc/fstab</code>
        <p>E aqui podemos adicionar ao final do arquivo uma linha para a montagem do arquivo swap, conforme o exemplo abaixo:</p>
        <code>/swapfile     none    swap    defaults    0   0</code>
        <!-- Passo 10 Configurar o sistema instalado -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Passo 10 - Configurar o sistema instalado</h2>
        <p>Existem algumas configurações necessárias de fuso-horário, localização para e rede para que o sistema inicie sem problemas.</p>
        <!-- Fuso-horário -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Fuso-horário</h3>
        <p>Você pode setar o fuso-horário com um link simbólico como no comando abaixo:</p>
        <code>ln -sf /usr/share/zoneinfo/America/Sao_Paulo /etc/localtime</code>
        <p><strong>Observação:</strong> Caso você precise escolher uma outra região de fuso horário basta verificar as regiões disponíveis com o comando abaixo:</p>
        <code>ls -R /usr/share/zoneinfo | more</code>
        <p>Agora execute o hwclock para gerar o ajuste de relógio com o comando abaixo:</p>
        <code>hwclock --systohc</code>
        <!-- Localização -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Localização</h3>
        <p>Edite o <em>/etc/locale.gen</em> com o nano com o comando:</p>
        <code>nano /etc/locale.gen</code>
        </p>Descomente a linha "pt_BR.UTF-8 UTF-8" e gere a localização com o comando:</p>
        <code>locale-gen</code>
        <details class="spoiler" >
            <summary>Maneira preguiçosa de configurar o locale-gen (Clique para ver) </summary>
            <p>Você pode encontrar em alguns vídeos uma maneira bastante preguiçosa porém bastante objetiva de gerar o locale-gen com um comando só, que é através do comando abaixo:</p>
            <code>echo "pt_BR.UTF-8 UTF-8" >> /etc/locale.gen && locale-gen</code>
            <p>O que esse comando vai fazer é simplesmente adicionar outra linha de locale ao final do arquivo e gerar o locale-gen através dela.</p>
        </details>
        <p>Para setar a configuração padrão de localização do sistema utilize o comando:</p>
        <code>echo "LANG=pt_BR.UTF-8" >> /etc/locale.conf</code>
        <p>Para fazer com que a mudança de layout de teclado seja persistente para o virtual console utilize o comando:</p>
        <code>echo "KEYMAP=br-abnt2" >> /etc/vconsole.conf</code>
        <!-- Configuração básica de rede -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Configuração básica de rede</h3>
        <p>Utilize o comando abaixo para selecionar o nome do host substituindo <mark>meuhostname</mark> para o nome de host desejado:</p>
        <code>echo "<mark>meuhostname</mark>" >> /etc/hostname</code>
        <p>Logo em seguida edite o arquivo de hosts com o nano com o comando:</p>
        <code>nano /etc/hosts</code>
        <p>Nesse arquivo adicione as linhas abaixo substituindo <mark>meuhostname</mark> para o nome de host desejado:</p>
<pre><code>127.0.0.1        localhost
::1              localhost
127.0.1.1        <mark>meuhostname</mark></code></pre>
        <!-- Finalizando a configuração de rede -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Finalizando a configuração de rede</h3>
        <p>Aqui você deve escolher entre uma instalação padrão para desktop e uma instalação minimalista (para laptops sem muitos recursos que só utilizam conexão sem fio no mesmo local), então basta escolher <strong>1 dos casos abaixo</strong>:</p>
        <!-- NetworkManager e systemd-resolved -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <!-- SUBSTITUÍDO POR DNSMASQ
        <h4>NetworkManager e systemd-resolved</h4>
        <p>Apenas habilite os serviços <mark>NetworkManager</mark> e <mark>systemd-resolved</mark> com o comando:</p>
        <code>systemctl enable NetworkManager systemd-resolved</code>
        -->
        <!-- NetworkManager e dnsmasq -->
        <h4>NetworkManager e dnsmasq (configuração padrão para Desktop)</h4>
        <p>Antes de mais nada precisamos instalar os pacotes do <em>NetworkManager</em> e <em>dnsmasq</em> com o comando:</p>
        <code>pacman -S networkmanager dnsmasq</code>
        <p>Para deixar o NetworkManager habilitado basta habilitar o seu serviço com o comando:</p>
        <code>systemctl enable NetworkManager</code>
        <p>E está tudo certo! Mas eu recomendo fortemente você possibilitar <i>caching</i> e <i>contidional forwarding</i> com o dnsmasq, para isso edite o arquivo <mark>/etc/NetworkManager/conf.d/dns.conf</mark>:</p>
        <code>nano /etc/NetworkManager/conf.d/dns.conf</code>
        <p>E insira as linhas:</p>
        <code>[main]<br>dns=dnsmasq</code>
        <p>Agora execute o comando abaixo para que o <em>NetworkManager</em> inicie o <em>dnsmasq</em> e adicione o endereço <em>127.0.0.1</em> para <em>/etc/resolv.conf</em>.</p>
        <code>nmcli general reload</code>
        <p>⚠️ Não precise se preocupar em iniciar o serviço pois o <em>NetworkManager</em> iniciará tudo sozinho sem a necessidade de utilização de serviço</p>
        <br>
        <p><em>BÔNUS!</em></p>
        <p>Se você desejar, pode instalar o pacote <em>iwd</em> e utilizá-lo como <i>backend</i> ao invés do <em>wpa_supplicant</em>, para isso instale o iwd com o comando:</p>
        <code>pacman -S iwd</code>
        <p>Depois acesse o arquivo <mark>/etc/NetworkManager/conf.d/wifi_backend.conf</mark>:</p>
        <code>nano /etc/NetworkManager/conf.d/wifi_backend.conf</code>
        <p>E insira as linhas:</p>
        <code>[device]<br>wifi.backend=iwd</code>
        <p><strong>⚠️ ALERTA!</strong> Não inicie o serviço <em>iwd</em> e nem configure o <em>iwd</em> manualmente! O <em>NetworkManager</em> vai iniciá-lo e gerenciá-lo por conta própria.</p>
        <!-- iwd e openresolv -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h4>iwd (configuração mínima para Laptop)</h4>
        <p>Antes de mais nada instale os pacotes <em>iwd</em> e <em>openresolv</em>:</p>
        <code>pacman -S iwd openresolv</code>
        <p>Agora crie a pasta para o arquivo de configuração do iwd:</p>
        <code>mkdir /etc/iwd</code>
        <p>Crie o arquivo <em>/etc/iwd/main.conf</em> e edite pelo nano utilizando o comando:</p>
        <code>nano /etc/iwd/main.conf</code>
        <p>Desde a versão 0.19, o iwd pode atribuir endereços IP e configurar rotas usando um cliente DHCP integrado, para habilitar essa configuração adicione as linhas:</p></p>
        <code>
            [General]<br>
            EnableNetworkConfiguration=true
        </code>
        <p>Para configurar a gerência de <em>DNS</em> com o <em>openresolv</em> adicione as linhas:</p>
        <code>[Network]<br>
            NameResolvingService=resolvconf
        </code>
        <p>Desde a versão 1.10, o iwd suporta IPv6, mas está desabilitado por padrão. Caso queira habilitá-lo ainda nas opções de <mark>[Network]</mark> adicione a linha:</p>
        <code>EnableIPv6=true</code>
        <p>É interessante que exista algo no <mark>/etc/resolv.conf</mark> para resolver o DNS, para isso abra o arquivo com o nano:</p>
        <code>nano /etc/resolv.conf</code>
        <p>E insira as linhas:</p>
        <code>nameserver 1.1.1.1<br>nameserver 1.0.0.1</code>
        <p>* Sinta-se a vontade para alterar o endereço de DNS.</p>
        <p>Por fim habilite o serviços <mark>iwd</mark> com o comando:</p>
        <code>systemctl enable iwd</code><p></p>
        <!-- Configurar o DNS -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        
        <!-- OBSOLETO
        
        <h3>Configurar o DNS</h3>
        <p>Para fornecer resolução de DNS para softwares que lêem o <em>/etc/resolv.conf</em> crie o link simbólico com o comando:</p>
        <code>ln -rsf /run/systemd/resolve/stub-resolv.conf /etc/resolv.conf</code>
        <p>Caso queira configurar manualmente os endereços para DNS crie o diretório <mark>/etc/systemd/resolved.conf.d/</mark> para os arquivos de configuração com o comando:</p>
        <code>mkdir /etc/systemd/resolved.conf.d</code>
        <p>Em <mark>/etc/systemd/resolved.conf.d/dns_servers.conf</mark> adicione os seguintes endereços para o <mark>OpenDNS</mark> (ou substitua para os endereços que você preferir):</p>
        <code>[Resolve]<br>DNS= 208.67.222.222 208.67.220.220 2620:119:35::35 2620:119:53::53</code>
        <p>E caso não queira nenhum servidor de fallback basta acessar <mark>/etc/systemd/resolved.conf.d/fallback_dns.conf</mark> e adicionar:</p>
        <code>[Resolve]<br>FallbackDNS=</code>
        
        -->
        <!-- Passo 11 Definir senha do administrador -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Passo 11 - Definir senha do administrador</h2>
        <p>Para definir a senha de administrador utilize o comando abaixo:</p>
        <code>passwd</code>
        <!-- Passo 12 Criar usuário padrão e habilitar elevação de privilégios com sudo -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Passo 12 - Criar usuário padrão e habilitar elevação de privilégios com sudo</h2>
        <p>Para criar um novo usuário, com uma pasta em <em>/home</em> e que possa utilizar sudo (por fazer parte do grupo <em>wheel</em>) utilize o comando abaixo substituindo o <mark>seunomedeusuário</mark> pelo nome de usuário que você deseja:</p>
        <code>useradd -mG wheel seunomedeusuário</code>
        <p>Para configurar a senha da conta desse usuário use o comando abaixo substituindo o <mark>seunomedeusuário</mark> pelo seu nome de usuário:</p>
        <code>passwd seunomedeusuário</code>
        <p>Instale o sudo com o comando:</p>
        <code>pacman -S sudo</code>
        <p>Edite o arquivo sudoers com o nano utilizando o comando abaixo:</p>
        <code>sudo env EDITOR=nano visudo</code>
        <p>Habilite a elevação de privilégio para o grupo <mark>wheel</mark> descomentando a linha deletando o <mark>#</mark> antes dele em:</p>
        <code>%wheel ALL=(ALL) ALL</code>
        <!-- Passo 13 Instalação de inicializador -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Passo 13 - Instalação de inicializador</h2>
        <p>Assim como foi dito na introdução, este guia trata da instalação tanto para BIOS quanto para UEFI. Embora não é necessário é extremamente recomendado instalar pacotes de update de microcódigo e configurá-los desde o bootloader, então caso esteja numa máquina real selecione uma das opções abaixo:</p>
        <p> - Para processadores <em>AMD</em> instale o pacote:</p>
        <code>pacman -S amd-ucode</code>
        <p><strong>OU</strong></p>
        <p>- Para processadores <em>Intel</em> instale o pacote:</p>
        <code>pacman -S intel-ucode</code>
        <p>E então escolha uma das opções de bootloader abaixo para prosseguir:</p>
        <!-- OPÇÃO A -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Opção A - GRUB2 (BIOS/UEFI multiboot)</h3>
        <img class="responsiva" src="https://upload.wikimedia.org/wikipedia/commons/1/12/GRUB_screenshot.png" alt="GRUB2 boot menu">
        <p>Antes de mais nada instale o grub com o comando:</p>
        <code>pacman -S grub</code>
        <p>O GRUB nessa altura do campeonato se tornou o bootloader "de facto" do Linux, é o mais comum que você vai ver por aí e permite um bom grau de personalização e configuração, a instalação do GRUB é extremamente simples, basta usar o comando <mark>grub-install</mark> e selecionar a unidade (e não a partição!) em que você deseja instalar como no comando abaixo:</p>
        <code>grub-install --target=i386-pc /dev/<mark>storageA</mark></code>
        <p>Uma vez que o GRUB está instalado, use a ferramenta <em>grub-mkconfig</em> para gerar o <em>/boot/grub/grub.cfg</em>:</p>
        <code>grub-mkconfig -o /boot/grub/grub.cfg</code>
        <!-- OPÇÃO B -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Opção B - systemd-boot (UEFI multiboot)</h3>
        <img class="responsiva" src="https://www.freedesktop.org/wiki/Software/systemd/systemd-boot/systemd-boot-menu.png" alt="systemd-boot menu">
        <p>Opção padrão para quem está em sistemas UEFI, tem reconhecimento automático para <i>dualboot</i> com Windows e permite um gerenciamento muito facilitado para múltiplas entradas de sistema, embora tenha basicamente 0 grau de customização tem uma manutenção muito fácil. Para instalar inicializador systemd-boot utilize o comando abaixo:</p>
        <code>bootctl --path=/boot install</code>
        <p><strong>OU</strong> caso você tenha feito a partição <em>XBOOTLDR</em>:</p>
        <code>bootctl --esp-path=/efi --boot-path=/boot install</code>
        <p>Uma vez que o bootloader foi instalado vamos definir o arquivo <em>arch.conf</em> como o arquivo de inicialização padrão do bootloader com o comando:</p>
        <code>echo "default arch.conf" >> /boot/loader/loader.conf</code>
        <p>Para criar o arquivo de inicialização <em>arch.conf</em>, que informa os arquivos a serem carregados e o endereço da partição raiz do sistema podemos fazer de 2 formas:</p>
        <details class="spoiler" >
            <summary>Indicando o endereço da partição raiz por Block device names (mais simples / ID genérico)</summary>
            <p>Crie o arquivo <em>arch.conf</em> com o nano com o comando:</p>
            <code>nano /boot/loader/entries/arch.conf</code>
            <p>Considerando que <mark>storageAP3</mark> é a sua partição <em>raiz (<mark>/</mark>)</em> edite o arquivo para ficar da seguinte forma:</p>
            <code>title&emsp;Archlinux<br>linux&emsp;/vmlinuz-linux<br>initrd&emsp;/amd-ucode.img<br>initrd&emsp;/initramfs-linux.img<br>options&emsp;root=/dev/<mark>storageAP3</mark> rw</code>
        </details>
        <details class="spoiler" >
            <summary>Indicando o endereço da partição raiz por UUID (mais complexo / ID único)<br><strong>(Faça desse modo se fez um partição XBOOTLDR)</strong></summary>
            <p>Para criar o arquivo da configuração de inicialização do sistema precisamos do identificador único da partição (UUID). Para criar o arquivo já com o identificador único da partição raiz utilize o comando:</p>
            <code>blkid -s UUID -o value /dev/<mark>storageAP3</mark> >> /boot/loader/entries/arch.conf</code>
            <p><strong>Observação:</strong> lembre-se de substituir o endereço /dev/<mark>storageAP3</mark> pelo endereço da sua partição raiz.</p>
            <p>Agora basta acessar o arquivo com o nano com o comando:</p>
            <code>nano /boot/loader/entries/arch.conf</code>
            <p>Edite o arquivo para ficar da seguinte forma:</p>
            <code>title&emsp;Archlinux<br>linux&emsp;/vmlinuz-linux<br>initrd&emsp;/amd-ucode.img<br>initrd&emsp;/initramfs-linux.img<br>options&emsp;root=UUID=<mark>UUID da partição</mark> rw</code>
        </details>
        <p><strong>Observações:</strong></p>
            <ul>
                <li><p>Caso você utilize kernel Linux LTS lembre-se de modificar a linha <mark>/vmlinuz-linux</mark> para <mark>/vmlinuz-linux-lts</mark> e <mark>initramfs-linux.img</mark> para <mark>initramfs-linux-lts.img</mark></p></li>
                <li><p>Caso você utilize processadores Intel ao invés de AMD você deve substituir o <mark>amd-ucode.img</mark> por <mark>intel-ucode.img</mark>;</p></li>
            </ul>
        <!-- OPÇÃO C -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Opção C - rEFInd (UEFI multiboot)</h3>
        <img class="responsiva" src="https://repository-images.githubusercontent.com/237197634/93c0c680-46b9-11ea-9eda-b3071a50454b" alt="">
        <p>Antes de mais nada instale o rEFInd com o comando:</p>
        <code>pacman -S refind</code>
        <p>Se você já viu imagens de customização de Linux na internet, seja buscando imagens no Google ou talvez no <a class="link" href="https://www.reddit.com/r/unixporn/">r/unixporn</a>, é bem provável que você viu algum tema para menu de boot, e dentre esses o que é provavelmente mais amado pela sua capacidade de customização é o <mark>refind</mark>. A experiência proporcionada por ele é bem próxima do multiboot do OpenCore.  A instalação do refind é absurdamente simples e pode ser feita em um único comando:</p>
        <code>refind-install --usedefault /dev/<mark>storageAP1</mark></code>
        <p>* <strong>considerando que</strong> /dev/<mark>storageAP1</mark> é sua partição <em>ESP</em></p>
        <p>Nesse caso, o loader do refind será instalado como o loader padrão do disco (<em>esp/EFI/BOOT/bootx64.efi</em>), e funcionará independente da implementação de UEFI ou da mudança de placa-mãe. Você pode usar o código abaixo se quiser que o loader seja instalado em <mark>esp/EFI/refind/</mark> e tenha essa pasta como o carregador padrão na sua placa mãe:</p>
        <code>refind-install</code>
        <!-- OPÇÃO D -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Opção D (minha preferida) - EFISTUB (UEFI singleboot)</h3>
        <p>Se o seu computador suporta UEFI e você utiliza apenas um sistema, você pode deixar todo o trabalho de carregar o Linux para sua placa-mãe, esta é a opção que eu mais gosto de utilizar pois deixa o boot muito rápido e com bem menos chance de dar problemas, já que os argumentos de boot tendem a nunca mudar. Basta usar o <em>EFIBOOTMGR</em> como no exemplo abaixo para criar a entrada de boot na sua placa mãe:</p>
        <code>efibootmgr --create --disk /dev/<mark>storageA</mark> --part <mark>P1</mark> --label "Arch Linux" --loader /<mark>vmlinuz-linux</mark>  --unicode 'root=UUID=<mark>UUID</mark> rw initrd=\<mark>amd-ucode.img</mark> initrd=\<mark>initramfs-linux.img</mark> <mark>quiet</mark> <mark>nowatchdog</mark>' --verbose</code>
        <ul>
            <li><p>O dispositivo <em>StorageA</em> é o dispositivo onde está instalado a partição <em>ESP</em>.</p></li>
            <li><p>A partição <em>P1</em> é aquela onde está instalado a partição <em>ESP</em>.</p></li>
            <li><p><em>UUID</em> é onde deve ser inserido o número de UUID da partição <em>raiz</em> (<mark>/</mark>) do sistema.</p></li>
            <li><p><strong>Cuidado!</strong> Se você utiliza microcode Intel lembre-se de substituir <mark>amd-ucode.img</mark> por <mark>intel-ucode.img</mark></p></li>
            <li><p><strong>Cuidado!</strong> Se você utiliza kernel LTS lembre-se de substituir os argumentos acima para <em>vmlinuz-linux-lts</em> e <em>initramfs-linux-lts.img</em>.</p></li>
            <li><p><strong>Cuidado!</strong> Os argumentos <em>quiet</em> e <em>nowatchdog</em> são parâmetros de kernel, é bem raro mas pode haver sistemas que não suportem parâmetros por EFISTUB.</p></li>
        </ul>
        <!-- OPÇÃO E -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Opção E - Limine (BIOS/UEFI Multiboot)</h3>
        <p>Seja para multiplas entradas de boot para testes e sem muita dor de cabeça ou para utilizar <em>PXE</em>, seja para um boot rápido com fácil manutenção ou para belos temas o Limine é um excelente opção de bootloader, é bem simples de implementar e sem muita chance de erro.</p>
        <h4>Instalando o Limine</h4>
        <p>O Limine suporta tanto <em>BIOS</em> quanto <em>UEFI</em>, antes de mais nada é necesário baixar o pacote do Limine.</p>
        <code>pacman -S limine</code>
        <h4>Instalando para <em>BIOS</em></h4>
        <p>A instalação do bootloader em si para bios pode ser feita com 2 comandos, primeiramente mova o arquivo de configuração para o diretório <em>/boot</em>:</p>
        <code>cp /usr/share/limine/limine-bios.sys /boot/</code>
        <p>Depois indique o dispositivo para instalação, /dev/<mark>storageAP1</mark> (considerando que <mark>storageAP1</mark> é o seu disco principal):</p>
        <code>limine bios-install /dev/<mark>storageAP1</mark></code>
        <h4>Instalando para <em>UEFI</em></h4>
        <p>A instalação para UEFI é ainda mais simples, pois basta copiar o loader do Limine para o diretório padrão da partição <em>ESP</em>:</p>
        <code>cp /usr/share/limine/BOOTX64.EFI /efi/EFI/BOOT/BOOTX64.EFI</code>
        <h4>Criando o arquivo de configuração</h4>
        <p>Independente se você fez a instalação para <em>BIOS</em> ou <em>UEFI</em>, você deve indicar o <em>UUID</em> do disco em que está a raiz do sistema (<em>/</em>) no arquivo de configuração, para isso utilize o comando abaixo:</p>
        <code>blkid -s UUID -o value /dev/<mark>storageAP3</mark> >> /boot/limine/limine.cfg</code>
        <p>Você pode configurar o arquivo de diversas formas, seja indicando a partição através do disco de boot, seja <em>label</em>, seja por <em>tftp</em>, aqui vou indicar 2 exemplos.</p>
        <h4>Fazendo o arquivo baseado na posição do disco e partição <em>hdd://</em></h4>
<pre><code>:Arch Linux
    PROTOCOL=linux
    KERNEL_PATH=hdd://1:2/vmlinuz-linux
    CMDLINE=root=UUID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx rw
    MODULE_PATH=hdd://1:2/initramfs-linux.img</code></pre>
    <p>* onde <em>hdd://</em> se refere a utilizar a posição do disco como referência para a partição <em>/boot</em>, e <em>1:2</em> indica o disco <em>1</em> (<em>storageA</em>) partição <em>2</em> (<em>P2</em>).</p>
    <h4>BOOT baseado na posição do disco e partição <em>boot://</em></h4>
<pre><code>
:Arch Linux
    PROTOCOL=linux
    KERNEL_PATH=boot://2/vmlinuz-linux
    CMDLINE=root=UUID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx rw
    MODULE_PATH=boot://2/initramfs-linux.img</code></pre>
        <p>* onde <em>boot://</em> se refere ao disco de boot, e <em>2</em> indica a partição 2 (<em>P2</em>) desse mesmo disco.</p>
        <p>⚠️ Observação: Também é possível informar a raiz através do endereço da partição como no exemplo abaixo:</p>
        <code>CMDLINE=root=/dev/<mark>storageAP3</mark> rw</code>
        <!--
        <code>UUID=$(blkid -s UUID -o value <mark>/dev/storageAP2</mark>)</code>
        <code>root=$UUID</code>
        <code>root=<mark>$(blkid -s UUID -o value /dev/storageAP2)</mark></code>
        -->
        <!-- Passo 14 Finalizando a instalação -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Passo 14 - Finalizando a instalação</h2>
        <p><strong>Se e somente se</strong> você está instalando numa máquina virtual do virtualbox, instale também o pacote <mark>virtualbox-guest-utils</mark> para utilitários do VirtualBox com suporte ao X ou <mark>virtualbox-guest-utils-nox</mark> para utilitários do VirtualBox sem suporte ao X.</p>
        <p>Com tudo pronto podemos sair do ambiente chroot com o comando:</p>
        <code>exit</code>
        <p><strong>Se e somente se</strong> você ativou a swap desligue-a com o comando:</p>
        <code>swapoff</code>
        <p>Agora desmontaremos as partições restantes com o comando:</p>
        <!--
        <code>umount -a</code>
        -->
        <code>umount -R /mnt</code>
        <p>Para desligar o computador e concluir a instalação execute o comando:</p>
        <code>shutdown now</code>
        <p><strong>Lembre-se de remover a mídia de instalação assim que o computador desligar!</strong></p>
        <!-- Passo 14-FAIL DEU RUIM -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>DEU RUIM? Calma que (provavelmente) da pra resolver 😁</h2>
        <p>Ok, você basicamente finalizou a instalação e nada do sistema iniciar, correto? As chances são que você errou na configuração do bootloader ou algo assim (acredite, todos nós passamos por isso vez ou outra...), desde que você não tenha particionado, formatado e montado as partições tudo errado da sim pra continuar de onde parou. Selecione o boot pelo pendrive (ou iso ou seja lá o meio que você escolheu para instalação) e <i>boote</i> normalmente como se fosse refazer a instalação.</p>
        <h3>Configurando teclado e fonte do terminal</h3>
        <p>Antes de mais nada configure o seu ambiente seguindo o <a class="link" href="#passo-1">Passo 1</a>.</p>
        <h3>Verificando a estrutura dos discos</h3>
        <p>Comece verificando se a tabela de partição está correta com o comando:</p>
        <code>fdisk -l</code>
        <p>Caso queira algo mais gráfico e estiver utilizando <em>BIOS</em> pode usar o comando:</p>
        <code>cfdisk /dev/<mark>storageA</mark></code>
        <p><strong>Não edite nada a menos que necessário! Lembre-se que vai perder todos os dados da partição se editá-la!</strong></p>
        <p>Caso queira algo mais gráfico e estiver utilizando <em>UEFI</em> pode usar o comando:</p>
        <code>cgdisk /dev/<mark>storageA</mark></code>
        <p><strong>Não edite nada a menos que necessário! Lembre-se que vai perder todos os dados da partição se editá-la!</strong></p>
        <h3>Remonte as partições</h3>
        <p>Siga <a class="link" href="#passo-6">Passo 6</a> e certifique-se que as partições foram montadas corretamente.</p>
        <h3>CHROOT</h3>
        <p>Utilize o comando abaixo para fazer o <em>change root</em>, terminar as correções necessárias e continuar a instalação de onde parou:</p>
        <code>arch-chroot /mnt</code>
        <!-- Pós instalação -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <br>
        <h2>Retoques pós-instalação</h2>
        <p>Ok, você instalou o Arch, meus parabéns! Mas tudo que você vai ver ao fim dessa instalação é uma tela de login e nenhuma otimização. Mas tem muito que podemos fazer para deixar o Arch mais convidativo para um usuário final.</p>
        <p>A minha primeira recomendação é que você instale uma das interfaces abaixo.</p>
        <!-- Instalando backend de som -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Instalando backend de som</h2>
        <p>Antes de qualquer ambiente gráfico é interessante instalar os pacotes responsáveis pelo som, para isso instale:</p>
        <code>pipewire pipewire-alsa pipewire-pulse pipewire-jack pipewire-audio<em>*</em></code>
        <p><em>Observação:</em> Este último se e somente se vai usar dispositivos de som via bluetooth.</p>
        <!-- Instalando ambiente gráfico -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Instalando um ambiente gráfico</h2>
        <!-- GNOME -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Gnome</h3>
        <p>Para ter uma experiência padrão do Gnome, instalando os pacotes base e configurações básicas utilize o comando:</p>
        <code>pacman -S gnome gnome-tweaks</code>
        <p>OU se quiser uma experiência mais tradicional (barra inferior, menu estilo Iniciar, ícones na área de trabalho e bandeja da aplicativos) instale os pacotes:</p>
        <code>pacman -S gnome-shell gdm nautilus gnome-control-center gnome-shell-extension-dash-to-panel  gnome-shell-extension-arc-menu gnome-shell-extension-appindicator gnome-shell-extension-desktop-icons-ng</code>
        <p>Para ter uma lojinha de aplicativos funcional no Arch instale:</p>
        <code>pacman -S flatpak gnome-software</code>
        <p><em>Observação:</em> Para gerenciar as demais extensões, recomendo que através da lojinha do Gnome você baixe o flatpak <em>Gerenciador de Extensões</em> desenvolvido por <em>Matthew Jakeman</em>.</p>
        <p>Habilite o serviço do GDM com o comando:</p>
        <code>systemctl enable gdm</code>
        <p>Para habilitar o compatilhamento de tela instale os pacotes:</p>
        <code>pacman -S xdg-desktop-portal xdg-desktop-portal-gtk xdg-portal-gnome</code>
        <h4>Integração com o Firefox</h4>
        <p>Para usar o GNOME file picker como gerenciador de arquivos no Firefox, tenha a certeza de instalar o pacotes <em>xdg-desktop-portal-gnome </em> e depois sete <em>widget.use-xdg-desktop-portal.file-picker</em> para <em>1</em> em <em>about:config</em>.</p>
        <!-- KDE -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>KDE</h3>
        <p>Utilize o comando:</p>
        <code>pacman -S plasma-workspace plasma-desktop sddm sddm-kcm plasma-nm plasma-pa konsole dolphin kio-admin ark kdegraphics-thumbnailers ffmpegthumbs powerdevil kscreen kdeplasma-addons kde-gtk-config</code>
        <p><strong>Observação!</strong> Inclua esses pacotes caso também deseje essas funções:</p>
        <ul>
            <li><em>kcalc</em> (Se e somente se você utilizará uma calculadora)</li>
            <li><em>kdenetwork-filesharing</em> (Se e somente se você utilizará compartilhamento de arquivos)</li>
        </ul>
        <p>Habilite o serviço do SDDM com o comando:</p>
        <code>systemctl enable sddm</code>
        <p>Para habilitar o compatilhamento de tela instale os pacotes:</p>
        <!--<code>pacman -S xdg-desktop-portal xdg-desktop-portal-gtk xdg-portal-kde</code>-->   
        <code>pacman -S xdg-desktop-portal xdg-portal-kde</code>
        <p>Para ter uma lojinha de aplicativos funcional no Arch instale:</p>
        <code>pacman -S flatpak flatpak-kcm discover</code>
        <h4>Colocando o cache de efeitos kwin na RAM</h4>
        <p>Algumas pessoas podem sofrer com um "lag" em transições dos efeitos do KDE dependendo do dispositivo em que o sistema foi instalado, para resolver esse problema basta mover o diretório de cache de efeitos para a memória RAM.<br>Para fazer isso edite o arquivo <em>/etc/fstab</em> e insira a linha abaixo:</p>
        <code># KDE Cache<br>tmpfs /home/<em>seu_user</em>/.cache/kwin/qmlcache tmpfs defaults 0 0</code>
        <p>Apague os arquivos de cache utilizando o comando:</p>
        <code>rm  ~/.cache/kwin/qmlcache/*</code>
        <p>Recarregue as configurações do SystemD com o comando:</p>
        <code>systemctl daemon-reload</code>
        <h4>Ícones dos aplicativos do Windows no Dolphin</h4>
        <p>Caso queira visualizar os ícones nos arquivos <em>.exe</em> instale o pacote <em>icoutils</em>.</p>
        <h4>Integração com o Firefox</h4>
        <p>Para usar o Dolphin como gerenciador de arquivos no Firefox, tenha a certeza de instalar os pacotes <em>xdg-desktop-portal</em> e <em>xdg-desktop-portal-kde</em> e depois sete <em>widget.use-xdg-desktop-portal.file-picker</em> para <em>1</em> em <em>about:config</em>.</p>
        <p>Para integração para mídia e barra de tarefas instale o pacote <em>plasma-browser-integration</em> e instale a extensão <a class="link" href="https://addons.mozilla.org/pt-BR/firefox/addon/plasma-integration/">Plasma Integration</a>.</p>
        <p><em>Dica:</em> Para evitar entradas duplicadas no widget de Media Player ou no ícone da bandeja, defina <em>media.hardwaremediakeys.enabled</em> como <em>false</em>. Isso desativa a entrada de mídia do Firefox e usa apenas a do complemento de integração do Plasma.</p>
        <h4>Corrigindo emojis no KDE (Dolphin, notificações, etc.)</h4>
        <p>Considerando que você vai instalar as alternativas de fonte abaixo, é provável que o sistema não capte automaticamente as fontes instaladas. Para resolver isso copie os arquivos <a class="link" href="https://github.com/cain-dev/dotfiles/tree/main/fontconfig/conf.d">desse link</a> para <mark>/etc/fonts/conf.d/</mark>.</p>
        <!-- CINNAMON -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Cinnamon</h3>
        <p>Utilize o comando:</p>
        <code>pacman -S xorg cinnamon cinnamon-translations lightdm lightdm-slick-greeter gnome-terminal nemo nemo-fileroller nemo-preview nemo-python ffmpegthumbnailer</code>
        <p><strong>Observação!</strong> Inclua esses pacotes caso também deseje essas funções:</p>
        <ul>
            <li><em>gnome-calculator</em> (Se e somente se você utilizará uma calculadora)</li>
            <li><em>nemo-share</em> (Se e somente se você utilizará compartilhamento de arquivos)</li>
            <li><em>network-manager-applet</em> (Se e somente se você utilizará o NetworkManager como gerenciador de rede)</li>
        </ul>
        <p>Habilite o serviço do LightDM com o comando:</p>
        <code>systemctl enable lightdm</code>
        <p>Edite o arquivo <mark>/etc/lightdm/lightdm.conf</mark> e configure conforme o exemplo abaixo:</p>
        <code>[Seat:*]<br>...<br>greeter-session=<em>lightdm-slick-greeter</em><br>...</code>
        <p>Por fim edite o arquivo do <em>Slick</em> que está em <mark>/etc/lightdm/slick-greeter.conf</mark>, segundo <a class="link" href="https://github.com/linuxmint/slick-greeter">este link</a>.</p>
        <p>Para habilitar o compatilhamento de tela instale os pacotes:</p>
        <code>pacman -S xdg-desktop-portal xdg-desktop-portal-gtk xdg-portal-xapp</code>
        <h4>Nemo folder-color-switcher</h4>
        <p>Ao meu ver uma das funções mais úteis do Nemo é a mudança de cor das pastas, é um excelente recurso para organizar os arquivos no computador. Algumas pessoas acreditam que isso é uma função específica do Linux Mint quando na verdade isso é um script do Nemo que pode ser usado em diversas distribuições, inclusive no Arch.</p>
        <p>Caso você queira utilizá-la a primeira coisa que precisará é de um pack de ícones compatível, podemos utilizar o próprio tema <a class="link" href="https://github.com/linuxmint/mint-x-icons">Mint-X</a> ou <a class="link" href="https://github.com/linuxmint/mint-y-icons">Mint-Y</a>, baixe e extraia as pastas dos ícones (Mint-X, Mint-Y, Mint-X-Aqua, Mint-Y-Aqua... etc.) para o diretório <mark>/usr/share/icons</mark>;</p>
        <p>Depois, precisamos de um arquivo de referência de cores (<em>"nome do pack de ícones".json</em>), você provavelmente encontrará esse arquivo na pasta do próprio pack de ícones, ou você mesmo pode fazê-lo para algum pack que não possua o arquivo caso deseje, copie este arquivo para o diretório <mark>/usr/share/folder-color-switcher/colors.d</mark>;</p>
        <p>Por fim, baixe a extensão <a class="link" href="https://github.com/linuxmint/folder-color-switcher/tree/master">folder-color-switcher</a> e extraia o script para <mark>/usr/share/nemo-python/extensions/nemo-folder-color-switcher.py</mark>, basta fechar todas as instâncias do Nemo e abrir novamente que o script já vai estar funcionando.</p>
        <h4>Copiar caminho (Nemo Action)</h4>
        <p>As Nemo Actions adicionam itens ao menu de contexto (clique do botão direito) no gerenciador de arquivos Nemo e na área de trabalho do Cinnamon. Por padrão o Nemo não exibe a função "Copiar caminho", mas podemos facilmente adicionar através do Nemo Actions, basta copiar <a class="link" href="https://raw.githubusercontent.com/cain-dev/dotfiles/main/dot_local/share/nemo/actions/path_to_clipboard.nemo_action">este script</a> para o diretório <mark>~/.local/share/nemo/actions/</mark>, ou caso a pasta já exista você pode usar o comando abaixo:</p>
        <code>cd ~/.local/share/nemo/actions/ && curl -o https://raw.githubusercontent.com/cain-dev/dotfiles/main/dot_local/share/nemo/actions/path_to_clipboard.nemo_action</code>
        <!-- LXQT -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>LxQT</h3>
        <p>Utilize o comando:</p>
        <code>pacman -S lxqt oxygen-icons sddm</code>
        <p>Habilite o serviço do SDDM com o comando:</p>
        <code>systemctl enable sddm</code>
        <p>Para habilitar o compatilhamento de tela instale os pacotes:</p>
        <code>pacman -S xdg-desktop-portal xdg-desktop-portal-gtk xdg-portal-lxqt</code>
        <!-- XFCE -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>XFCE</h3>
        <p>Utilize o comando:</p>
        <code>pacman -S xfce4 xfce4-goodies lightdm lightdm-gtk-greeter lightdm-gtk-greeter-settings</code>
        <p>Habilite o serviço do LightDM com o comando:</p>
        <code>systemctl enable lightdm</code>
        <!-- XDG-USER-DIRS -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <p>Ao instalar alguma dessas interfaces, pode ser que ela não gere os diretórios padrão de usuário (Downloads, Músicas, Imagens, etc.), para corrigir isso precisamos instalar o <mark>XDG User Directories</mark> com o comando:</p>
        <code>sudo pacman -S xdg-user-dirs</code>
        <p>Para atualizar a lista de diretórios utilize o comando:</p>
        <code>xdg-user-dirs-update</code>
        <!-- Adicionando fontes para compatibilidade, suporte a línguas estrangeiras e símbolos -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Fontes</h2>
        <p>As fontes em sistemas Unixlike são uma completa "toca de coelho" a parte, e eu recomendo que caso você queira personalizar o seu sistema você se aprofunde um pouco mais nisso, porém de começo adicionaremos algumas fontes para compatibilidade, como suporte para línguas estrangeiras e símbolos.</p>
        <!--
        <p>Para compatibilidade:</p>
        <code>sudo pacman -S ttf-dejavu ttf-liberation</code>
        <p>Para suporte de caracteres internacionais do chinês tradicional, chinês simplificado, japonês e Korean.:</p>
        <code>sudo pacman -S adobe-source-han-sans-otc-fonts adobe-source-han-serif-otc-fonts</code> // Também é lançado pelo Google no projeto de fontes Noto como Noto Sans CJK.
        -->
        <h3>Liberation</h3>
        <p>Liberation é uma família de fontes que visa compatibilidade métrica com Arial, Times New Roman e Courier New, necessário para aplicativos como da Steam que fazem uso pesado dessas fontes.</p>
        <code>sudo pacman -S ttf-liberation</code>
        <h3>Noto</h3>
        <p>Noto é uma família de fontes que compreende mais de 100 fontes individuais, que juntas são projetadas para cobrir todas as escritas codificados no padrão Unicode (Sim, é definição da Wikipédia, me julgue). Também há um pacote adicional para cobrir o padrão pictográfico (emoji).</p>
        <code>sudo pacman -S noto-fonts noto-fonts-cjk noto-fonts-extra noto-fonts-emoji</code>
        <!-- Habilitar Multilib -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Habilitar repositório <i>multilib</i></h2>
        <p>O repositório multilib contém softwares e bibliotecas 32-bit que podem ser usados para rodar e compilar aplicações 32-bit em sistemas 64-bit, necessário para instalação de drivers de vídeo e Steam.<br>Para habilitar a biblioteca acesse o arquivo <mark>/etc/pacman.conf</mark> e descomente as linhas abaixo:</p>
        <!-- Instalar drivers da AMD -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Instalação de Drivers</h2>
        <h3>AMD (drivers atuais)</h3>
        <h4>Pacotes</h4>
        <p>Se você tem uma placa de vídeo AMD recente instale os pacotes desejados como no exemplo abaixo:</p>
        <ul>
            <li><p>Instale o pacote <mark>mesa</mark> para aceleração 3D.</p></li>
            <li><p>Instale o pacote <mark>lib32-mesa</mark> para aceleração 3D em aplicações 32-bit.</p></li>
            <li><p>Instale o pacote <mark>xf86-video-amdgpu</mark> para aceleração 2D no Xorg.</p></li>
            <li><p>Instale o pacote <mark>vulkan-radeon</mark> para suporte a Vulkan.<br>(A menos que você tenha um motivo muito específico para usar o pacore <mark>amdvlk</mark>.</p></li>
            <li><p>Instale o pacote <mark>lib32-vulkan-radeon</mark> para suporte a Vulkan em aplicações 32-bit.<br>(A menos que você tenha um motivo muito específico para usar o pacote <mark>lib32-amdvlk</mark>).</p></li>
            <li><p>Instale o pacote <mark>libva-mesa-driver</mark> para video decoding por VA-API.</p></li>
            <li><p>Instale o pacote <mark>lib32-libva-mesa-driver</mark> para video decoding por VA-API em aplicações 32-bit.</p></li>
            <li><p>Instale o pacote <mark>mesa-vdpau</mark> para video decoding por VDPAU.</p></li>
            <li><p>Instale o pacote <mark>lib32-mesa-vdpau</mark> para video decoding por VDPAU em aplicações 32-bit.</p></li>
        </ul>
        <h4>Carregando o driver amdgpu</h4>
        <p>Considerando que você está utilizando o script <mark>mkinitcpio</mark> (já que ele é uma dependência comum dos pacotes de kernel) edite o arquivo <mark>/etc/mkinitcpio.conf</mark> e na linha...</p>
        <code>MODULES=()</code>
        <p>Tenha a certeza que apenas o módulo <mark>amdgpu</mark> é carregado ou que ao menos ele venha antes do módulo <mark>radeon</mark> caso você precise de ambos (não recomendado), de modo que fique:</p>
        <code>MODULES=(amdgpu ...)</code>
        <p>Após isso atualize o initramfs para o kernel padrão com o comando:</p>
        <code>mkinitcpio -p linux</code>
        <p><strong>OU</strong> utilize o comando abaixo caso você utilize o kernel LTS:</p>
        <code>mkinitcpio -p linux-lts</code>
        <h4>Setando parâmetros de módulo de kernel (Southern Islands e Sea Islands)</h4>
        <p><strong>SE E SOMENTE SE</strong> o seu PC seja a porcaria de uma APU Southern Islands ou Sea Islands (como o meu laptop) é interessante você ativar o suporte para o driver <mark>amdgpu</mark>.</p>
        <p>Para habilitar suporte para chips Southern Islands (SI) use o parâmetro <mark>si_support=1</mark> e para Sea Islands (CIK) use o parâmetro <mark>cik_support=1</mark><br>Para desabilitar suporte para chips Southern Islands (SI) use o parâmetro <mark>si_support=0</mark> e para Sea Islands (CIK) use o parâmetro <mark>cik_support=0</mark>.<br>O desejável aqui é ativar o suporte para ambos no módulo <mark>amdgpu</mark> e desativar o suporte no módulo <mark>radeon</mark>, para isso edite o arquivo <mark>/etc/modprobe.d/amdgpu.conf</mark> e insira uma das linhas abaixo:</p>
        <code>options amdgpu si_support=1<br>options amdgpu cik_support=1</code>
        <p>Por fim edite o arquivo <mark>/etc/modprobe.d/radeon.conf</mark> e insira uma das linhas abaixo:</p>
        <code>options radeon si_support=0<br>options radeon cik_support=0</code>
        <h4>blacklisting o driver radeon</h4>
        <p>Talvez o seu kernel ainda carregue o driver <mark>radeon</mark>, para verificar utilize o comando:</p>
        <code>lspci -k | grep -A 3 -E "(VGA|3D)"</code>
        <p>Verifique os drivers em uso e a ordem deles, verifique se o driver <mark>amdgpu</mark> está em perfeito funcionamento, se tiver é desnecessário o carregamento do driver <mark>radeon</mark>. Para desabilitar o driver <em>radeon</em> por completo, garanta que o módulo <mark>radeon</mark> não está citado no <mark>/etc/mkinitcpio.conf</mark> e se mesmo assim for carregado acesse o arquivo <mark>/etc/modprobe.d/radeon.conf</mark> e insira a linha:</p>
        <code>blacklist radeon</code>
        <p>Após isso atualize o initramfs para o kernel padrão com:</p>
        <code>mkinitcpio -p linux</code>
        <p><strong>OU</strong> utilize o comando abaixo caso você utilize o kernel LTS:</p>
        <code>mkinitcpio -p linux-lts</code>
        <p>Após isso reinicie o computador e verifique novamente o driver em uso.</p>
        <!-- Instalar drivers Intel -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Intel (drivers atuais)</h3>
        <h4>Pacotes</h4>
        <p>Se você tem uma placa de vídeo (ainda que integrado) Intel recente instale os pacotes desejados como no exemplo abaixo:</p>
        <ul>
            <li><p>Instale o pacote <mark>mesa</mark> para aceleração 3D.</p></li>
            <li><p>Instale o pacote <mark>lib32-mesa</mark> para aceleração 3D em aplicações 32-bit.</p></li>
            <li><p>Instale o pacote <mark>vulkan-intel</mark> para suporte a Vulkan.</li>
            <li><p>Instale o pacote <mark>lib32-vulkan-intel</mark> para suporte a Vulkan em aplicações 32-bit.</li>
            <li><p>Instale o pacote <mark>intel-media-driver</mark> para video decoding por VA-API (para processadores <em>Broadwell</em> em diante).</p></li>
            <li><p>Instale o pacote <mark>libva-intel-driver</mark> para video decoding por VA-API (para processadores <em>GMA 4500</em> até <em>Coffee Lake</em>).</p></li>
        </ul>
        <h4>Modesetting DDX</h4>
        <p>Como a Intel fornece e oferece suporte a drivers de código aberto, os gráficos da Intel são essencialmente plug-and-play, mas caso não tenha iniciado automaticamente ou caso você deseje configurar manualmente edite o arquivo <mark>/etc/X11/xorg.conf.d/20-modesetting.conf</mark>, porém, antes de qualquer coisa recomendo fortemente que você acesse a <a class="link" href="https://wiki.gentoo.org/wiki/Intel">Wikia do Gentoo</a> para configurar corretamente.</p>
        <p>Aqui vou usar de exemplo uma configuração voltada para utilização de <mark>modesetting</mark> para um processador intel mais recente:</p>
<pre><code>Section "Device"
    Identifier "Intel Graphics"
    Driver "modesetting"
    Option "AccelMethod" "glamor"
    Option "DRI" "3"
EndSection
</code></pre>
        <p>Substitua <mark>Option "DRI" "3"</mark> por <mark>Option "DRI" "2"</mark> caso encontre algum artefato, caso não esteja usando Wayland e deseje uma experiência livre de <i>tearing</i> você pode adicionar o argumento <mark>Option "TearFree" "true"</mark>.</p>
        <h4>xorg.conf</h4>
        <p>Para driver Gen 4+ (modesetting Mesa), edite o arquivo <mark>/etc/X11/xorg.conf.d/modesetting.conf</mark> e adicione as linhas:</p>
<pre><code>Section "Device"
    Identifier  "modesetting"
    Driver      "modesetting"
EndSection
</code></pre>
        <!-- Instalar drivers proprietários da Nvidia -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>NVIDIA (drivers atuais)</h3>
        <h4>Pacotes</h4>
        <ul>
            <li><p>Para do driver NVIDIA para o kernel <mark>linux</mark> instale o pacote <mark>nvidia</mark></p></li>
            <li><p>Para do driver NVIDIA para o kernel <mark>linux-lts</mark> instale o pacote <mark>nvidia-lts</mark></p></li>
            <li><p>Para utilitários do driver (como suporte para OpenGL e Vulkan) instale o pacote <mark>nvidia-utils</mark></p></li>
            <li><p>Para utilitários do driver (como suporte para OpenGL e Vulkan) para aplicações 32-bit instale o pacote <mark>lib32-nvidia-utils</mark></p></li>
            <li><p>Para utilitário de configuração do driver instale o pacote <mark>nvidia-settings</mark></p></li>
            <li><p>Para utilitário de configuração automática do Xorg instale o pacote <mark>nvidia-xconfig</mark></p></li>
        </ul>
        <h4>DRM kernel mode setting</h4>
        <p>Como drivers NVIDIA não suportam carregamento tardio automático de KMS, é necessário ativar a configuração do modo kernel DRM (Direct Rendering Manager) para fazer com que os compositores Wayland funcionem corretamente, para isso adicione <mark>nvidia_drm.modeset=1</mark> nos seus parâmetros de kernel.</p>
        <h4>Carregamento antecipado</h4>
        <p>O parâmetro de kernel é suficiente na maioria dos casos <em>MAS</em> se você quiser garantir que o driver seja carregado o mais rápido possível deve se adicionar <mark>nvidia</mark>, <mark>nvidia_modeset</mark>, <mark>nvidia_uvm</mark> e <mark>nvidia_drm</mark> ao <i>initramfs</i>. Considerando que você está utilizando o script <mark>mkinitcpio</mark> (já que ele é uma dependência comum dos pacotes de kernel) edite o arquivo <mark>/etc/mkinitcpio.conf</mark> e na linha...</p>
        <code>MODULES=()</code>
        <p>Adicione <mark>nvidia</mark>, <mark>nvidia_modeset</mark>, <mark>nvidia_uvm</mark> e <mark>nvidia_drm</mark>, de modo que fique:</p>
        <code>MODULES=(nvidia nvidia_modeset nvidia_uvm nvidia_drm)</code>
        <p>Após isso atualize o initramfs para o kernel padrão com o comando:</p>
        <code>mkinitcpio -p linux</code>
        <p><strong>OU</strong> utilize o comando abaixo caso você utilize o kernel LTS:</p>
        <code>mkinitcpio -p linux-lts</code>
        <h4>blacklisting o driver nouveau</h4>
        <p>Pode ser que o sistema selecione o driver <mark>nouveau</mark> automaticamente ainda que a sua placa seja suportada pelo driver proprietário.</p>
        <p>Para verificar qual driver está em ativo utilize o comando:</p>
        <code>lspci -nnk | grep -iA2 vga</code>
        <p>Se na linha <em>Kernel driver in use:</em> estiver <em>nouveau</em>, crie o arquivo <mark>/etc/modprobe.d/blacklist-nouveau.conf</mark>, e adicione as linhas:</p>
        <code>blacklist nouveau<br>options nouveau modeset=0</code>
        <p>Após isso atualize o initramfs para o kernel padrão com:</p>
        <code>mkinitcpio -p linux</code>
        <p><strong>OU</strong> utilize o comando abaixo caso você utilize o kernel LTS:</p>
        <code>mkinitcpio -p linux-lts</code>
        <p>Após isso reinicie o computador e verifique novamente o driver em uso.</p>
        <!-- Aceleração de Hardware -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Aceleração de vídeo por Hardware</h2>
        <p>Segundo a própria wiki do Arch Linux "a aceleração de vídeo por hardware possibilita que a placa de vídeo decodifique/codifique vídeo, descarregando assim a CPU e economizando energia". É essencial para qualquer computador moderno para usuário final possuir alguma espécie de aceleração via hardware, no Arch podemos ter aceleração através de 2 meios: VA-API e VDPAU.<br>Uma vez que você já instalou os pacotes como citado acima basta configurar as variáveis de ambiente, edite o arquivo <mark>/etc/environment</mark>.</p>
        <h3>Configurar VA-API</h3>
        <p>Adicione a variável <mark>LIBVA_DRIVER_NAME=</mark> seguido do driver para ser utilizado, por exemplo, vamos supor que o driver para ser utilizado no meu caso seja o <mark>radeonsi</mark>, logo a linha para ser acrescentada no arquivo seria:</p>
        <code>LIBVA_DRIVER_NAME=radeonsi</code>
        <p>Siga o exemplo abaixo para configurar o seu hardware:</p>
        <ul>
            <li><p>Intel</p></li>
                <ul>
                    <li>Para o pacote <mark>libva-intel-driver</mark> cite o driver <mark>i965</mark>;</li>
                    <li>Para o pacote <mark>intel-media-driver</mark> cite o driver <mark>iHD</mark>;</li>
                </ul>
            <li><p>AMDGPU</p></li>
                <ul>
                    <li>Para <mark>AMDGPU</mark> cite o driver <mark>radeonsi</mark>;</li>
                </ul>
        </ul>
        <h3>Configurar VDPAU</h3>
        <p>Adicione a variável <mark>VDPAU_DRIVER=</mark> seguido do driver para ser utilizado, por exemplo, vamos supor que o driver para ser utilizado no meu caso seja o <mark>radeonsi</mark>, logo a linha para ser acrescentada no arquivo seria:</p>
        <code>VDPAU_DRIVER=radeonsi</code>
        <ul>
            <li><p>Intel</p></li>
                <ul>
                    <li>Para <mark>Intel graphics</mark> cite o driver <mark>va_gl</mark>;</li>
                </ul>
            <li><p>AMDGPU</p></li>
                <ul>
                    <li>Para <mark>AMDGPU</mark>, execute o comando <mark>grep -i vdpau /var/log/Xorg.0.log</mark> cite o driver da linha <em>VDPAU driver: </em> (que geralmente é <mark>radeonsi</mark>);</li>
                </ul>
            <li><p>NVIDIA</p></li>
                <ul>
                    <li>Para <mark>NVIDIA VDPAU</mark> cite o driver <mark>vdpau</mark>;</li>
                    <li>Para <mark>NVIDIA NVDEC</mark> cite o driver <mark>nvidia</mark>;</li>
                </ul>
        </ul>
        <h3>Configurar aceleração para o Firefox (VA-API)</h3>
        <ol>
            <li>Certifique-se de que o WebRender esteja ativado entrando no endereço <mark>about:support</mark> e verificando se o valor de composição é "WebRender".</li>
            <li>Se necessário, o Hardware WebRender pode ser ativado à força definindo <mark>gfx.webrender.all</mark> como <mark>true</mark> em <mark>about:config</mark>.</li>
            <li>VA-API é habilitado por padrão para GPUs Intel se você estiver usando o Firefox 115 ou uma versão posterior. Para outras GPUs, defina <mark>media.ffmpeg.vaapi.enabled</mark> para <mark>true</mark> em <mark>about:config</mark>.</li>
        </ol>
        <h3>Configurando MPV</h3>
        <p>Edite o arquivo <mark>~/.config/mpv/mpv.conf</mark> </p>
        <code>hwdec=auto</code>
        <p>* Isso pode ser suficiente, embora eu recomendo fortemente você olhar as variáveis disponíveis em <a class="link" href="https://man.archlinux.org/man/mpv.1#hwdec=_api1,api2,..._no_auto_auto">mpv man</a>, você pode ver o <a class="link" href="https://github.com/cain-dev/dotfiles/blob/main/mpv/mpv.conf">meu dotfile</a> para configurar para o teu caso.</p>
        <!-- Otimizações recomendadas -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h2>Otimizações recomendadas</h2>
        <p>Aqui vai uma lista de coisas simples que você pode fazer para otimizar a sua instalação:</p>
        <!-- Melhore o desempenho do sistema Linux com noatime -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Melhore o desempenho do sistema de arquivos EXT4 com noatime:</h3>
        <p>Por padrão o sistema registra informações sobre quando os arquivos foram criados e modificados pela última vez, bem como quando foram acessados ​​pela última vez também, e desabilitar essa função pode trazer ganhos significativos na performance.  Para mudar isso acesse o <mark>/etc/fstab</mark> com o nano como no comando:</p>
        <code>nano /etc/fstab</code>
        <p>Altere as linhas dos dispositivos de modo que deixem de ser:</p>
        <code>UUID=XXXXXXXXXXXXXXXXXXXX  / ext4 <mark>relatime</mark>,errors=remount-ro 0 1</code>
        <p>Para ficarem dessa forma:</p>
        <code>UUID=XXXXXXXXXXXXXXXXXXXX  / ext4 <mark>noatime</mark>,errors=remount-ro 0 1</code>
        <p>E em seguida salve o arquivo.</p>
        <!-- Ativando o TRIM -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Ativando o TRIM:</h3>
        <p>Caso você utilize SSD's é essencial que você ative o serviço TRIM, para isso use o comando abaixo:</p>
        <code>systemctl enable fstrim.timer</code>
        <!-- Desabilite o Watchdog timer -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Melhore o desempenho desabilitando o Watchdog timer:</h3>
        <p>Para desativar os timers de watchdog (tanto software quanto hardware), adicione o <mark>nowatchdog</mark> aos seus parâmetros de inicialização.</p>
        <p>O parâmetro de inicialização nowatchdog pode não funcionar para o watchdog de hardware Intel TCO. Nesta circunstância, o módulo do kernel para o TCO pode ser desativado usando o parâmetro do kernel <mark>modprobe.blacklist=iTCO_wdt</mark>.</p>
        <p>Se você estiver usando CPUs AMD Ryzen, verifique também <mark>sp5100-tco</mark> em seu <em>systemd/Journal</em>. Este é o watchdog de hardware dentro da série de chipsets AMD 700. Para desativá-lo crie um arquivo em <mark>/etc/modprobe.d/disable-sp5100-watchdog.conf</mark> contendo:</p>
        <code>blacklist sp5100_tco</code>
        <p><strong>OU</strong></p>
        <p>use o parâmetro de kernel <mark>modprobe.blacklist=sp5100_tco</mark>.</p>
        <p>Para verificar, reinicie o computador e verifique se o comando abaixo retorna o valor <mark>0</mark>:</p>
        <code>cat /proc/sys/kernel/watchdog</code>
        <!-- Habilitar NTP -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Habilitar sincronização de relógio</h3>
        <p>A sincronização vai utilizar um dos serviços de NTP do sistema (por padrão o <em>systemd-timesyncd</em>), vamos começar criando o arquivo de configuração de servidores editando o arquivo <mark>/etc/systemd/timesyncd.conf.d/local.conf</mark> e adicionando as linhas:</p>
        <code>[Time]<br>NTP=a.ntp.br<br>FallbackNTP=b.ntp.br c.ntp.br</code>
        <p>Por fim habilite a sincronização com o comando:</p>
        <code>sudo timedatectl set-ntp true</code>
        <p>O serviço do <em>systemd-timesyncd</em> vai ser iniciado automaticamente.</p>
        <!-- Melhorar renderização de fontes -->
        <!-- ///////////////////////////////////////////////////////////////////////////////////////////////-->
        <h3>Habilite a biblioteca FreeType2</h3>
        <p>Edite o arquivo <mark>/etc/profile.d/freetype2.sh</mark> e descomente a linha:</p>
        <code>export FREETYPE_PROPERTIES="truetype:interpreter-version=NN"</code>
        <h3>Habilitar stem-darkening</h3>
        <p>Você já reparou que o MacOS sempre considera a leitura da fonte um pouco mais importante do que a sua fidelidade? Algumas pessoas que utilizam Linux não gostam muito de como fontes menores parecem bastante "embaçadas", mas da pra ter o melhor dos dois mundos habilitando o <em>stem-darkening</em> para fazer com que fontes menores sejam mais legíveis e menos embaçadas, para isso edite o arquivo <mark>/etc/environment</mark> e insira a linha:</p>
        <code>FREETYPE_PROPERTIES="cff:no-stem-darkening=0 autofitter:no-stem-darkening=0"</code>
        <p>Após as alterações reconstrua o cache do fontconfig com o comando:</p>
        <code>sudo fc-cache -fv</code>
        <h3>Manutenção de pacotes</h3>
        <p>Então você deixou o Arch alguns meses sem atualizar e começa a ter erros de integridade e pacote quando tenta? Vamos começar atualizando isoladamente o keyring com o comando:</p>
        <code>sudo pacman -Sy</code>
        <code>sudo pacman -S archlinux-keyring</code>
        <p>Se mesmo assim não resolveu existe a opção <strong>nuclear</strong>:</p>
        <code>rm -R /etc/pacman.d/gnupg/<br>
            rm -R /root/.gnupg/<br>
            gpg --refresh-keys<br>
            pacman-key --init && pacman-key --populate<br>
            pacman-key --refresh-keys</code>
        <p>Depois disso tente atualizar novamente que vai dar certo.</p>

    </main>
    <footer id="main-footer">
        <p>Está página ainda está em construção 🚧</p>
        <a class="footerlink" href="#main-header">↑ Retornar ao topo ↑</a>
    </footer>
</body>
</html>
